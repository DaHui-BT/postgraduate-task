import{d as g,r as v,h as x,c as m,a as s,w as b,v as h,b as y,o as d,p as k,e as w,_ as S,f as $,g as I,F as M,i as C,t as p,n as D}from"./index-BISqbsR5.js";function F(e){let i=new XMLHttpRequest;const u=document.location.protocol==="file:"?0:200;return i.open("GET",e,!1),i.overrideMimeType("text/html;charset=utf-8"),i.send(null),i.status===u?i.responseText:null}function T(e){if(e.trim()==""||e==null||e==null){alert("Config file error: [task file format not correct]!");return}let i=e.split(`
`),u=[],l=new Object({date:null,title:null,message:null,file:null,link:null});for(let o of i)if(o=o.replace("\r",""),!o.startsWith("#")&&o!="")if(o.startsWith("[")&&o.endsWith("]")){l.link="./tasks/"+l.date+"/"+l.file,u.push(l),l=new Object({date:null,title:null,message:null,file:null,link:null});let r=o.substring(1,o.length-1);l.title=r}else{let r=o.split("=");l[r[0].trim()]=r[1].trim()}return u.slice(1,u.length)}const _=e=>(k("data-v-4190e686"),e=e(),w(),e),N={class:"submit-form"},V={key:0},j=_(()=>s("label",{class:"submit-form-text",for:"title"},"Input title: ",-1)),Y=_(()=>s("br",null,null,-1)),B=_(()=>s("label",{class:"submit-form-text",for:"input-file"},"Input Picutre: ",-1)),E=_(()=>s("br",null,null,-1)),H=_(()=>s("label",{class:"submit-form-text",for:"submit-content"},"Submit Message: ",-1)),U=g({__name:"SubmitForm",props:["is_submit_form_show"],emits:["submit"],setup(e,{emit:i}){const u=e,l=v({date:x().format("YYYY-MM-DD: HH-mm:ss"),title:"",message:"",file_list:[]});function o(f){let t=f.target.files;if(t==null||t==null){alert("No files upload");return}for(let a of t)if(a.size>500*1024*1024){alert("upload file over than 500M!");break}for(let a of t){let n=new FormData;n.append("file",a),l.file_list.push(n)}console.log(l)}function r(){alert("Please use git to submit!")}return(f,t)=>(d(),m("div",N,[s("div",{class:"submit-button",onClick:r},"submit"),u.is_submit_form_show?(d(),m("div",V,[j,b(s("input",{class:"submit-form-title",id:"title",type:"text","onUpdate:modelValue":t[0]||(t[0]=a=>l.title=a)},null,512),[[h,l.title]]),Y,B,s("input",{class:"input-file",id:"input-file",type:"file",multiple:"",accept:".png, .jpg, .jpeg",name:"Upload",onChange:o},null,32),E,H,b(s("textarea",{class:"submit-content",id:"submit-content",rows:"10",placeholder:"input your submit message: ","onUpdate:modelValue":t[1]||(t[1]=a=>l.message=a)},null,512),[[h,l.message]])])):y("",!0)]))}}),W=S(U,[["__scopeId","data-v-4190e686"]]),z=e=>(k("data-v-86000557"),e=e(),w(),e),L={class:"submission"},O=z(()=>s("h1",null,"This is an submission page",-1)),P={class:"submission-content"},q={class:"submission-func"},G=["href"],R={class:"submission-func-container"},X={class:"submission-date"},A={class:"submission-message"},J=g({__name:"Submission",setup(e){const i=$(!1),u=["submit","checked","awarded"],l=["#8b13e7","#13e7c0","#136fe7"],o=v([]);function r(){var n;let t=(n=F("./task"))==null?void 0:n.toString();if(t==null)return;let a=T(t);console.log(a),a.forEach(c=>{o.push({title:c.title,date:c.date,message:c.message,status:0,file:c.file,link:c.link})})}r();function f(t){i.value==!0&&(t.message==""||t.title==""||t.file_list.length<1)&&alert("Nothing to submit! The form should be completed!"),i.value=!i.value,console.log(i.value,t)}return(t,a)=>(d(),m("div",L,[O,I(W,{is_submit_form_show:i.value,onSubmit:f},null,8,["is_submit_form_show"]),s("ul",P,[(d(!0),m(M,null,C(o,n=>(d(),m("li",{class:"submission-item",key:n.date},[s("div",q,[s("a",{class:"submission-title",target:"_blank",href:n.link},p(n.title),9,G),s("div",R,[s("div",X,p(n.date),1),s("div",{class:"submission-status",style:D({backgroundColor:l[n.status]})},p(u[n.status]),5)])]),s("div",A,p(n.message),1)]))),128))])]))}}),Q=S(J,[["__scopeId","data-v-86000557"]]);export{Q as default};
