import{d as F,g,r as P,o as f,c as v,b as e,F as B,k as E,t as b,l as j,a as q,p as V,f as J,_ as W,D as z,m as O,u as R,j as G,e as H,q as K}from"./index-Cgh6yWP9.js";import{h as d}from"./moment-C5S46NFB.js";const Q=o=>(V("data-v-6d92f02f"),o=o(),J(),o),U={class:"submission-chart"},X={class:"calendar"},Z=Q(()=>e("div",{class:"weeks"},[e("div",{class:"week"},"Mon"),e("div",{class:"week"},"Wed"),e("div",{class:"week"},"Fri")],-1)),ee={class:"title"},te=q('<div class="operation" data-v-6d92f02f><div class="slider" data-v-6d92f02f><div class="slider-desc" data-v-6d92f02f>0</div><div style="width:120px;" data-v-6d92f02f></div><div class="slider-desc" data-v-6d92f02f>12+</div></div><div class="legend" data-v-6d92f02f><div class="level-desc" data-v-6d92f02f>less</div><div class="level level-1" data-v-6d92f02f></div><div class="level level-2" data-v-6d92f02f></div><div class="level level-3" data-v-6d92f02f></div><div class="level level-4" data-v-6d92f02f></div><div class="level level-5" data-v-6d92f02f></div><div class="level-desc" data-v-6d92f02f>more</div></div></div>',1),se=F({__name:"SubmissionChart",props:["task_list","profile"],setup(o){const k=o,l=g([]),t=g([]),p=P([0,12]),y=["Jul","Aug","Sep","Oct","Nov","Dec","Jan","Feb","Mar","Apr","May","Jun","Jul"];function r(){let s=parseInt(d().format("YYYY"))-1+"-"+d().format("MM-DD"),n=d(s).format("YYYY-MM-DD"),c=d(n).weekday()||7,u=c>1?d(n).add(8-c,"days").format("YYYY-MM-DD"):n,_=d().diff(d(u),"days")+1,h=7,Y=Math.ceil(_/h),T=p.value[0],S=p.value[1];for(let a=0;a<Y;a++){let w=a===Y-1&&_%h?_%h:h,I=d(u).add(a*7,"days").format("M"),C=d(u).add(a*7+w,"days").format("M"),$=a===0?y[parseInt(I)-1]:"",N=!1;parseInt(C)-parseInt(I)&&(N=!0),a&&l[a-1].ifSwitchMonth&&($=y[parseInt(C)-1]),l.push({columns:w,title:$,ifSwitchMonth:N,data:[]});for(let M=0;M<l[a].columns;M++){let m=d(u).add(a*7+M,"days").format("YYYY-MM-DD"),x=0;(t[m]>=T&&t[m]<S||t[m]>12&&S===12)&&(x=t[m]),l[a].data.push({number:x,date:m})}}}function D(){let i=k.task_list;for(let s of i)l.forEach(n=>{for(let c of n.data)c.date.slice(2,c.date.length)==d(s.date).format("YY-MM-DD")&&c.number++})}function L(i){let s="#EBEDF0";return i>=12?s="#196127":i>=8?s="#239A3B":i>=4?s="#7BC96F":i>=1?s="#C6E48B":s="#EBEDF0",s}return r(),D(),(i,s)=>(f(),v("div",U,[e("div",X,[Z,(f(!0),v(B,null,E(l,(n,c)=>(f(),v("div",{class:"column",key:c},[e("div",ee,b(n.title),1),(f(!0),v(B,null,E(n.data,(u,_)=>(f(),v("div",{class:"date-wrapper",key:_,style:j(`background:${L(u.number)};`)},null,4))),128))]))),128))]),te]))}}),ae=W(se,[["__scopeId","data-v-6d92f02f"]]),A=o=>(V("data-v-bdc79adb"),o=o(),J(),o),de={class:"profile"},oe=A(()=>e("h2",null,"Profile",-1)),le={class:"profile-info"},ie={class:"profile-info-message"},ne={class:"profile-info-message"},ce=A(()=>e("textarea",{class:"profile-sticky-node",rows:"3",placeholder:"Mood Post-it notes, post daily mood"},null,-1)),re={key:0,class:"contribute"},fe=F({__name:"Profile",setup(o){const{proxy:k}=K(),l=new z,t=g([]);let p=P(0);O(()=>{k.$loading.show(),l.findList("postgraduate-task","tasks").then(r=>{t.splice(0,t.length),r&&t.push(...r)}).finally(()=>{k.$loading.hide()}),l.count("postgraduate-task","tasks",{date:{$gt:new Date(new Date().toLocaleDateString())}}).then(r=>{p.value=r})});function y(){alert("stay tuned to be expected")}return(r,D)=>(f(),v("div",de,[oe,e("section",le,[e("p",ie,"total finished tasks numberï¼š"+b(t.length),1),e("p",ne,"today finished tasks number: "+b(R(p)),1)]),e("section",{class:"profile-sticky-container"},[e("button",{class:"profile-sticky-button",onClick:y},"Snuggle"),ce]),t.length>0?(f(),v("section",re,[G(ae,{task_list:t},null,8,["task_list"])])):H("",!0)]))}}),pe=W(fe,[["__scopeId","data-v-bdc79adb"]]);export{pe as default};
