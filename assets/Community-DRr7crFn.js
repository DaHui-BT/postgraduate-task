import{d as b,g as f,u as g,D as k,r as D,o as u,c as r,b as t,F as w,e as v,t as a,f as h,h as C,w as Y,i as x,p as M,j as S,_ as $}from"./index-C2CfGSL5.js";import{h as m,P as I}from"./PTButton-pXsdmKSD.js";const e=n=>(M("data-v-5d43e7e6"),n=n(),S(),n),T={class:"community"},B=e(()=>t("h2",{class:"community"},"Community",-1)),F={class:"community-user-container"},H={class:"community-user-table"},q={class:"community-user-table-info"},E=e(()=>t("td",{class:"community-user-table-title"},"Username",-1)),L=e(()=>t("td",{class:"community-user-table-title"},"Email",-1)),N={class:"community-user-table-date"},R=e(()=>t("td",{class:"community-user-table-title"},"Register Date",-1)),V=e(()=>t("td",{class:"community-user-table-title"},"Lastest Submit Date",-1)),P={class:"community-user-table-status"},j=e(()=>t("td",{class:"community-user-table-title"},"Total Finishing Tasks",-1)),U=e(()=>t("td",{class:"community-user-table-title"},"Today Finishing Tasks",-1)),z={class:"community-user-table-describe"},A=e(()=>t("td",{class:"community-user-table-title"},"Describe",-1)),G={colspan:"3"},J=b({__name:"Community",setup(n){var _;const c=(_=f())==null?void 0:_.proxy;if(c==null||c==null)throw Error("Server, please try later");const y=g(),d=new k,l=D([]);c.$loading.show(),d.findList("postgraduate-task","user").then(async i=>{if(l.splice(0,l.length),i)for(let o of i)await d.count("postgraduate-task","submission",{user_id:{$eq:o._id}}).then(s=>{o.total_finish_task_num=s}),await d.count("postgraduate-task","submission",{date:{$gte:new Date(m().format("YYYY-MM-DD"))},user_id:{$eq:o._id}}).then(s=>{o.today_finish_task_num=s}),l.push(o)}).finally(()=>{c.$loading.hide()});function p(i){y.push({path:"/submission",query:{_id:i}})}return(i,o)=>(u(),r("div",T,[B,t("div",F,[(u(!0),r(w,null,v(l,s=>(u(),r("div",{class:"community-user-item",key:s._id},[t("table",H,[t("tr",q,[E,t("td",null,a(s.username),1),L,t("td",null,a(s.email),1)]),t("tr",N,[R,t("td",null,a(h(m)(s.register_date).format("YY-MM-DD HH:mm:ss")),1),V,t("td",null,a(h(m)(s.update_date).format("YY-MM-DD HH:mm:ss")),1)]),t("tr",P,[j,t("td",null,a(s.total_finish_task_num),1),U,t("td",null,a(s.today_finish_task_num),1)]),t("tr",z,[A,t("td",G,a(s.describe),1)])]),C(I,{class:"community-user-table-button",width:"100%",onClick:K=>p(s._id)},{default:Y(()=>[x("Read More")]),_:2},1032,["onClick"])]))),128))])]))}}),W=$(J,[["__scopeId","data-v-5d43e7e6"]]);export{W as default};
