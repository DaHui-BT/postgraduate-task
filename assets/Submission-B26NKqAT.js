var Xn=Object.defineProperty;var Qn=(t,e,r)=>e in t?Xn(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var ht=(t,e,r)=>Qn(t,typeof e!="symbol"?e+"":e,r);import{d as pr,o as fn,r as pt,c as ye,a as ue,w as Or,v as Tr,b as dt,e as le,p as dr,f as gr,_ as Ct,g as Ir,h as Ur,i as ei,F as zt,j as Gt,k as Et,t as De,u as ti,n as ri,l as Br}from"./index-0eloqbrT.js";function ni(t,e){return e={exports:{}},t(e,e.exports),e.exports}var ii=ui,oi=hi,si=di,Ce=[],_e=[],ai=typeof Uint8Array<"u"?Uint8Array:Array,Yt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Qe=0,fi=Yt.length;Qe<fi;++Qe)Ce[Qe]=Yt[Qe],_e[Yt.charCodeAt(Qe)]=Qe;_e[45]=62;_e[95]=63;function un(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");r===-1&&(r=e);var n=r===e?0:4-r%4;return[r,n]}function ui(t){var e=un(t),r=e[0],n=e[1];return(r+n)*3/4-n}function ci(t,e,r){return(e+r)*3/4-r}function hi(t){var e,r=un(t),n=r[0],i=r[1],o=new ai(ci(t,n,i)),s=0,u=i>0?n-4:n,y;for(y=0;y<u;y+=4)e=_e[t.charCodeAt(y)]<<18|_e[t.charCodeAt(y+1)]<<12|_e[t.charCodeAt(y+2)]<<6|_e[t.charCodeAt(y+3)],o[s++]=e>>16&255,o[s++]=e>>8&255,o[s++]=e&255;return i===2&&(e=_e[t.charCodeAt(y)]<<2|_e[t.charCodeAt(y+1)]>>4,o[s++]=e&255),i===1&&(e=_e[t.charCodeAt(y)]<<10|_e[t.charCodeAt(y+1)]<<4|_e[t.charCodeAt(y+2)]>>2,o[s++]=e>>8&255,o[s++]=e&255),o}function li(t){return Ce[t>>18&63]+Ce[t>>12&63]+Ce[t>>6&63]+Ce[t&63]}function pi(t,e,r){for(var n,i=[],o=e;o<r;o+=3)n=(t[o]<<16&16711680)+(t[o+1]<<8&65280)+(t[o+2]&255),i.push(li(n));return i.join("")}function di(t){for(var e,r=t.length,n=r%3,i=[],o=16383,s=0,u=r-n;s<u;s+=o)i.push(pi(t,s,s+o>u?u:s+o));return n===1?(e=t[r-1],i.push(Ce[e>>2]+Ce[e<<4&63]+"==")):n===2&&(e=(t[r-2]<<8)+t[r-1],i.push(Ce[e>>10]+Ce[e>>4&63]+Ce[e<<2&63]+"=")),i.join("")}var Zt={byteLength:ii,toByteArray:oi,fromByteArray:si};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var gi=function(e,r,n,i,o){var s,u,y=o*8-i-1,E=(1<<y)-1,c=E>>1,l=-7,h=n?o-1:0,p=n?-1:1,b=e[r+h];for(h+=p,s=b&(1<<-l)-1,b>>=-l,l+=y;l>0;s=s*256+e[r+h],h+=p,l-=8);for(u=s&(1<<-l)-1,s>>=-l,l+=i;l>0;u=u*256+e[r+h],h+=p,l-=8);if(s===0)s=1-c;else{if(s===E)return u?NaN:(b?-1:1)*(1/0);u=u+Math.pow(2,i),s=s-c}return(b?-1:1)*u*Math.pow(2,s-i)},yi=function(e,r,n,i,o,s){var u,y,E,c=s*8-o-1,l=(1<<c)-1,h=l>>1,p=o===23?Math.pow(2,-24)-Math.pow(2,-77):0,b=i?0:s-1,O=i?1:-1,k=r<0||r===0&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(y=isNaN(r)?1:0,u=l):(u=Math.floor(Math.log(r)/Math.LN2),r*(E=Math.pow(2,-u))<1&&(u--,E*=2),u+h>=1?r+=p/E:r+=p*Math.pow(2,1-h),r*E>=2&&(u++,E/=2),u+h>=l?(y=0,u=l):u+h>=1?(y=(r*E-1)*Math.pow(2,o),u=u+h):(y=r*Math.pow(2,h-1)*Math.pow(2,o),u=0));o>=8;e[n+b]=y&255,b+=O,y/=256,o-=8);for(u=u<<o|y,c+=o;c>0;e[n+b]=u&255,b+=O,u/=256,c-=8);e[n+b-O]|=k*128},et={read:gi,write:yi},Mt=ni(function(t,e){var r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=s,e.SlowBuffer=S,e.INSPECT_MAX_BYTES=50;var n=2147483647;e.kMaxLength=n,s.TYPED_ARRAY_SUPPORT=i(),!s.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function i(){try{var d=new Uint8Array(1),a={foo:function(){return 42}};return Object.setPrototypeOf(a,Uint8Array.prototype),Object.setPrototypeOf(d,a),d.foo()===42}catch{return!1}}Object.defineProperty(s.prototype,"parent",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.buffer}}),Object.defineProperty(s.prototype,"offset",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.byteOffset}});function o(d){if(d>n)throw new RangeError('The value "'+d+'" is invalid for option "size"');var a=new Uint8Array(d);return Object.setPrototypeOf(a,s.prototype),a}function s(d,a,f){if(typeof d=="number"){if(typeof a=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return c(d)}return u(d,a,f)}s.poolSize=8192;function u(d,a,f){if(typeof d=="string")return l(d,a);if(ArrayBuffer.isView(d))return p(d);if(d==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+babelHelpers.typeof(d));if(ne(d,ArrayBuffer)||d&&ne(d.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(ne(d,SharedArrayBuffer)||d&&ne(d.buffer,SharedArrayBuffer)))return b(d,a,f);if(typeof d=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var m=d.valueOf&&d.valueOf();if(m!=null&&m!==d)return s.from(m,a,f);var I=O(d);if(I)return I;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof d[Symbol.toPrimitive]=="function")return s.from(d[Symbol.toPrimitive]("string"),a,f);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+babelHelpers.typeof(d))}s.from=function(d,a,f){return u(d,a,f)},Object.setPrototypeOf(s.prototype,Uint8Array.prototype),Object.setPrototypeOf(s,Uint8Array);function y(d){if(typeof d!="number")throw new TypeError('"size" argument must be of type number');if(d<0)throw new RangeError('The value "'+d+'" is invalid for option "size"')}function E(d,a,f){return y(d),d<=0?o(d):a!==void 0?typeof f=="string"?o(d).fill(a,f):o(d).fill(a):o(d)}s.alloc=function(d,a,f){return E(d,a,f)};function c(d){return y(d),o(d<0?0:k(d)|0)}s.allocUnsafe=function(d){return c(d)},s.allocUnsafeSlow=function(d){return c(d)};function l(d,a){if((typeof a!="string"||a==="")&&(a="utf8"),!s.isEncoding(a))throw new TypeError("Unknown encoding: "+a);var f=L(d,a)|0,m=o(f),I=m.write(d,a);return I!==f&&(m=m.slice(0,I)),m}function h(d){for(var a=d.length<0?0:k(d.length)|0,f=o(a),m=0;m<a;m+=1)f[m]=d[m]&255;return f}function p(d){if(ne(d,Uint8Array)){var a=new Uint8Array(d);return b(a.buffer,a.byteOffset,a.byteLength)}return h(d)}function b(d,a,f){if(a<0||d.byteLength<a)throw new RangeError('"offset" is outside of buffer bounds');if(d.byteLength<a+(f||0))throw new RangeError('"length" is outside of buffer bounds');var m;return a===void 0&&f===void 0?m=new Uint8Array(d):f===void 0?m=new Uint8Array(d,a):m=new Uint8Array(d,a,f),Object.setPrototypeOf(m,s.prototype),m}function O(d){if(s.isBuffer(d)){var a=k(d.length)|0,f=o(a);return f.length===0||d.copy(f,0,0,a),f}if(d.length!==void 0)return typeof d.length!="number"||Ne(d.length)?o(0):h(d);if(d.type==="Buffer"&&Array.isArray(d.data))return h(d.data)}function k(d){if(d>=n)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n.toString(16)+" bytes");return d|0}function S(d){return+d!=d&&(d=0),s.alloc(+d)}s.isBuffer=function(a){return a!=null&&a._isBuffer===!0&&a!==s.prototype},s.compare=function(a,f){if(ne(a,Uint8Array)&&(a=s.from(a,a.offset,a.byteLength)),ne(f,Uint8Array)&&(f=s.from(f,f.offset,f.byteLength)),!s.isBuffer(a)||!s.isBuffer(f))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(a===f)return 0;for(var m=a.length,I=f.length,W=0,V=Math.min(m,I);W<V;++W)if(a[W]!==f[W]){m=a[W],I=f[W];break}return m<I?-1:I<m?1:0},s.isEncoding=function(a){switch(String(a).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(a,f){if(!Array.isArray(a))throw new TypeError('"list" argument must be an Array of Buffers');if(a.length===0)return s.alloc(0);var m;if(f===void 0)for(f=0,m=0;m<a.length;++m)f+=a[m].length;var I=s.allocUnsafe(f),W=0;for(m=0;m<a.length;++m){var V=a[m];if(ne(V,Uint8Array))W+V.length>I.length?s.from(V).copy(I,W):Uint8Array.prototype.set.call(I,V,W);else if(s.isBuffer(V))V.copy(I,W);else throw new TypeError('"list" argument must be an Array of Buffers');W+=V.length}return I};function L(d,a){if(s.isBuffer(d))return d.length;if(ArrayBuffer.isView(d)||ne(d,ArrayBuffer))return d.byteLength;if(typeof d!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+babelHelpers.typeof(d));var f=d.length,m=arguments.length>2&&arguments[2]===!0;if(!m&&f===0)return 0;for(var I=!1;;)switch(a){case"ascii":case"latin1":case"binary":return f;case"utf8":case"utf-8":return se(d).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return f*2;case"hex":return f>>>1;case"base64":return ae(d).length;default:if(I)return m?-1:se(d).length;a=(""+a).toLowerCase(),I=!0}}s.byteLength=L;function D(d,a,f){var m=!1;if((a===void 0||a<0)&&(a=0),a>this.length||((f===void 0||f>this.length)&&(f=this.length),f<=0)||(f>>>=0,a>>>=0,f<=a))return"";for(d||(d="utf8");;)switch(d){case"hex":return j(this,a,f);case"utf8":case"utf-8":return F(this,a,f);case"ascii":return x(this,a,f);case"latin1":case"binary":return g(this,a,f);case"base64":return U(this,a,f);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return B(this,a,f);default:if(m)throw new TypeError("Unknown encoding: "+d);d=(d+"").toLowerCase(),m=!0}}s.prototype._isBuffer=!0;function A(d,a,f){var m=d[a];d[a]=d[f],d[f]=m}s.prototype.swap16=function(){var a=this.length;if(a%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var f=0;f<a;f+=2)A(this,f,f+1);return this},s.prototype.swap32=function(){var a=this.length;if(a%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var f=0;f<a;f+=4)A(this,f,f+3),A(this,f+1,f+2);return this},s.prototype.swap64=function(){var a=this.length;if(a%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var f=0;f<a;f+=8)A(this,f,f+7),A(this,f+1,f+6),A(this,f+2,f+5),A(this,f+3,f+4);return this},s.prototype.toString=function(){var a=this.length;return a===0?"":arguments.length===0?F(this,0,a):D.apply(this,arguments)},s.prototype.toLocaleString=s.prototype.toString,s.prototype.equals=function(a){if(!s.isBuffer(a))throw new TypeError("Argument must be a Buffer");return this===a?!0:s.compare(this,a)===0},s.prototype.inspect=function(){var a="",f=e.INSPECT_MAX_BYTES;return a=this.toString("hex",0,f).replace(/(.{2})/g,"$1 ").trim(),this.length>f&&(a+=" ... "),"<Buffer "+a+">"},r&&(s.prototype[r]=s.prototype.inspect),s.prototype.compare=function(a,f,m,I,W){if(ne(a,Uint8Array)&&(a=s.from(a,a.offset,a.byteLength)),!s.isBuffer(a))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+babelHelpers.typeof(a));if(f===void 0&&(f=0),m===void 0&&(m=a?a.length:0),I===void 0&&(I=0),W===void 0&&(W=this.length),f<0||m>a.length||I<0||W>this.length)throw new RangeError("out of range index");if(I>=W&&f>=m)return 0;if(I>=W)return-1;if(f>=m)return 1;if(f>>>=0,m>>>=0,I>>>=0,W>>>=0,this===a)return 0;for(var V=W-I,X=m-f,K=Math.min(V,X),q=this.slice(I,W),ie=a.slice(f,m),te=0;te<K;++te)if(q[te]!==ie[te]){V=q[te],X=ie[te];break}return V<X?-1:X<V?1:0};function H(d,a,f,m,I){if(d.length===0)return-1;if(typeof f=="string"?(m=f,f=0):f>2147483647?f=2147483647:f<-2147483648&&(f=-2147483648),f=+f,Ne(f)&&(f=I?0:d.length-1),f<0&&(f=d.length+f),f>=d.length){if(I)return-1;f=d.length-1}else if(f<0)if(I)f=0;else return-1;if(typeof a=="string"&&(a=s.from(a,m)),s.isBuffer(a))return a.length===0?-1:_(d,a,f,m,I);if(typeof a=="number")return a=a&255,typeof Uint8Array.prototype.indexOf=="function"?I?Uint8Array.prototype.indexOf.call(d,a,f):Uint8Array.prototype.lastIndexOf.call(d,a,f):_(d,[a],f,m,I);throw new TypeError("val must be string, number or Buffer")}function _(d,a,f,m,I){var W=1,V=d.length,X=a.length;if(m!==void 0&&(m=String(m).toLowerCase(),m==="ucs2"||m==="ucs-2"||m==="utf16le"||m==="utf-16le")){if(d.length<2||a.length<2)return-1;W=2,V/=2,X/=2,f/=2}function K(he,Be){return W===1?he[Be]:he.readUInt16BE(Be*W)}var q;if(I){var ie=-1;for(q=f;q<V;q++)if(K(d,q)===K(a,ie===-1?0:q-ie)){if(ie===-1&&(ie=q),q-ie+1===X)return ie*W}else ie!==-1&&(q-=q-ie),ie=-1}else for(f+X>V&&(f=V-X),q=f;q>=0;q--){for(var te=!0,Me=0;Me<X;Me++)if(K(d,q+Me)!==K(a,Me)){te=!1;break}if(te)return q}return-1}s.prototype.includes=function(a,f,m){return this.indexOf(a,f,m)!==-1},s.prototype.indexOf=function(a,f,m){return H(this,a,f,m,!0)},s.prototype.lastIndexOf=function(a,f,m){return H(this,a,f,m,!1)};function P(d,a,f,m){f=Number(f)||0;var I=d.length-f;m?(m=Number(m),m>I&&(m=I)):m=I;var W=a.length;m>W/2&&(m=W/2);for(var V=0;V<m;++V){var X=parseInt(a.substr(V*2,2),16);if(Ne(X))return V;d[f+V]=X}return V}function v(d,a,f,m){return fe(se(a,d.length-f),d,f,m)}function w(d,a,f,m){return fe(oe(a),d,f,m)}function T(d,a,f,m){return fe(ae(a),d,f,m)}function R(d,a,f,m){return fe(ee(a,d.length-f),d,f,m)}s.prototype.write=function(a,f,m,I){if(f===void 0)I="utf8",m=this.length,f=0;else if(m===void 0&&typeof f=="string")I=f,m=this.length,f=0;else if(isFinite(f))f=f>>>0,isFinite(m)?(m=m>>>0,I===void 0&&(I="utf8")):(I=m,m=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var W=this.length-f;if((m===void 0||m>W)&&(m=W),a.length>0&&(m<0||f<0)||f>this.length)throw new RangeError("Attempt to write outside buffer bounds");I||(I="utf8");for(var V=!1;;)switch(I){case"hex":return P(this,a,f,m);case"utf8":case"utf-8":return v(this,a,f,m);case"ascii":case"latin1":case"binary":return w(this,a,f,m);case"base64":return T(this,a,f,m);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return R(this,a,f,m);default:if(V)throw new TypeError("Unknown encoding: "+I);I=(""+I).toLowerCase(),V=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function U(d,a,f){return a===0&&f===d.length?Zt.fromByteArray(d):Zt.fromByteArray(d.slice(a,f))}function F(d,a,f){f=Math.min(d.length,f);for(var m=[],I=a;I<f;){var W=d[I],V=null,X=W>239?4:W>223?3:W>191?2:1;if(I+X<=f){var K,q,ie,te;switch(X){case 1:W<128&&(V=W);break;case 2:K=d[I+1],(K&192)===128&&(te=(W&31)<<6|K&63,te>127&&(V=te));break;case 3:K=d[I+1],q=d[I+2],(K&192)===128&&(q&192)===128&&(te=(W&15)<<12|(K&63)<<6|q&63,te>2047&&(te<55296||te>57343)&&(V=te));break;case 4:K=d[I+1],q=d[I+2],ie=d[I+3],(K&192)===128&&(q&192)===128&&(ie&192)===128&&(te=(W&15)<<18|(K&63)<<12|(q&63)<<6|ie&63,te>65535&&te<1114112&&(V=te))}}V===null?(V=65533,X=1):V>65535&&(V-=65536,m.push(V>>>10&1023|55296),V=56320|V&1023),m.push(V),I+=X}return C(m)}var N=4096;function C(d){var a=d.length;if(a<=N)return String.fromCharCode.apply(String,d);for(var f="",m=0;m<a;)f+=String.fromCharCode.apply(String,d.slice(m,m+=N));return f}function x(d,a,f){var m="";f=Math.min(d.length,f);for(var I=a;I<f;++I)m+=String.fromCharCode(d[I]&127);return m}function g(d,a,f){var m="";f=Math.min(d.length,f);for(var I=a;I<f;++I)m+=String.fromCharCode(d[I]);return m}function j(d,a,f){var m=d.length;(!a||a<0)&&(a=0),(!f||f<0||f>m)&&(f=m);for(var I="",W=a;W<f;++W)I+=ve[d[W]];return I}function B(d,a,f){for(var m=d.slice(a,f),I="",W=0;W<m.length-1;W+=2)I+=String.fromCharCode(m[W]+m[W+1]*256);return I}s.prototype.slice=function(a,f){var m=this.length;a=~~a,f=f===void 0?m:~~f,a<0?(a+=m,a<0&&(a=0)):a>m&&(a=m),f<0?(f+=m,f<0&&(f=0)):f>m&&(f=m),f<a&&(f=a);var I=this.subarray(a,f);return Object.setPrototypeOf(I,s.prototype),I};function M(d,a,f){if(d%1!==0||d<0)throw new RangeError("offset is not uint");if(d+a>f)throw new RangeError("Trying to access beyond buffer length")}s.prototype.readUintLE=s.prototype.readUIntLE=function(a,f,m){a=a>>>0,f=f>>>0,m||M(a,f,this.length);for(var I=this[a],W=1,V=0;++V<f&&(W*=256);)I+=this[a+V]*W;return I},s.prototype.readUintBE=s.prototype.readUIntBE=function(a,f,m){a=a>>>0,f=f>>>0,m||M(a,f,this.length);for(var I=this[a+--f],W=1;f>0&&(W*=256);)I+=this[a+--f]*W;return I},s.prototype.readUint8=s.prototype.readUInt8=function(a,f){return a=a>>>0,f||M(a,1,this.length),this[a]},s.prototype.readUint16LE=s.prototype.readUInt16LE=function(a,f){return a=a>>>0,f||M(a,2,this.length),this[a]|this[a+1]<<8},s.prototype.readUint16BE=s.prototype.readUInt16BE=function(a,f){return a=a>>>0,f||M(a,2,this.length),this[a]<<8|this[a+1]},s.prototype.readUint32LE=s.prototype.readUInt32LE=function(a,f){return a=a>>>0,f||M(a,4,this.length),(this[a]|this[a+1]<<8|this[a+2]<<16)+this[a+3]*16777216},s.prototype.readUint32BE=s.prototype.readUInt32BE=function(a,f){return a=a>>>0,f||M(a,4,this.length),this[a]*16777216+(this[a+1]<<16|this[a+2]<<8|this[a+3])},s.prototype.readIntLE=function(a,f,m){a=a>>>0,f=f>>>0,m||M(a,f,this.length);for(var I=this[a],W=1,V=0;++V<f&&(W*=256);)I+=this[a+V]*W;return W*=128,I>=W&&(I-=Math.pow(2,8*f)),I},s.prototype.readIntBE=function(a,f,m){a=a>>>0,f=f>>>0,m||M(a,f,this.length);for(var I=f,W=1,V=this[a+--I];I>0&&(W*=256);)V+=this[a+--I]*W;return W*=128,V>=W&&(V-=Math.pow(2,8*f)),V},s.prototype.readInt8=function(a,f){return a=a>>>0,f||M(a,1,this.length),this[a]&128?(255-this[a]+1)*-1:this[a]},s.prototype.readInt16LE=function(a,f){a=a>>>0,f||M(a,2,this.length);var m=this[a]|this[a+1]<<8;return m&32768?m|4294901760:m},s.prototype.readInt16BE=function(a,f){a=a>>>0,f||M(a,2,this.length);var m=this[a+1]|this[a]<<8;return m&32768?m|4294901760:m},s.prototype.readInt32LE=function(a,f){return a=a>>>0,f||M(a,4,this.length),this[a]|this[a+1]<<8|this[a+2]<<16|this[a+3]<<24},s.prototype.readInt32BE=function(a,f){return a=a>>>0,f||M(a,4,this.length),this[a]<<24|this[a+1]<<16|this[a+2]<<8|this[a+3]},s.prototype.readFloatLE=function(a,f){return a=a>>>0,f||M(a,4,this.length),et.read(this,a,!0,23,4)},s.prototype.readFloatBE=function(a,f){return a=a>>>0,f||M(a,4,this.length),et.read(this,a,!1,23,4)},s.prototype.readDoubleLE=function(a,f){return a=a>>>0,f||M(a,8,this.length),et.read(this,a,!0,52,8)},s.prototype.readDoubleBE=function(a,f){return a=a>>>0,f||M(a,8,this.length),et.read(this,a,!1,52,8)};function G(d,a,f,m,I,W){if(!s.isBuffer(d))throw new TypeError('"buffer" argument must be a Buffer instance');if(a>I||a<W)throw new RangeError('"value" argument is out of bounds');if(f+m>d.length)throw new RangeError("Index out of range")}s.prototype.writeUintLE=s.prototype.writeUIntLE=function(a,f,m,I){if(a=+a,f=f>>>0,m=m>>>0,!I){var W=Math.pow(2,8*m)-1;G(this,a,f,m,W,0)}var V=1,X=0;for(this[f]=a&255;++X<m&&(V*=256);)this[f+X]=a/V&255;return f+m},s.prototype.writeUintBE=s.prototype.writeUIntBE=function(a,f,m,I){if(a=+a,f=f>>>0,m=m>>>0,!I){var W=Math.pow(2,8*m)-1;G(this,a,f,m,W,0)}var V=m-1,X=1;for(this[f+V]=a&255;--V>=0&&(X*=256);)this[f+V]=a/X&255;return f+m},s.prototype.writeUint8=s.prototype.writeUInt8=function(a,f,m){return a=+a,f=f>>>0,m||G(this,a,f,1,255,0),this[f]=a&255,f+1},s.prototype.writeUint16LE=s.prototype.writeUInt16LE=function(a,f,m){return a=+a,f=f>>>0,m||G(this,a,f,2,65535,0),this[f]=a&255,this[f+1]=a>>>8,f+2},s.prototype.writeUint16BE=s.prototype.writeUInt16BE=function(a,f,m){return a=+a,f=f>>>0,m||G(this,a,f,2,65535,0),this[f]=a>>>8,this[f+1]=a&255,f+2},s.prototype.writeUint32LE=s.prototype.writeUInt32LE=function(a,f,m){return a=+a,f=f>>>0,m||G(this,a,f,4,4294967295,0),this[f+3]=a>>>24,this[f+2]=a>>>16,this[f+1]=a>>>8,this[f]=a&255,f+4},s.prototype.writeUint32BE=s.prototype.writeUInt32BE=function(a,f,m){return a=+a,f=f>>>0,m||G(this,a,f,4,4294967295,0),this[f]=a>>>24,this[f+1]=a>>>16,this[f+2]=a>>>8,this[f+3]=a&255,f+4},s.prototype.writeIntLE=function(a,f,m,I){if(a=+a,f=f>>>0,!I){var W=Math.pow(2,8*m-1);G(this,a,f,m,W-1,-W)}var V=0,X=1,K=0;for(this[f]=a&255;++V<m&&(X*=256);)a<0&&K===0&&this[f+V-1]!==0&&(K=1),this[f+V]=(a/X>>0)-K&255;return f+m},s.prototype.writeIntBE=function(a,f,m,I){if(a=+a,f=f>>>0,!I){var W=Math.pow(2,8*m-1);G(this,a,f,m,W-1,-W)}var V=m-1,X=1,K=0;for(this[f+V]=a&255;--V>=0&&(X*=256);)a<0&&K===0&&this[f+V+1]!==0&&(K=1),this[f+V]=(a/X>>0)-K&255;return f+m},s.prototype.writeInt8=function(a,f,m){return a=+a,f=f>>>0,m||G(this,a,f,1,127,-128),a<0&&(a=255+a+1),this[f]=a&255,f+1},s.prototype.writeInt16LE=function(a,f,m){return a=+a,f=f>>>0,m||G(this,a,f,2,32767,-32768),this[f]=a&255,this[f+1]=a>>>8,f+2},s.prototype.writeInt16BE=function(a,f,m){return a=+a,f=f>>>0,m||G(this,a,f,2,32767,-32768),this[f]=a>>>8,this[f+1]=a&255,f+2},s.prototype.writeInt32LE=function(a,f,m){return a=+a,f=f>>>0,m||G(this,a,f,4,2147483647,-2147483648),this[f]=a&255,this[f+1]=a>>>8,this[f+2]=a>>>16,this[f+3]=a>>>24,f+4},s.prototype.writeInt32BE=function(a,f,m){return a=+a,f=f>>>0,m||G(this,a,f,4,2147483647,-2147483648),a<0&&(a=4294967295+a+1),this[f]=a>>>24,this[f+1]=a>>>16,this[f+2]=a>>>8,this[f+3]=a&255,f+4};function z(d,a,f,m,I,W){if(f+m>d.length)throw new RangeError("Index out of range");if(f<0)throw new RangeError("Index out of range")}function Y(d,a,f,m,I){return a=+a,f=f>>>0,I||z(d,a,f,4),et.write(d,a,f,m,23,4),f+4}s.prototype.writeFloatLE=function(a,f,m){return Y(this,a,f,!0,m)},s.prototype.writeFloatBE=function(a,f,m){return Y(this,a,f,!1,m)};function J(d,a,f,m,I){return a=+a,f=f>>>0,I||z(d,a,f,8),et.write(d,a,f,m,52,8),f+8}s.prototype.writeDoubleLE=function(a,f,m){return J(this,a,f,!0,m)},s.prototype.writeDoubleBE=function(a,f,m){return J(this,a,f,!1,m)},s.prototype.copy=function(a,f,m,I){if(!s.isBuffer(a))throw new TypeError("argument should be a Buffer");if(m||(m=0),!I&&I!==0&&(I=this.length),f>=a.length&&(f=a.length),f||(f=0),I>0&&I<m&&(I=m),I===m||a.length===0||this.length===0)return 0;if(f<0)throw new RangeError("targetStart out of bounds");if(m<0||m>=this.length)throw new RangeError("Index out of range");if(I<0)throw new RangeError("sourceEnd out of bounds");I>this.length&&(I=this.length),a.length-f<I-m&&(I=a.length-f+m);var W=I-m;return this===a&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(f,m,I):Uint8Array.prototype.set.call(a,this.subarray(m,I),f),W},s.prototype.fill=function(a,f,m,I){if(typeof a=="string"){if(typeof f=="string"?(I=f,f=0,m=this.length):typeof m=="string"&&(I=m,m=this.length),I!==void 0&&typeof I!="string")throw new TypeError("encoding must be a string");if(typeof I=="string"&&!s.isEncoding(I))throw new TypeError("Unknown encoding: "+I);if(a.length===1){var W=a.charCodeAt(0);(I==="utf8"&&W<128||I==="latin1")&&(a=W)}}else typeof a=="number"?a=a&255:typeof a=="boolean"&&(a=Number(a));if(f<0||this.length<f||this.length<m)throw new RangeError("Out of range index");if(m<=f)return this;f=f>>>0,m=m===void 0?this.length:m>>>0,a||(a=0);var V;if(typeof a=="number")for(V=f;V<m;++V)this[V]=a;else{var X=s.isBuffer(a)?a:s.from(a,I),K=X.length;if(K===0)throw new TypeError('The value "'+a+'" is invalid for argument "value"');for(V=0;V<m-f;++V)this[V+f]=X[V%K]}return this};var $=/[^+/0-9A-Za-z-_]/g;function Q(d){if(d=d.split("=")[0],d=d.trim().replace($,""),d.length<2)return"";for(;d.length%4!==0;)d=d+"=";return d}function se(d,a){a=a||1/0;for(var f,m=d.length,I=null,W=[],V=0;V<m;++V){if(f=d.charCodeAt(V),f>55295&&f<57344){if(!I){if(f>56319){(a-=3)>-1&&W.push(239,191,189);continue}else if(V+1===m){(a-=3)>-1&&W.push(239,191,189);continue}I=f;continue}if(f<56320){(a-=3)>-1&&W.push(239,191,189),I=f;continue}f=(I-55296<<10|f-56320)+65536}else I&&(a-=3)>-1&&W.push(239,191,189);if(I=null,f<128){if((a-=1)<0)break;W.push(f)}else if(f<2048){if((a-=2)<0)break;W.push(f>>6|192,f&63|128)}else if(f<65536){if((a-=3)<0)break;W.push(f>>12|224,f>>6&63|128,f&63|128)}else if(f<1114112){if((a-=4)<0)break;W.push(f>>18|240,f>>12&63|128,f>>6&63|128,f&63|128)}else throw new Error("Invalid code point")}return W}function oe(d){for(var a=[],f=0;f<d.length;++f)a.push(d.charCodeAt(f)&255);return a}function ee(d,a){for(var f,m,I,W=[],V=0;V<d.length&&!((a-=2)<0);++V)f=d.charCodeAt(V),m=f>>8,I=f%256,W.push(I),W.push(m);return W}function ae(d){return Zt.toByteArray(Q(d))}function fe(d,a,f,m){for(var I=0;I<m&&!(I+f>=a.length||I>=d.length);++I)a[I+f]=d[I];return I}function ne(d,a){return d instanceof a||d!=null&&d.constructor!=null&&d.constructor.name!=null&&d.constructor.name===a.name}function Ne(d){return d!==d}var ve=function(){for(var d="0123456789abcdef",a=new Array(256),f=0;f<16;++f)for(var m=f*16,I=0;I<16;++I)a[m+I]=d[f]+d[I];return a}()}),re=Mt.Buffer;Mt.SlowBuffer;Mt.INSPECT_MAX_BYTES;Mt.kMaxLength;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var sr=function(e,r){return sr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])},sr(e,r)};function Lt(t,e){sr(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var qe=function(t){Lt(e,t);function e(r){var n=t.call(this,r)||this;return Object.setPrototypeOf(n,e.prototype),n}return Object.defineProperty(e.prototype,"name",{get:function(){return"BSONError"},enumerable:!1,configurable:!0}),e}(Error),ce=function(t){Lt(e,t);function e(r){var n=t.call(this,r)||this;return Object.setPrototypeOf(n,e.prototype),n}return Object.defineProperty(e.prototype,"name",{get:function(){return"BSONTypeError"},enumerable:!1,configurable:!0}),e}(TypeError);function _t(t){return t&&t.Math==Math&&t}function cn(){return _t(typeof globalThis=="object"&&globalThis)||_t(typeof window=="object"&&window)||_t(typeof self=="object"&&self)||_t(typeof global=="object"&&global)||Function("return this")()}function mi(){var t=cn();return typeof t.navigator=="object"&&t.navigator.product==="ReactNative"}var wi=function(e){var r=mi()?"BSON: For React Native please polyfill crypto.getRandomValues, e.g. using: https://www.npmjs.com/package/react-native-get-random-values.":"BSON: No cryptographic implementation for random bytes present, falling back to a less secure implementation.";console.warn(r);for(var n=re.alloc(e),i=0;i<e;++i)n[i]=Math.floor(Math.random()*256);return n},bi=function(){{if(typeof window<"u"){var t=window.crypto||window.msCrypto;if(t&&t.getRandomValues)return function(e){return t.getRandomValues(re.alloc(e))}}return typeof global<"u"&&global.crypto&&global.crypto.getRandomValues?function(e){return global.crypto.getRandomValues(re.alloc(e))}:wi}},hn=bi();function vi(t){return["[object ArrayBuffer]","[object SharedArrayBuffer]"].includes(Object.prototype.toString.call(t))}function yr(t){return Object.prototype.toString.call(t)==="[object Uint8Array]"}function xi(t){return Object.prototype.toString.call(t)==="[object RegExp]"}function Ei(t){return vt(t)&&Object.prototype.toString.call(t)==="[object Date]"}function vt(t){return typeof t=="object"&&t!==null}function Dt(t,e){var r=!1;function n(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];return r||(console.warn(e),r=!0),t.apply(this,i)}return n}function Tt(t){if(ArrayBuffer.isView(t))return re.from(t.buffer,t.byteOffset,t.byteLength);if(vi(t))return re.from(t);throw new ce("Must use either Buffer or TypedArray")}var _i=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|[0-9a-f]{12}4[0-9a-f]{3}[89ab][0-9a-f]{15})$/i,ln=function(t){return typeof t=="string"&&_i.test(t)},ar=function(t){if(!ln(t))throw new ce('UUID string representations must be a 32 or 36 character hex string (dashes excluded/included). Format: "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx" or "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx".');var e=t.replace(/-/g,"");return re.from(e,"hex")},Rr=function(t,e){return e===void 0&&(e=!0),e?t.toString("hex",0,4)+"-"+t.toString("hex",4,6)+"-"+t.toString("hex",6,8)+"-"+t.toString("hex",8,10)+"-"+t.toString("hex",10,16):t.toString("hex")},Ai=Math.pow(2,53),Si=-Math.pow(2,53),pn=4,We=function(){function t(e,r){if(!(this instanceof t))return new t(e,r);if(e!=null&&typeof e!="string"&&!ArrayBuffer.isView(e)&&!(e instanceof ArrayBuffer)&&!Array.isArray(e))throw new ce("Binary can only be constructed from string, Buffer, TypedArray, or Array<number>");this.sub_type=r??t.BSON_BINARY_SUBTYPE_DEFAULT,e==null?(this.buffer=re.alloc(t.BUFFER_SIZE),this.position=0):(typeof e=="string"?this.buffer=re.from(e,"binary"):Array.isArray(e)?this.buffer=re.from(e):this.buffer=Tt(e),this.position=this.buffer.byteLength)}return t.prototype.put=function(e){if(typeof e=="string"&&e.length!==1)throw new ce("only accepts single character String");if(typeof e!="number"&&e.length!==1)throw new ce("only accepts single character Uint8Array or Array");var r;if(typeof e=="string"?r=e.charCodeAt(0):typeof e=="number"?r=e:r=e[0],r<0||r>255)throw new ce("only accepts number in a valid unsigned byte range 0-255");if(this.buffer.length>this.position)this.buffer[this.position++]=r;else{var n=re.alloc(t.BUFFER_SIZE+this.buffer.length);this.buffer.copy(n,0,0,this.buffer.length),this.buffer=n,this.buffer[this.position++]=r}},t.prototype.write=function(e,r){if(r=typeof r=="number"?r:this.position,this.buffer.length<r+e.length){var n=re.alloc(this.buffer.length+e.length);this.buffer.copy(n,0,0,this.buffer.length),this.buffer=n}ArrayBuffer.isView(e)?(this.buffer.set(Tt(e),r),this.position=r+e.byteLength>this.position?r+e.length:this.position):typeof e=="string"&&(this.buffer.write(e,r,e.length,"binary"),this.position=r+e.length>this.position?r+e.length:this.position)},t.prototype.read=function(e,r){return r=r&&r>0?r:this.position,this.buffer.slice(e,e+r)},t.prototype.value=function(e){return e=!!e,e&&this.buffer.length===this.position?this.buffer:e?this.buffer.slice(0,this.position):this.buffer.toString("binary",0,this.position)},t.prototype.length=function(){return this.position},t.prototype.toJSON=function(){return this.buffer.toString("base64")},t.prototype.toString=function(e){return this.buffer.toString(e)},t.prototype.toExtendedJSON=function(e){e=e||{};var r=this.buffer.toString("base64"),n=Number(this.sub_type).toString(16);return e.legacy?{$binary:r,$type:n.length===1?"0"+n:n}:{$binary:{base64:r,subType:n.length===1?"0"+n:n}}},t.prototype.toUUID=function(){if(this.sub_type===t.SUBTYPE_UUID)return new Fr(this.buffer.slice(0,this.position));throw new qe('Binary sub_type "'.concat(this.sub_type,'" is not supported for converting to UUID. Only "').concat(t.SUBTYPE_UUID,'" is currently supported.'))},t.fromExtendedJSON=function(e,r){r=r||{};var n,i;if("$binary"in e?r.legacy&&typeof e.$binary=="string"&&"$type"in e?(i=e.$type?parseInt(e.$type,16):0,n=re.from(e.$binary,"base64")):typeof e.$binary!="string"&&(i=e.$binary.subType?parseInt(e.$binary.subType,16):0,n=re.from(e.$binary.base64,"base64")):"$uuid"in e&&(i=4,n=ar(e.$uuid)),!n)throw new ce("Unexpected Binary Extended JSON format ".concat(JSON.stringify(e)));return i===pn?new Fr(n):new t(n,i)},t.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},t.prototype.inspect=function(){var e=this.value(!0);return'new Binary(Buffer.from("'.concat(e.toString("hex"),'", "hex"), ').concat(this.sub_type,")")},t.BSON_BINARY_SUBTYPE_DEFAULT=0,t.BUFFER_SIZE=256,t.SUBTYPE_DEFAULT=0,t.SUBTYPE_FUNCTION=1,t.SUBTYPE_BYTE_ARRAY=2,t.SUBTYPE_UUID_OLD=3,t.SUBTYPE_UUID=4,t.SUBTYPE_MD5=5,t.SUBTYPE_ENCRYPTED=6,t.SUBTYPE_COLUMN=7,t.SUBTYPE_USER_DEFINED=128,t}();Object.defineProperty(We.prototype,"_bsontype",{value:"Binary"});var qt=16,Fr=function(t){Lt(e,t);function e(r){var n=this,i,o;if(r==null)i=e.generate();else if(r instanceof e)i=re.from(r.buffer),o=r.__id;else if(ArrayBuffer.isView(r)&&r.byteLength===qt)i=Tt(r);else if(typeof r=="string")i=ar(r);else throw new ce("Argument passed in UUID constructor must be a UUID, a 16 byte Buffer or a 32/36 character hex string (dashes excluded/included, format: xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx).");return n=t.call(this,i,pn)||this,n.__id=o,n}return Object.defineProperty(e.prototype,"id",{get:function(){return this.buffer},set:function(r){this.buffer=r,e.cacheHexString&&(this.__id=Rr(r))},enumerable:!1,configurable:!0}),e.prototype.toHexString=function(r){if(r===void 0&&(r=!0),e.cacheHexString&&this.__id)return this.__id;var n=Rr(this.id,r);return e.cacheHexString&&(this.__id=n),n},e.prototype.toString=function(r){return r?this.id.toString(r):this.toHexString()},e.prototype.toJSON=function(){return this.toHexString()},e.prototype.equals=function(r){if(!r)return!1;if(r instanceof e)return r.id.equals(this.id);try{return new e(r).id.equals(this.id)}catch{return!1}},e.prototype.toBinary=function(){return new We(this.id,We.SUBTYPE_UUID)},e.generate=function(){var r=hn(qt);return r[6]=r[6]&15|64,r[8]=r[8]&63|128,re.from(r)},e.isValid=function(r){return r?r instanceof e?!0:typeof r=="string"?ln(r):yr(r)?r.length!==qt?!1:(r[6]&240)===64&&(r[8]&128)===128:!1:!1},e.createFromHexString=function(r){var n=ar(r);return new e(n)},e.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},e.prototype.inspect=function(){return'new UUID("'.concat(this.toHexString(),'")')},e}(We),Pt=function(){function t(e,r){if(!(this instanceof t))return new t(e,r);this.code=e,this.scope=r}return t.prototype.toJSON=function(){return{code:this.code,scope:this.scope}},t.prototype.toExtendedJSON=function(){return this.scope?{$code:this.code,$scope:this.scope}:{$code:this.code}},t.fromExtendedJSON=function(e){return new t(e.$code,e.$scope)},t.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},t.prototype.inspect=function(){var e=this.toJSON();return'new Code("'.concat(String(e.code),'"').concat(e.scope?", ".concat(JSON.stringify(e.scope)):"",")")},t}();Object.defineProperty(Pt.prototype,"_bsontype",{value:"Code"});function Ni(t){return vt(t)&&t.$id!=null&&typeof t.$ref=="string"&&(t.$db==null||typeof t.$db=="string")}var yt=function(){function t(e,r,n,i){if(!(this instanceof t))return new t(e,r,n,i);var o=e.split(".");o.length===2&&(n=o.shift(),e=o.shift()),this.collection=e,this.oid=r,this.db=n,this.fields=i||{}}return Object.defineProperty(t.prototype,"namespace",{get:function(){return this.collection},set:function(e){this.collection=e},enumerable:!1,configurable:!0}),t.prototype.toJSON=function(){var e=Object.assign({$ref:this.collection,$id:this.oid},this.fields);return this.db!=null&&(e.$db=this.db),e},t.prototype.toExtendedJSON=function(e){e=e||{};var r={$ref:this.collection,$id:this.oid};return e.legacy||(this.db&&(r.$db=this.db),r=Object.assign(r,this.fields)),r},t.fromExtendedJSON=function(e){var r=Object.assign({},e);return delete r.$ref,delete r.$id,delete r.$db,new t(e.$ref,e.$id,e.$db,r)},t.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},t.prototype.inspect=function(){var e=this.oid===void 0||this.oid.toString===void 0?this.oid:this.oid.toString();return'new DBRef("'.concat(this.namespace,'", new ObjectId("').concat(String(e),'")').concat(this.db?', "'.concat(this.db,'"'):"",")")},t}();Object.defineProperty(yt.prototype,"_bsontype",{value:"DBRef"});var Ee=void 0;try{Ee=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}var kr=65536,Oi=1<<24,nt=kr*kr,dn=nt*nt,Cr=dn/2,Mr={},Lr={},Z=function(){function t(e,r,n){if(e===void 0&&(e=0),!(this instanceof t))return new t(e,r,n);typeof e=="bigint"?Object.assign(this,t.fromBigInt(e,!!r)):typeof e=="string"?Object.assign(this,t.fromString(e,!!r)):(this.low=e|0,this.high=r|0,this.unsigned=!!n),Object.defineProperty(this,"__isLong__",{value:!0,configurable:!1,writable:!1,enumerable:!1})}return t.fromBits=function(e,r,n){return new t(e,r,n)},t.fromInt=function(e,r){var n,i,o;return r?(e>>>=0,(o=0<=e&&e<256)&&(i=Lr[e],i)?i:(n=t.fromBits(e,(e|0)<0?-1:0,!0),o&&(Lr[e]=n),n)):(e|=0,(o=-128<=e&&e<128)&&(i=Mr[e],i)?i:(n=t.fromBits(e,e<0?-1:0,!1),o&&(Mr[e]=n),n))},t.fromNumber=function(e,r){if(isNaN(e))return r?t.UZERO:t.ZERO;if(r){if(e<0)return t.UZERO;if(e>=dn)return t.MAX_UNSIGNED_VALUE}else{if(e<=-Cr)return t.MIN_VALUE;if(e+1>=Cr)return t.MAX_VALUE}return e<0?t.fromNumber(-e,r).neg():t.fromBits(e%nt|0,e/nt|0,r)},t.fromBigInt=function(e,r){return t.fromString(e.toString(),r)},t.fromString=function(e,r,n){if(e.length===0)throw Error("empty string");if(e==="NaN"||e==="Infinity"||e==="+Infinity"||e==="-Infinity")return t.ZERO;if(typeof r=="number"?(n=r,r=!1):r=!!r,n=n||10,n<2||36<n)throw RangeError("radix");var i;if((i=e.indexOf("-"))>0)throw Error("interior hyphen");if(i===0)return t.fromString(e.substring(1),r,n).neg();for(var o=t.fromNumber(Math.pow(n,8)),s=t.ZERO,u=0;u<e.length;u+=8){var y=Math.min(8,e.length-u),E=parseInt(e.substring(u,u+y),n);if(y<8){var c=t.fromNumber(Math.pow(n,y));s=s.mul(c).add(t.fromNumber(E))}else s=s.mul(o),s=s.add(t.fromNumber(E))}return s.unsigned=r,s},t.fromBytes=function(e,r,n){return n?t.fromBytesLE(e,r):t.fromBytesBE(e,r)},t.fromBytesLE=function(e,r){return new t(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,r)},t.fromBytesBE=function(e,r){return new t(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],r)},t.isLong=function(e){return vt(e)&&e.__isLong__===!0},t.fromValue=function(e,r){return typeof e=="number"?t.fromNumber(e,r):typeof e=="string"?t.fromString(e,r):t.fromBits(e.low,e.high,typeof r=="boolean"?r:e.unsigned)},t.prototype.add=function(e){t.isLong(e)||(e=t.fromValue(e));var r=this.high>>>16,n=this.high&65535,i=this.low>>>16,o=this.low&65535,s=e.high>>>16,u=e.high&65535,y=e.low>>>16,E=e.low&65535,c=0,l=0,h=0,p=0;return p+=o+E,h+=p>>>16,p&=65535,h+=i+y,l+=h>>>16,h&=65535,l+=n+u,c+=l>>>16,l&=65535,c+=r+s,c&=65535,t.fromBits(h<<16|p,c<<16|l,this.unsigned)},t.prototype.and=function(e){return t.isLong(e)||(e=t.fromValue(e)),t.fromBits(this.low&e.low,this.high&e.high,this.unsigned)},t.prototype.compare=function(e){if(t.isLong(e)||(e=t.fromValue(e)),this.eq(e))return 0;var r=this.isNegative(),n=e.isNegative();return r&&!n?-1:!r&&n?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},t.prototype.comp=function(e){return this.compare(e)},t.prototype.divide=function(e){if(t.isLong(e)||(e=t.fromValue(e)),e.isZero())throw Error("division by zero");if(Ee){if(!this.unsigned&&this.high===-2147483648&&e.low===-1&&e.high===-1)return this;var r=(this.unsigned?Ee.div_u:Ee.div_s)(this.low,this.high,e.low,e.high);return t.fromBits(r,Ee.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?t.UZERO:t.ZERO;var n,i,o;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return t.UZERO;if(e.gt(this.shru(1)))return t.UONE;o=t.UZERO}else{if(this.eq(t.MIN_VALUE)){if(e.eq(t.ONE)||e.eq(t.NEG_ONE))return t.MIN_VALUE;if(e.eq(t.MIN_VALUE))return t.ONE;var s=this.shr(1);return n=s.div(e).shl(1),n.eq(t.ZERO)?e.isNegative()?t.ONE:t.NEG_ONE:(i=this.sub(e.mul(n)),o=n.add(i.div(e)),o)}else if(e.eq(t.MIN_VALUE))return this.unsigned?t.UZERO:t.ZERO;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();o=t.ZERO}for(i=this;i.gte(e);){n=Math.max(1,Math.floor(i.toNumber()/e.toNumber()));for(var u=Math.ceil(Math.log(n)/Math.LN2),y=u<=48?1:Math.pow(2,u-48),E=t.fromNumber(n),c=E.mul(e);c.isNegative()||c.gt(i);)n-=y,E=t.fromNumber(n,this.unsigned),c=E.mul(e);E.isZero()&&(E=t.ONE),o=o.add(E),i=i.sub(c)}return o},t.prototype.div=function(e){return this.divide(e)},t.prototype.equals=function(e){return t.isLong(e)||(e=t.fromValue(e)),this.unsigned!==e.unsigned&&this.high>>>31===1&&e.high>>>31===1?!1:this.high===e.high&&this.low===e.low},t.prototype.eq=function(e){return this.equals(e)},t.prototype.getHighBits=function(){return this.high},t.prototype.getHighBitsUnsigned=function(){return this.high>>>0},t.prototype.getLowBits=function(){return this.low},t.prototype.getLowBitsUnsigned=function(){return this.low>>>0},t.prototype.getNumBitsAbs=function(){if(this.isNegative())return this.eq(t.MIN_VALUE)?64:this.neg().getNumBitsAbs();var e=this.high!==0?this.high:this.low,r;for(r=31;r>0&&!(e&1<<r);r--);return this.high!==0?r+33:r+1},t.prototype.greaterThan=function(e){return this.comp(e)>0},t.prototype.gt=function(e){return this.greaterThan(e)},t.prototype.greaterThanOrEqual=function(e){return this.comp(e)>=0},t.prototype.gte=function(e){return this.greaterThanOrEqual(e)},t.prototype.ge=function(e){return this.greaterThanOrEqual(e)},t.prototype.isEven=function(){return(this.low&1)===0},t.prototype.isNegative=function(){return!this.unsigned&&this.high<0},t.prototype.isOdd=function(){return(this.low&1)===1},t.prototype.isPositive=function(){return this.unsigned||this.high>=0},t.prototype.isZero=function(){return this.high===0&&this.low===0},t.prototype.lessThan=function(e){return this.comp(e)<0},t.prototype.lt=function(e){return this.lessThan(e)},t.prototype.lessThanOrEqual=function(e){return this.comp(e)<=0},t.prototype.lte=function(e){return this.lessThanOrEqual(e)},t.prototype.modulo=function(e){if(t.isLong(e)||(e=t.fromValue(e)),Ee){var r=(this.unsigned?Ee.rem_u:Ee.rem_s)(this.low,this.high,e.low,e.high);return t.fromBits(r,Ee.get_high(),this.unsigned)}return this.sub(this.div(e).mul(e))},t.prototype.mod=function(e){return this.modulo(e)},t.prototype.rem=function(e){return this.modulo(e)},t.prototype.multiply=function(e){if(this.isZero())return t.ZERO;if(t.isLong(e)||(e=t.fromValue(e)),Ee){var r=Ee.mul(this.low,this.high,e.low,e.high);return t.fromBits(r,Ee.get_high(),this.unsigned)}if(e.isZero())return t.ZERO;if(this.eq(t.MIN_VALUE))return e.isOdd()?t.MIN_VALUE:t.ZERO;if(e.eq(t.MIN_VALUE))return this.isOdd()?t.MIN_VALUE:t.ZERO;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(t.TWO_PWR_24)&&e.lt(t.TWO_PWR_24))return t.fromNumber(this.toNumber()*e.toNumber(),this.unsigned);var n=this.high>>>16,i=this.high&65535,o=this.low>>>16,s=this.low&65535,u=e.high>>>16,y=e.high&65535,E=e.low>>>16,c=e.low&65535,l=0,h=0,p=0,b=0;return b+=s*c,p+=b>>>16,b&=65535,p+=o*c,h+=p>>>16,p&=65535,p+=s*E,h+=p>>>16,p&=65535,h+=i*c,l+=h>>>16,h&=65535,h+=o*E,l+=h>>>16,h&=65535,h+=s*y,l+=h>>>16,h&=65535,l+=n*c+i*E+o*y+s*u,l&=65535,t.fromBits(p<<16|b,l<<16|h,this.unsigned)},t.prototype.mul=function(e){return this.multiply(e)},t.prototype.negate=function(){return!this.unsigned&&this.eq(t.MIN_VALUE)?t.MIN_VALUE:this.not().add(t.ONE)},t.prototype.neg=function(){return this.negate()},t.prototype.not=function(){return t.fromBits(~this.low,~this.high,this.unsigned)},t.prototype.notEquals=function(e){return!this.equals(e)},t.prototype.neq=function(e){return this.notEquals(e)},t.prototype.ne=function(e){return this.notEquals(e)},t.prototype.or=function(e){return t.isLong(e)||(e=t.fromValue(e)),t.fromBits(this.low|e.low,this.high|e.high,this.unsigned)},t.prototype.shiftLeft=function(e){return t.isLong(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?t.fromBits(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):t.fromBits(0,this.low<<e-32,this.unsigned)},t.prototype.shl=function(e){return this.shiftLeft(e)},t.prototype.shiftRight=function(e){return t.isLong(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?t.fromBits(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):t.fromBits(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},t.prototype.shr=function(e){return this.shiftRight(e)},t.prototype.shiftRightUnsigned=function(e){if(t.isLong(e)&&(e=e.toInt()),e&=63,e===0)return this;var r=this.high;if(e<32){var n=this.low;return t.fromBits(n>>>e|r<<32-e,r>>>e,this.unsigned)}else return e===32?t.fromBits(r,0,this.unsigned):t.fromBits(r>>>e-32,0,this.unsigned)},t.prototype.shr_u=function(e){return this.shiftRightUnsigned(e)},t.prototype.shru=function(e){return this.shiftRightUnsigned(e)},t.prototype.subtract=function(e){return t.isLong(e)||(e=t.fromValue(e)),this.add(e.neg())},t.prototype.sub=function(e){return this.subtract(e)},t.prototype.toInt=function(){return this.unsigned?this.low>>>0:this.low},t.prototype.toNumber=function(){return this.unsigned?(this.high>>>0)*nt+(this.low>>>0):this.high*nt+(this.low>>>0)},t.prototype.toBigInt=function(){return BigInt(this.toString())},t.prototype.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},t.prototype.toBytesLE=function(){var e=this.high,r=this.low;return[r&255,r>>>8&255,r>>>16&255,r>>>24,e&255,e>>>8&255,e>>>16&255,e>>>24]},t.prototype.toBytesBE=function(){var e=this.high,r=this.low;return[e>>>24,e>>>16&255,e>>>8&255,e&255,r>>>24,r>>>16&255,r>>>8&255,r&255]},t.prototype.toSigned=function(){return this.unsigned?t.fromBits(this.low,this.high,!1):this},t.prototype.toString=function(e){if(e=e||10,e<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(t.MIN_VALUE)){var r=t.fromNumber(e),n=this.div(r),i=n.mul(r).sub(this);return n.toString(e)+i.toInt().toString(e)}else return"-"+this.neg().toString(e);for(var o=t.fromNumber(Math.pow(e,6),this.unsigned),s=this,u="";;){var y=s.div(o),E=s.sub(y.mul(o)).toInt()>>>0,c=E.toString(e);if(s=y,s.isZero())return c+u;for(;c.length<6;)c="0"+c;u=""+c+u}},t.prototype.toUnsigned=function(){return this.unsigned?this:t.fromBits(this.low,this.high,!0)},t.prototype.xor=function(e){return t.isLong(e)||(e=t.fromValue(e)),t.fromBits(this.low^e.low,this.high^e.high,this.unsigned)},t.prototype.eqz=function(){return this.isZero()},t.prototype.le=function(e){return this.lessThanOrEqual(e)},t.prototype.toExtendedJSON=function(e){return e&&e.relaxed?this.toNumber():{$numberLong:this.toString()}},t.fromExtendedJSON=function(e,r){var n=t.fromString(e.$numberLong);return r&&r.relaxed?n.toNumber():n},t.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},t.prototype.inspect=function(){return'new Long("'.concat(this.toString(),'"').concat(this.unsigned?", true":"",")")},t.TWO_PWR_24=t.fromInt(Oi),t.MAX_UNSIGNED_VALUE=t.fromBits(-1,-1,!0),t.ZERO=t.fromInt(0),t.UZERO=t.fromInt(0,!0),t.ONE=t.fromInt(1),t.UONE=t.fromInt(1,!0),t.NEG_ONE=t.fromInt(-1),t.MAX_VALUE=t.fromBits(-1,2147483647,!1),t.MIN_VALUE=t.fromBits(0,-2147483648,!1),t}();Object.defineProperty(Z.prototype,"__isLong__",{value:!0});Object.defineProperty(Z.prototype,"_bsontype",{value:"Long"});var Ti=/^(\+|-)?(\d+|(\d*\.\d*))?(E|e)?([-+])?(\d+)?$/,Ii=/^(\+|-)?(Infinity|inf)$/i,Ui=/^(\+|-)?NaN$/i,lt=6111,Kt=-6176,Dr=6176,Bi=34,Xt=[124,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse(),Pr=[248,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse(),jr=[120,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse(),Ri=/^([-+])?(\d+)?$/,Fi=31,$r=16383,ki=30,Ci=31;function Hr(t){return!isNaN(parseInt(t,10))}function Mi(t){var e=Z.fromNumber(1e9),r=Z.fromNumber(0);if(!t.parts[0]&&!t.parts[1]&&!t.parts[2]&&!t.parts[3])return{quotient:t,rem:r};for(var n=0;n<=3;n++)r=r.shiftLeft(32),r=r.add(new Z(t.parts[n],0)),t.parts[n]=r.div(e).low,r=r.modulo(e);return{quotient:t,rem:r}}function Li(t,e){if(!t&&!e)return{high:Z.fromNumber(0),low:Z.fromNumber(0)};var r=t.shiftRightUnsigned(32),n=new Z(t.getLowBits(),0),i=e.shiftRightUnsigned(32),o=new Z(e.getLowBits(),0),s=r.multiply(i),u=r.multiply(o),y=n.multiply(i),E=n.multiply(o);return s=s.add(u.shiftRightUnsigned(32)),u=new Z(u.getLowBits(),0).add(y).add(E.shiftRightUnsigned(32)),s=s.add(u.shiftRightUnsigned(32)),E=u.shiftLeft(32).add(new Z(E.getLowBits(),0)),{high:s,low:E}}function Di(t,e){var r=t.high>>>0,n=e.high>>>0;if(r<n)return!0;if(r===n){var i=t.low>>>0,o=e.low>>>0;if(i<o)return!0}return!1}function tt(t,e){throw new ce('"'.concat(t,'" is not a valid Decimal128 string - ').concat(e))}var mr=function(){function t(e){if(!(this instanceof t))return new t(e);if(typeof e=="string")this.bytes=t.fromString(e).bytes;else if(yr(e)){if(e.byteLength!==16)throw new ce("Decimal128 must take a Buffer of 16 bytes");this.bytes=e}else throw new ce("Decimal128 must take a Buffer or string")}return t.fromString=function(e){var r=!1,n=!1,i=!1,o=0,s=0,u=0,y=0,E=0,c=[0],l=0,h=0,p=0,b=0,O=0,k=0,S=new Z(0,0),L=new Z(0,0),D=0,A=0;if(e.length>=7e3)throw new ce(""+e+" not a valid Decimal128 string");var H=e.match(Ti),_=e.match(Ii),P=e.match(Ui);if(!H&&!_&&!P||e.length===0)throw new ce(""+e+" not a valid Decimal128 string");if(H){var v=H[2],w=H[4],T=H[5],R=H[6];w&&R===void 0&&tt(e,"missing exponent power"),w&&v===void 0&&tt(e,"missing exponent base"),w===void 0&&(T||R)&&tt(e,"missing e before exponent")}if((e[A]==="+"||e[A]==="-")&&(r=e[A++]==="-"),!Hr(e[A])&&e[A]!=="."){if(e[A]==="i"||e[A]==="I")return new t(re.from(r?Pr:jr));if(e[A]==="N")return new t(re.from(Xt))}for(;Hr(e[A])||e[A]===".";){if(e[A]==="."){n&&tt(e,"contains multiple periods"),n=!0,A=A+1;continue}l<34&&(e[A]!=="0"||i)&&(i||(E=s),i=!0,c[h++]=parseInt(e[A],10),l=l+1),i&&(u=u+1),n&&(y=y+1),s=s+1,A=A+1}if(n&&!s)throw new ce(""+e+" not a valid Decimal128 string");if(e[A]==="e"||e[A]==="E"){var U=e.substr(++A).match(Ri);if(!U||!U[2])return new t(re.from(Xt));O=parseInt(U[0],10),A=A+U[0].length}if(e[A])return new t(re.from(Xt));if(p=0,!l)p=0,b=0,c[0]=0,u=1,l=1,o=0;else if(b=l-1,o=u,o!==1)for(;c[E+o-1]===0;)o=o-1;for(O<=y&&y-O>16384?O=Kt:O=O-y;O>lt;){if(b=b+1,b-p>Bi){var F=c.join("");if(F.match(/^0+$/)){O=lt;break}tt(e,"overflow")}O=O-1}for(;O<Kt||l<u;){if(b===0&&o<l){O=Kt,o=0;break}if(l<u?u=u-1:b=b-1,O<lt)O=O+1;else{var F=c.join("");if(F.match(/^0+$/)){O=lt;break}tt(e,"overflow")}}if(b-p+1<o){var N=s;n&&(E=E+1,N=N+1),r&&(E=E+1,N=N+1);var C=parseInt(e[E+b+1],10),x=0;if(C>=5&&(x=1,C===5)){for(x=c[b]%2===1?1:0,k=E+b+2;k<N;k++)if(parseInt(e[k],10)){x=1;break}}if(x){for(var g=b;g>=0;g--)if(++c[g]>9&&(c[g]=0,g===0))if(O<lt)O=O+1,c[g]=1;else return new t(re.from(r?Pr:jr))}}if(S=Z.fromNumber(0),L=Z.fromNumber(0),o===0)S=Z.fromNumber(0),L=Z.fromNumber(0);else if(b-p<17){var g=p;for(L=Z.fromNumber(c[g++]),S=new Z(0,0);g<=b;g++)L=L.multiply(Z.fromNumber(10)),L=L.add(Z.fromNumber(c[g]))}else{var g=p;for(S=Z.fromNumber(c[g++]);g<=b-17;g++)S=S.multiply(Z.fromNumber(10)),S=S.add(Z.fromNumber(c[g]));for(L=Z.fromNumber(c[g++]);g<=b;g++)L=L.multiply(Z.fromNumber(10)),L=L.add(Z.fromNumber(c[g]))}var j=Li(S,Z.fromString("100000000000000000"));j.low=j.low.add(L),Di(j.low,L)&&(j.high=j.high.add(Z.fromNumber(1))),D=O+Dr;var B={low:Z.fromNumber(0),high:Z.fromNumber(0)};j.high.shiftRightUnsigned(49).and(Z.fromNumber(1)).equals(Z.fromNumber(1))?(B.high=B.high.or(Z.fromNumber(3).shiftLeft(61)),B.high=B.high.or(Z.fromNumber(D).and(Z.fromNumber(16383).shiftLeft(47))),B.high=B.high.or(j.high.and(Z.fromNumber(0x7fffffffffff)))):(B.high=B.high.or(Z.fromNumber(D&16383).shiftLeft(49)),B.high=B.high.or(j.high.and(Z.fromNumber(562949953421311)))),B.low=j.low,r&&(B.high=B.high.or(Z.fromString("9223372036854775808")));var M=re.alloc(16);return A=0,M[A++]=B.low.low&255,M[A++]=B.low.low>>8&255,M[A++]=B.low.low>>16&255,M[A++]=B.low.low>>24&255,M[A++]=B.low.high&255,M[A++]=B.low.high>>8&255,M[A++]=B.low.high>>16&255,M[A++]=B.low.high>>24&255,M[A++]=B.high.low&255,M[A++]=B.high.low>>8&255,M[A++]=B.high.low>>16&255,M[A++]=B.high.low>>24&255,M[A++]=B.high.high&255,M[A++]=B.high.high>>8&255,M[A++]=B.high.high>>16&255,M[A++]=B.high.high>>24&255,new t(M)},t.prototype.toString=function(){for(var e,r=0,n=new Array(36),i=0;i<n.length;i++)n[i]=0;var o=0,s=!1,u,y={parts:[0,0,0,0]},E,c,l=[];o=0;var h=this.bytes,p=h[o++]|h[o++]<<8|h[o++]<<16|h[o++]<<24,b=h[o++]|h[o++]<<8|h[o++]<<16|h[o++]<<24,O=h[o++]|h[o++]<<8|h[o++]<<16|h[o++]<<24,k=h[o++]|h[o++]<<8|h[o++]<<16|h[o++]<<24;o=0;var S={low:new Z(p,b),high:new Z(O,k)};S.high.lessThan(Z.ZERO)&&l.push("-");var L=k>>26&Fi;if(L>>3===3){if(L===ki)return l.join("")+"Infinity";if(L===Ci)return"NaN";e=k>>15&$r,u=8+(k>>14&1)}else u=k>>14&7,e=k>>17&$r;var D=e-Dr;if(y.parts[0]=(k&16383)+((u&15)<<14),y.parts[1]=O,y.parts[2]=b,y.parts[3]=p,y.parts[0]===0&&y.parts[1]===0&&y.parts[2]===0&&y.parts[3]===0)s=!0;else for(c=3;c>=0;c--){var A=0,H=Mi(y);if(y=H.quotient,A=H.rem.low,!!A)for(E=8;E>=0;E--)n[c*9+E]=A%10,A=Math.floor(A/10)}if(s)r=1,n[o]=0;else for(r=36;!n[o];)r=r-1,o=o+1;var _=r-1+D;if(_>=34||_<=-7||D>0){if(r>34)return l.push("".concat(0)),D>0?l.push("E+".concat(D)):D<0&&l.push("E".concat(D)),l.join("");l.push("".concat(n[o++])),r=r-1,r&&l.push(".");for(var i=0;i<r;i++)l.push("".concat(n[o++]));l.push("E"),_>0?l.push("+".concat(_)):l.push("".concat(_))}else if(D>=0)for(var i=0;i<r;i++)l.push("".concat(n[o++]));else{var P=r+D;if(P>0)for(var i=0;i<P;i++)l.push("".concat(n[o++]));else l.push("0");for(l.push(".");P++<0;)l.push("0");for(var i=0;i<r-Math.max(P-1,0);i++)l.push("".concat(n[o++]))}return l.join("")},t.prototype.toJSON=function(){return{$numberDecimal:this.toString()}},t.prototype.toExtendedJSON=function(){return{$numberDecimal:this.toString()}},t.fromExtendedJSON=function(e){return t.fromString(e.$numberDecimal)},t.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},t.prototype.inspect=function(){return'new Decimal128("'.concat(this.toString(),'")')},t}();Object.defineProperty(mr.prototype,"_bsontype",{value:"Decimal128"});var jt=function(){function t(e){if(!(this instanceof t))return new t(e);e instanceof Number&&(e=e.valueOf()),this.value=+e}return t.prototype.valueOf=function(){return this.value},t.prototype.toJSON=function(){return this.value},t.prototype.toString=function(e){return this.value.toString(e)},t.prototype.toExtendedJSON=function(e){return e&&(e.legacy||e.relaxed&&isFinite(this.value))?this.value:Object.is(Math.sign(this.value),-0)?{$numberDouble:"-".concat(this.value.toFixed(1))}:{$numberDouble:Number.isInteger(this.value)?this.value.toFixed(1):this.value.toString()}},t.fromExtendedJSON=function(e,r){var n=parseFloat(e.$numberDouble);return r&&r.relaxed?n:new t(n)},t.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},t.prototype.inspect=function(){var e=this.toExtendedJSON();return"new Double(".concat(e.$numberDouble,")")},t}();Object.defineProperty(jt.prototype,"_bsontype",{value:"Double"});var $t=function(){function t(e){if(!(this instanceof t))return new t(e);e instanceof Number&&(e=e.valueOf()),this.value=+e|0}return t.prototype.valueOf=function(){return this.value},t.prototype.toString=function(e){return this.value.toString(e)},t.prototype.toJSON=function(){return this.value},t.prototype.toExtendedJSON=function(e){return e&&(e.relaxed||e.legacy)?this.value:{$numberInt:this.value.toString()}},t.fromExtendedJSON=function(e,r){return r&&r.relaxed?parseInt(e.$numberInt,10):new t(e.$numberInt)},t.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},t.prototype.inspect=function(){return"new Int32(".concat(this.valueOf(),")")},t}();Object.defineProperty($t.prototype,"_bsontype",{value:"Int32"});var wr=function(){function t(){if(!(this instanceof t))return new t}return t.prototype.toExtendedJSON=function(){return{$maxKey:1}},t.fromExtendedJSON=function(){return new t},t.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},t.prototype.inspect=function(){return"new MaxKey()"},t}();Object.defineProperty(wr.prototype,"_bsontype",{value:"MaxKey"});var br=function(){function t(){if(!(this instanceof t))return new t}return t.prototype.toExtendedJSON=function(){return{$minKey:1}},t.fromExtendedJSON=function(){return new t},t.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},t.prototype.inspect=function(){return"new MinKey()"},t}();Object.defineProperty(br.prototype,"_bsontype",{value:"MinKey"});var Pi=new RegExp("^[0-9a-fA-F]{24}$"),Ge=null,Fe=Symbol("id"),be=function(){function t(e){if(!(this instanceof t))return new t(e);var r;if(typeof e=="object"&&e&&"id"in e){if(typeof e.id!="string"&&!ArrayBuffer.isView(e.id))throw new ce("Argument passed in must have an id that is of type string or Buffer");"toHexString"in e&&typeof e.toHexString=="function"?r=re.from(e.toHexString(),"hex"):r=e.id}else r=e;if(r==null||typeof r=="number")this[Fe]=t.generate(typeof r=="number"?r:void 0);else if(ArrayBuffer.isView(r)&&r.byteLength===12)this[Fe]=r instanceof re?r:Tt(r);else if(typeof r=="string")if(r.length===12){var n=re.from(r);if(n.byteLength===12)this[Fe]=n;else throw new ce("Argument passed in must be a string of 12 bytes")}else if(r.length===24&&Pi.test(r))this[Fe]=re.from(r,"hex");else throw new ce("Argument passed in must be a string of 12 bytes or a string of 24 hex characters or an integer");else throw new ce("Argument passed in does not match the accepted types");t.cacheHexString&&(this.__id=this.id.toString("hex"))}return Object.defineProperty(t.prototype,"id",{get:function(){return this[Fe]},set:function(e){this[Fe]=e,t.cacheHexString&&(this.__id=e.toString("hex"))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"generationTime",{get:function(){return this.id.readInt32BE(0)},set:function(e){this.id.writeUInt32BE(e,0)},enumerable:!1,configurable:!0}),t.prototype.toHexString=function(){if(t.cacheHexString&&this.__id)return this.__id;var e=this.id.toString("hex");return t.cacheHexString&&!this.__id&&(this.__id=e),e},t.getInc=function(){return t.index=(t.index+1)%16777215},t.generate=function(e){typeof e!="number"&&(e=Math.floor(Date.now()/1e3));var r=t.getInc(),n=re.alloc(12);return n.writeUInt32BE(e,0),Ge===null&&(Ge=hn(5)),n[4]=Ge[0],n[5]=Ge[1],n[6]=Ge[2],n[7]=Ge[3],n[8]=Ge[4],n[11]=r&255,n[10]=r>>8&255,n[9]=r>>16&255,n},t.prototype.toString=function(e){return e?this.id.toString(e):this.toHexString()},t.prototype.toJSON=function(){return this.toHexString()},t.prototype.equals=function(e){if(e==null)return!1;if(e instanceof t)return this[Fe][11]===e[Fe][11]&&this[Fe].equals(e[Fe]);if(typeof e=="string"&&t.isValid(e)&&e.length===12&&yr(this.id))return e===re.prototype.toString.call(this.id,"latin1");if(typeof e=="string"&&t.isValid(e)&&e.length===24)return e.toLowerCase()===this.toHexString();if(typeof e=="string"&&t.isValid(e)&&e.length===12)return re.from(e).equals(this.id);if(typeof e=="object"&&"toHexString"in e&&typeof e.toHexString=="function"){var r=e.toHexString(),n=this.toHexString().toLowerCase();return typeof r=="string"&&r.toLowerCase()===n}return!1},t.prototype.getTimestamp=function(){var e=new Date,r=this.id.readUInt32BE(0);return e.setTime(Math.floor(r)*1e3),e},t.createPk=function(){return new t},t.createFromTime=function(e){var r=re.from([0,0,0,0,0,0,0,0,0,0,0,0]);return r.writeUInt32BE(e,0),new t(r)},t.createFromHexString=function(e){if(typeof e>"u"||e!=null&&e.length!==24)throw new ce("Argument passed in must be a single String of 12 bytes or a string of 24 hex characters");return new t(re.from(e,"hex"))},t.isValid=function(e){if(e==null)return!1;try{return new t(e),!0}catch{return!1}},t.prototype.toExtendedJSON=function(){return this.toHexString?{$oid:this.toHexString()}:{$oid:this.toString("hex")}},t.fromExtendedJSON=function(e){return new t(e.$oid)},t.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},t.prototype.inspect=function(){return'new ObjectId("'.concat(this.toHexString(),'")')},t.index=Math.floor(Math.random()*16777215),t}();Object.defineProperty(be.prototype,"generate",{value:Dt(function(t){return be.generate(t)},"Please use the static `ObjectId.generate(time)` instead")});Object.defineProperty(be.prototype,"getInc",{value:Dt(function(){return be.getInc()},"Please use the static `ObjectId.getInc()` instead")});Object.defineProperty(be.prototype,"get_inc",{value:Dt(function(){return be.getInc()},"Please use the static `ObjectId.getInc()` instead")});Object.defineProperty(be,"get_inc",{value:Dt(function(){return be.getInc()},"Please use the static `ObjectId.getInc()` instead")});Object.defineProperty(be.prototype,"_bsontype",{value:"ObjectID"});function ji(t){return t.split("").sort().join("")}var mt=function(){function t(e,r){if(!(this instanceof t))return new t(e,r);if(this.pattern=e,this.options=ji(r??""),this.pattern.indexOf("\0")!==-1)throw new qe("BSON Regex patterns cannot contain null bytes, found: ".concat(JSON.stringify(this.pattern)));if(this.options.indexOf("\0")!==-1)throw new qe("BSON Regex options cannot contain null bytes, found: ".concat(JSON.stringify(this.options)));for(var n=0;n<this.options.length;n++)if(!(this.options[n]==="i"||this.options[n]==="m"||this.options[n]==="x"||this.options[n]==="l"||this.options[n]==="s"||this.options[n]==="u"))throw new qe("The regular expression option [".concat(this.options[n],"] is not supported"))}return t.parseOptions=function(e){return e?e.split("").sort().join(""):""},t.prototype.toExtendedJSON=function(e){return e=e||{},e.legacy?{$regex:this.pattern,$options:this.options}:{$regularExpression:{pattern:this.pattern,options:this.options}}},t.fromExtendedJSON=function(e){if("$regex"in e)if(typeof e.$regex!="string"){if(e.$regex._bsontype==="BSONRegExp")return e}else return new t(e.$regex,t.parseOptions(e.$options));if("$regularExpression"in e)return new t(e.$regularExpression.pattern,t.parseOptions(e.$regularExpression.options));throw new ce("Unexpected BSONRegExp EJSON object form: ".concat(JSON.stringify(e)))},t}();Object.defineProperty(mt.prototype,"_bsontype",{value:"BSONRegExp"});var vr=function(){function t(e){if(!(this instanceof t))return new t(e);this.value=e}return t.prototype.valueOf=function(){return this.value},t.prototype.toString=function(){return this.value},t.prototype.inspect=function(){return'new BSONSymbol("'.concat(this.value,'")')},t.prototype.toJSON=function(){return this.value},t.prototype.toExtendedJSON=function(){return{$symbol:this.value}},t.fromExtendedJSON=function(e){return new t(e.$symbol)},t.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},t}();Object.defineProperty(vr.prototype,"_bsontype",{value:"Symbol"});var $i=Z,gn=function(t){Lt(e,t);function e(r,n){var i=this;return i instanceof e?(Z.isLong(r)?i=t.call(this,r.low,r.high,!0)||this:vt(r)&&typeof r.t<"u"&&typeof r.i<"u"?i=t.call(this,r.i,r.t,!0)||this:i=t.call(this,r,n,!0)||this,Object.defineProperty(i,"_bsontype",{value:"Timestamp",writable:!1,configurable:!1,enumerable:!1}),i):new e(r,n)}return e.prototype.toJSON=function(){return{$timestamp:this.toString()}},e.fromInt=function(r){return new e(Z.fromInt(r,!0))},e.fromNumber=function(r){return new e(Z.fromNumber(r,!0))},e.fromBits=function(r,n){return new e(r,n)},e.fromString=function(r,n){return new e(Z.fromString(r,!0,n))},e.prototype.toExtendedJSON=function(){return{$timestamp:{t:this.high>>>0,i:this.low>>>0}}},e.fromExtendedJSON=function(r){return new e(r.$timestamp)},e.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},e.prototype.inspect=function(){return"new Timestamp({ t: ".concat(this.getHighBits(),", i: ").concat(this.getLowBits()," })")},e.MAX_VALUE=Z.MAX_UNSIGNED_VALUE,e}($i);function Hi(t){return vt(t)&&Reflect.has(t,"_bsontype")&&typeof t._bsontype=="string"}var yn=2147483647,mn=-2147483648,wn=9223372036854776e3,bn=-9223372036854776e3,Wi={$oid:be,$binary:We,$uuid:We,$symbol:vr,$numberInt:$t,$numberDecimal:mr,$numberDouble:jt,$numberLong:Z,$minKey:br,$maxKey:wr,$regex:mt,$regularExpression:mt,$timestamp:gn};function vn(t,e){if(e===void 0&&(e={}),typeof t=="number"){if(e.relaxed||e.legacy)return t;if(Math.floor(t)===t){if(t>=mn&&t<=yn)return new $t(t);if(t>=bn&&t<=wn)return Z.fromNumber(t)}return new jt(t)}if(t==null||typeof t!="object")return t;if(t.$undefined)return null;for(var r=Object.keys(t).filter(function(l){return l.startsWith("$")&&t[l]!=null}),n=0;n<r.length;n++){var i=Wi[r[n]];if(i)return i.fromExtendedJSON(t,e)}if(t.$date!=null){var o=t.$date,s=new Date;return e.legacy?typeof o=="number"?s.setTime(o):typeof o=="string"&&s.setTime(Date.parse(o)):typeof o=="string"?s.setTime(Date.parse(o)):Z.isLong(o)?s.setTime(o.toNumber()):typeof o=="number"&&e.relaxed&&s.setTime(o),s}if(t.$code!=null){var u=Object.assign({},t);return t.$scope&&(u.$scope=vn(t.$scope)),Pt.fromExtendedJSON(t)}if(Ni(t)||t.$dbPointer){var y=t.$ref?t:t.$dbPointer;if(y instanceof yt)return y;var E=Object.keys(y).filter(function(l){return l.startsWith("$")}),c=!0;if(E.forEach(function(l){["$ref","$id","$db"].indexOf(l)===-1&&(c=!1)}),c)return yt.fromExtendedJSON(y)}return t}function Vi(t,e){return t.map(function(r,n){e.seenObjects.push({propertyName:"index ".concat(n),obj:null});try{return $e(r,e)}finally{e.seenObjects.pop()}})}function Wr(t){var e=t.toISOString();return t.getUTCMilliseconds()!==0?e:e.slice(0,-5)+"Z"}function $e(t,e){if((typeof t=="object"||typeof t=="function")&&t!==null){var r=e.seenObjects.findIndex(function(S){return S.obj===t});if(r!==-1){var n=e.seenObjects.map(function(S){return S.propertyName}),i=n.slice(0,r).map(function(S){return"".concat(S," -> ")}).join(""),o=n[r],s=" -> "+n.slice(r+1,n.length-1).map(function(S){return"".concat(S," -> ")}).join(""),u=n[n.length-1],y=" ".repeat(i.length+o.length/2),E="-".repeat(s.length+(o.length+u.length)/2-1);throw new ce(`Converting circular structure to EJSON:
`+"    ".concat(i).concat(o).concat(s).concat(u,`
`)+"    ".concat(y,"\\").concat(E,"/"))}e.seenObjects[e.seenObjects.length-1].obj=t}if(Array.isArray(t))return Vi(t,e);if(t===void 0)return null;if(t instanceof Date||Ei(t)){var c=t.getTime(),l=c>-1&&c<2534023188e5;return e.legacy?e.relaxed&&l?{$date:t.getTime()}:{$date:Wr(t)}:e.relaxed&&l?{$date:Wr(t)}:{$date:{$numberLong:t.getTime().toString()}}}if(typeof t=="number"&&(!e.relaxed||!isFinite(t))){if(Math.floor(t)===t){var h=t>=mn&&t<=yn,p=t>=bn&&t<=wn;if(h)return{$numberInt:t.toString()};if(p)return{$numberLong:t.toString()}}return{$numberDouble:t.toString()}}if(t instanceof RegExp||xi(t)){var b=t.flags;if(b===void 0){var O=t.toString().match(/[gimuy]*$/);O&&(b=O[0])}var k=new mt(t.source,b);return k.toExtendedJSON(e)}return t!=null&&typeof t=="object"?zi(t,e):t}var Ji={Binary:function(t){return new We(t.value(),t.sub_type)},Code:function(t){return new Pt(t.code,t.scope)},DBRef:function(t){return new yt(t.collection||t.namespace,t.oid,t.db,t.fields)},Decimal128:function(t){return new mr(t.bytes)},Double:function(t){return new jt(t.value)},Int32:function(t){return new $t(t.value)},Long:function(t){return Z.fromBits(t.low!=null?t.low:t.low_,t.low!=null?t.high:t.high_,t.low!=null?t.unsigned:t.unsigned_)},MaxKey:function(){return new wr},MinKey:function(){return new br},ObjectID:function(t){return new be(t)},ObjectId:function(t){return new be(t)},BSONRegExp:function(t){return new mt(t.pattern,t.options)},Symbol:function(t){return new vr(t.value)},Timestamp:function(t){return gn.fromBits(t.low,t.high)}};function zi(t,e){if(t==null||typeof t!="object")throw new qe("not an object instance");var r=t._bsontype;if(typeof r>"u"){var n={};for(var i in t){e.seenObjects.push({propertyName:i,obj:null});try{var o=$e(t[i],e);i==="__proto__"?Object.defineProperty(n,i,{value:o,writable:!0,enumerable:!0,configurable:!0}):n[i]=o}finally{e.seenObjects.pop()}}return n}else if(Hi(t)){var s=t;if(typeof s.toExtendedJSON!="function"){var u=Ji[t._bsontype];if(!u)throw new ce("Unrecognized or invalid _bsontype: "+t._bsontype);s=u(s)}return r==="Code"&&s.scope?s=new Pt(s.code,$e(s.scope,e)):r==="DBRef"&&s.oid&&(s=new yt($e(s.collection,e),$e(s.oid,e),$e(s.db,e),$e(s.fields,e))),s.toExtendedJSON(e)}else throw new qe("_bsontype must be a string, but was: "+typeof r)}var Ke;(function(t){function e(o,s){var u=Object.assign({},{relaxed:!0,legacy:!1},s);return typeof u.relaxed=="boolean"&&(u.strict=!u.relaxed),typeof u.strict=="boolean"&&(u.relaxed=!u.strict),JSON.parse(o,function(y,E){if(y.indexOf("\0")!==-1)throw new qe("BSON Document field names cannot contain null bytes, found: ".concat(JSON.stringify(y)));return vn(E,u)})}t.parse=e;function r(o,s,u,y){u!=null&&typeof u=="object"&&(y=u,u=0),s!=null&&typeof s=="object"&&!Array.isArray(s)&&(y=s,s=void 0,u=0);var E=Object.assign({relaxed:!0,legacy:!1},y,{seenObjects:[{propertyName:"(root)",obj:null}]}),c=$e(o,E);return JSON.stringify(c,s,u)}t.stringify=r;function n(o,s){return s=s||{},JSON.parse(r(o,s))}t.serialize=n;function i(o,s){return s=s||{},e(JSON.stringify(o),s)}t.deserialize=i})(Ke||(Ke={}));var Vr=cn();Vr.Map?Vr.Map:function(){function t(e){e===void 0&&(e=[]),this._keys=[],this._values={};for(var r=0;r<e.length;r++)if(e[r]!=null){var n=e[r],i=n[0],o=n[1];this._keys.push(i),this._values[i]={v:o,i:this._keys.length-1}}}return t.prototype.clear=function(){this._keys=[],this._values={}},t.prototype.delete=function(e){var r=this._values[e];return r==null?!1:(delete this._values[e],this._keys.splice(r.i,1),!0)},t.prototype.entries=function(){var e=this,r=0;return{next:function(){var n=e._keys[r++];return{value:n!==void 0?[n,e._values[n].v]:void 0,done:n===void 0}}}},t.prototype.forEach=function(e,r){r=r||this;for(var n=0;n<this._keys.length;n++){var i=this._keys[n];e.call(r,this._values[i].v,i,r)}},t.prototype.get=function(e){return this._values[e]?this._values[e].v:void 0},t.prototype.has=function(e){return this._values[e]!=null},t.prototype.keys=function(){var e=this,r=0;return{next:function(){var n=e._keys[r++];return{value:n!==void 0?n:void 0,done:n===void 0}}}},t.prototype.set=function(e,r){return this._values[e]?(this._values[e].v=r,this):(this._keys.push(e),this._values[e]={v:r,i:this._keys.length-1},this)},t.prototype.values=function(){var e=this,r=0;return{next:function(){var n=e._keys[r++];return{value:n!==void 0?e._values[n].v:void 0,done:n===void 0}}}},Object.defineProperty(t.prototype,"size",{get:function(){return this._keys.length},enumerable:!1,configurable:!0}),t}();Z.fromNumber(Ai);Z.fromNumber(Si);var Qt=new Uint8Array(8);new DataView(Qt.buffer,Qt.byteOffset,Qt.byteLength);var Gi=1024*1024*17;re.alloc(Gi);var Jr=function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))},Yi=function(){function t(e,r,n){this.name=e,this.version=r,this.os=n,this.type="browser"}return t}(),Zi=function(){function t(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return t}(),qi=function(){function t(e,r,n,i){this.name=e,this.version=r,this.os=n,this.bot=i,this.type="bot-device"}return t}(),Ki=function(){function t(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return t}(),Xi=function(){function t(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return t}(),Qi=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,eo=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,zr=3,to=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",Qi]],Gr=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function ro(t){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new Xi:typeof navigator<"u"?io(navigator.userAgent):so()}function no(t){return t!==""&&to.reduce(function(e,r){var n=r[0],i=r[1];if(e)return e;var o=i.exec(t);return!!o&&[n,o]},!1)}function io(t){var e=no(t);if(!e)return null;var r=e[0],n=e[1];if(r==="searchbot")return new Ki;var i=n[1]&&n[1].split(".").join("_").split("_").slice(0,3);i?i.length<zr&&(i=Jr(Jr([],i,!0),ao(zr-i.length),!0)):i=[];var o=i.join("."),s=oo(t),u=eo.exec(t);return u&&u[1]?new qi(r,o,s,u[1]):new Yi(r,o,s)}function oo(t){for(var e=0,r=Gr.length;e<r;e++){var n=Gr[e],i=n[0],o=n[1],s=o.exec(t);if(s)return i}return null}function so(){var t=typeof process<"u"&&process.version;return t?new Zi(process.version.slice(1)):null}function ao(t){for(var e=[],r=0;r<t;r++)e.push("0");return e}const fo=globalThis.fetch.bind(globalThis),xn="3.7.6",uo=xn,co=typeof atob=="function",ho=typeof btoa=="function",ft=typeof Buffer=="function",Yr=typeof TextDecoder=="function"?new TextDecoder:void 0,Zr=typeof TextEncoder=="function"?new TextEncoder:void 0,lo="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",gt=Array.prototype.slice.call(lo),At=(t=>{let e={};return t.forEach((r,n)=>e[r]=n),e})(gt),po=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,pe=String.fromCharCode.bind(String),qr=typeof Uint8Array.from=="function"?Uint8Array.from.bind(Uint8Array):t=>new Uint8Array(Array.prototype.slice.call(t,0)),En=t=>t.replace(/=/g,"").replace(/[+\/]/g,e=>e=="+"?"-":"_"),_n=t=>t.replace(/[^A-Za-z0-9\+\/]/g,""),An=t=>{let e,r,n,i,o="";const s=t.length%3;for(let u=0;u<t.length;){if((r=t.charCodeAt(u++))>255||(n=t.charCodeAt(u++))>255||(i=t.charCodeAt(u++))>255)throw new TypeError("invalid character found");e=r<<16|n<<8|i,o+=gt[e>>18&63]+gt[e>>12&63]+gt[e>>6&63]+gt[e&63]}return s?o.slice(0,s-3)+"===".substring(s):o},xr=ho?t=>btoa(t):ft?t=>Buffer.from(t,"binary").toString("base64"):An,fr=ft?t=>Buffer.from(t).toString("base64"):t=>{let r=[];for(let n=0,i=t.length;n<i;n+=4096)r.push(pe.apply(null,t.subarray(n,n+4096)));return xr(r.join(""))},Nt=(t,e=!1)=>e?En(fr(t)):fr(t),go=t=>{if(t.length<2){var e=t.charCodeAt(0);return e<128?t:e<2048?pe(192|e>>>6)+pe(128|e&63):pe(224|e>>>12&15)+pe(128|e>>>6&63)+pe(128|e&63)}else{var e=65536+(t.charCodeAt(0)-55296)*1024+(t.charCodeAt(1)-56320);return pe(240|e>>>18&7)+pe(128|e>>>12&63)+pe(128|e>>>6&63)+pe(128|e&63)}},yo=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,Sn=t=>t.replace(yo,go),Kr=ft?t=>Buffer.from(t,"utf8").toString("base64"):Zr?t=>fr(Zr.encode(t)):t=>xr(Sn(t)),st=(t,e=!1)=>e?En(Kr(t)):Kr(t),Xr=t=>st(t,!0),mo=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,wo=t=>{switch(t.length){case 4:var e=(7&t.charCodeAt(0))<<18|(63&t.charCodeAt(1))<<12|(63&t.charCodeAt(2))<<6|63&t.charCodeAt(3),r=e-65536;return pe((r>>>10)+55296)+pe((r&1023)+56320);case 3:return pe((15&t.charCodeAt(0))<<12|(63&t.charCodeAt(1))<<6|63&t.charCodeAt(2));default:return pe((31&t.charCodeAt(0))<<6|63&t.charCodeAt(1))}},Nn=t=>t.replace(mo,wo),On=t=>{if(t=t.replace(/\s+/g,""),!po.test(t))throw new TypeError("malformed base64.");t+="==".slice(2-(t.length&3));let e,r="",n,i;for(let o=0;o<t.length;)e=At[t.charAt(o++)]<<18|At[t.charAt(o++)]<<12|(n=At[t.charAt(o++)])<<6|(i=At[t.charAt(o++)]),r+=n===64?pe(e>>16&255):i===64?pe(e>>16&255,e>>8&255):pe(e>>16&255,e>>8&255,e&255);return r},Er=co?t=>atob(_n(t)):ft?t=>Buffer.from(t,"base64").toString("binary"):On,Tn=ft?t=>qr(Buffer.from(t,"base64")):t=>qr(Er(t).split("").map(e=>e.charCodeAt(0))),In=t=>Tn(Un(t)),bo=ft?t=>Buffer.from(t,"base64").toString("utf8"):Yr?t=>Yr.decode(Tn(t)):t=>Nn(Er(t)),Un=t=>_n(t.replace(/[-_]/g,e=>e=="-"?"+":"/")),ur=t=>bo(Un(t)),vo=t=>{if(typeof t!="string")return!1;const e=t.replace(/\s+/g,"").replace(/={0,2}$/,"");return!/[^\s0-9a-zA-Z\+/]/.test(e)||!/[^\s0-9a-zA-Z\-_]/.test(e)},Bn=t=>({value:t,enumerable:!1,writable:!0,configurable:!0}),Rn=function(){const t=(e,r)=>Object.defineProperty(String.prototype,e,Bn(r));t("fromBase64",function(){return ur(this)}),t("toBase64",function(e){return st(this,e)}),t("toBase64URI",function(){return st(this,!0)}),t("toBase64URL",function(){return st(this,!0)}),t("toUint8Array",function(){return In(this)})},Fn=function(){const t=(e,r)=>Object.defineProperty(Uint8Array.prototype,e,Bn(r));t("toBase64",function(e){return Nt(this,e)}),t("toBase64URI",function(){return Nt(this,!0)}),t("toBase64URL",function(){return Nt(this,!0)})},xo=()=>{Rn(),Fn()},It={version:xn,VERSION:uo,atob:Er,atobPolyfill:On,btoa:xr,btoaPolyfill:An,fromBase64:ur,toBase64:st,encode:st,encodeURI:Xr,encodeURL:Xr,utob:Sn,btou:Nn,decode:ur,isValid:vo,fromUint8Array:Nt,toUint8Array:In,extendString:Rn,extendUint8Array:Fn,extendBuiltins:xo},Eo={relaxed:!1};function kn(t){return Ke.serialize(t,Eo)}function Cn(t){return Array.isArray(t)?t.map(e=>Ke.deserialize(e)):Ke.deserialize(t)}var cr;(function(t){t.Normal="normal",t.Server="server"})(cr||(cr={}));var Ie;(function(t){t.NAME="name",t.EMAIL="email",t.PICTURE="picture",t.FIRST_NAME="first_name",t.LAST_NAME="last_name",t.GENDER="gender",t.BIRTHDAY="birthday",t.MIN_AGE="min_age",t.MAX_AGE="max_age"})(Ie||(Ie={}));const Qr={[Ie.NAME]:"name",[Ie.EMAIL]:"email",[Ie.PICTURE]:"pictureUrl",[Ie.FIRST_NAME]:"firstName",[Ie.LAST_NAME]:"lastName",[Ie.GENDER]:"gender",[Ie.BIRTHDAY]:"birthday",[Ie.MIN_AGE]:"minAge",[Ie.MAX_AGE]:"maxAge"};class Mn{constructor(e){if(this.type=cr.Normal,this.identities=[],typeof e=="object"&&e!==null){const{type:r,identities:n,data:i}=e;if(typeof r=="string")this.type=r;else throw new Error("Expected 'type' in the response body");if(Array.isArray(n))this.identities=n.map(o=>{const{id:s,provider_type:u}=o;return{id:s,providerType:u}});else throw new Error("Expected 'identities' in the response body");if(typeof i=="object"&&i!==null){const o=Object.fromEntries(Object.entries(i).map(([s,u])=>s in Qr?[Qr[s],u]:[s,u]));this.data=Cn(o)}else throw new Error("Expected 'data' in the response body")}else this.data={}}}class Ue{constructor(e,r){this.storage=e,this.keyPart=r}get(e){return this.storage.get(this.keyPart+Ue.PART_SEPARATOR+e)}set(e,r){return this.storage.set(this.keyPart+Ue.PART_SEPARATOR+e,r)}remove(e){return this.storage.remove(this.keyPart+Ue.PART_SEPARATOR+e)}prefix(e){return new Ue(this,e)}clear(e=""){return this.storage.clear(this.keyPart+Ue.PART_SEPARATOR+e)}addListener(e){return this.storage.addListener(e)}removeListener(e){return this.storage.addListener(e)}}Ue.PART_SEPARATOR=":";class _o{constructor(){this.storage={},this.listeners=new Set}get(e){return e in this.storage?this.storage[e]:null}set(e,r){this.storage[e]=r,this.fireListeners()}remove(e){delete this.storage[e],this.fireListeners()}prefix(e){return new Ue(this,e)}clear(e){for(const r of Object.keys(this.storage))(!e||r.startsWith(e))&&delete this.storage[r];this.fireListeners()}addListener(e){this.listeners.add(e)}removeListener(e){this.listeners.delete(e)}fireListeners(){this.listeners.forEach(e=>e())}}const er="accessToken",tr="refreshToken",rr="profile",nr="providerType";class Ao extends Ue{constructor(e,r){super(e,`user(${r})`)}get accessToken(){return this.get(er)}set accessToken(e){e===null?this.remove(er):this.set(er,e)}get refreshToken(){return this.get(tr)}set refreshToken(e){e===null?this.remove(tr):this.set(tr,e)}get profile(){const e=this.get(rr);if(e){const r=new Mn;return Object.assign(r,JSON.parse(e)),r}}set profile(e){e?this.set(rr,JSON.stringify(e)):this.remove(rr)}get providerType(){const e=this.get(nr);if(e)return e}set providerType(e){e?this.set(nr,e):this.remove(nr)}}function hr(t){return Object.fromEntries(Object.entries(t).filter(e=>typeof e[1]<"u"))}function So(t,e){let r="";for(let n=0;n<t;n++)r+=e[Math.floor(Math.random()*e.length)];return r}function Ln(t,e=!0){const r=hr(t);return(e&&Object.keys(r).length>0?"?":"")+Object.entries(r).map(([i,o])=>`${i}=${encodeURIComponent(o)}`).join("&")}function No(t){const e=t[0]==="?"?t.substr(1):t;return Object.fromEntries(e.split("&").filter(r=>r.length>0).map(r=>r.split("=")).map(([r,n])=>[r,decodeURIComponent(n)]))}const Oo=["inspect","callFunction","callFunctionStreaming",...Object.getOwnPropertyNames(Object.prototype)];function To(t){for(const e of t)if(typeof e=="object"&&e)for(const[r,n]of Object.entries(e))n===void 0&&delete e[r];return t}function Io(t){return To(t).map(r=>typeof r=="object"?kn(r):r)}class Ht{static create(e,r={}){const n=new Ht(e,r);return new Proxy(n,{get(i,o,s){if(typeof o=="string"&&Oo.indexOf(o)===-1)return i.callFunction.bind(i,o);{const u=Reflect.get(i,o,s);return typeof u=="function"?u.bind(i):u}}})}constructor(e,r={}){this.fetcher=e,this.serviceName=r.serviceName,this.argsTransformation=r.argsTransformation||Io}async callFunction(e,...r){const n={name:e,arguments:this.argsTransformation?this.argsTransformation(r):r};this.serviceName&&(n.service=this.serviceName);const i=this.fetcher.appRoute;return this.fetcher.fetchJSON({method:"POST",path:i.functionsCall().path,body:n})}callFunctionStreaming(e,...r){const n={name:e,arguments:this.argsTransformation?this.argsTransformation(r):r};this.serviceName&&(n.service=this.serviceName);const i=this.fetcher.appRoute,o=Ln({baas_request:It.encode(JSON.stringify(n))});return this.fetcher.fetchStream({method:"GET",path:i.functionsCall().path+o})}}class Uo{constructor(e,r="local-userpass"){this.fetcher=e,this.providerName=r}async registerUser(e){const r=this.fetcher.appRoute;await this.fetcher.fetchJSON({method:"POST",path:r.emailPasswordAuth(this.providerName).register().path,body:e})}async confirmUser(e){const r=this.fetcher.appRoute;await this.fetcher.fetchJSON({method:"POST",path:r.emailPasswordAuth(this.providerName).confirm().path,body:e})}async resendConfirmationEmail(e){const r=this.fetcher.appRoute;await this.fetcher.fetchJSON({method:"POST",path:r.emailPasswordAuth(this.providerName).confirmSend().path,body:e})}async retryCustomConfirmation(e){const r=this.fetcher.appRoute;await this.fetcher.fetchJSON({method:"POST",path:r.emailPasswordAuth(this.providerName).confirmCall().path,body:e})}async resetPassword(e){const r=this.fetcher.appRoute;await this.fetcher.fetchJSON({method:"POST",path:r.emailPasswordAuth(this.providerName).reset().path,body:e})}async sendResetPasswordEmail(e){const r=this.fetcher.appRoute;await this.fetcher.fetchJSON({method:"POST",path:r.emailPasswordAuth(this.providerName).resetSend().path,body:e})}async callResetPasswordFunction(e,...r){const n=this.fetcher.appRoute;await this.fetcher.fetchJSON({method:"POST",path:n.emailPasswordAuth(this.providerName).resetCall().path,body:{...e,arguments:r}})}}function Bo(){return{path:"/api/client/v2.0",app(t){return{path:this.path+`/app/${t}`,location(){return{path:this.path+"/location"}},authProvider(e){return{path:this.path+`/auth/providers/${e}`,login(){return{path:this.path+"/login"}}}},emailPasswordAuth(e){return{...this.authProvider(e),register(){return{path:this.path+"/register"}},confirm(){return{path:this.path+"/confirm"}},confirmSend(){return{path:this.path+"/confirm/send"}},confirmCall(){return{path:this.path+"/confirm/call"}},reset(){return{path:this.path+"/reset"}},resetSend(){return{path:this.path+"/reset/send"}},resetCall(){return{path:this.path+"/reset/call"}}}},functionsCall(){return{path:this.path+"/functions/call"}}}},auth(){return{path:this.path+"/auth",apiKeys(){return{path:this.path+"/api_keys",key(t){return{path:this.path+`/${t}`,enable(){return{path:this.path+"/enable"}},disable(){return{path:this.path+"/disable"}}}}}},profile(){return{path:this.path+"/profile"}},session(){return{path:this.path+"/session"}},delete(){return{path:this.path+"/delete"}}}}}}var Se={api:Bo};class Ro{constructor(e){this.fetcher=e}create(e){return this.fetcher.fetchJSON({method:"POST",body:{name:e},path:Se.api().auth().apiKeys().path,tokenType:"refresh"})}fetch(e){return this.fetcher.fetchJSON({method:"GET",path:Se.api().auth().apiKeys().key(e).path,tokenType:"refresh"})}fetchAll(){return this.fetcher.fetchJSON({method:"GET",tokenType:"refresh",path:Se.api().auth().apiKeys().path})}async delete(e){await this.fetcher.fetchJSON({method:"DELETE",path:Se.api().auth().apiKeys().key(e).path,tokenType:"refresh"})}async enable(e){await this.fetcher.fetchJSON({method:"PUT",path:Se.api().auth().apiKeys().key(e).enable().path,tokenType:"refresh"})}async disable(e){await this.fetcher.fetchJSON({method:"PUT",path:Se.api().auth().apiKeys().key(e).disable().path,tokenType:"refresh"})}}let lr=null;function Fo(t){lr=t}function wt(){if(lr)return lr;throw new Error("Cannot get environment before it's set")}class ir extends Error{constructor({message:e,code:r}){super(e),this.name="WatchError",this.code=r}}var me;(function(t){t.NEED_DATA="NEED_DATA",t.HAVE_EVENT="HAVE_EVENT",t.HAVE_ERROR="HAVE_ERROR"})(me||(me={}));class ko{constructor(){this._state=me.NEED_DATA,this._error=null,this._textDecoder=new(wt()).TextDecoder,this._buffer="",this._bufferOffset=0,this._eventType="",this._dataBuffer=""}feedBuffer(e){this.assertState(me.NEED_DATA),this._buffer+=this._textDecoder.decode(e,{stream:!0}),this.advanceBufferState()}feedLine(e){if(this.assertState(me.NEED_DATA),e.endsWith(`
`)&&(e=e.substr(0,e.length-1)),e.endsWith("\r")&&(e=e.substr(0,e.length-1)),e.length===0){if(this._dataBuffer.length===0){this._eventType="";return}this._dataBuffer.endsWith(`
`)&&(this._dataBuffer=this._dataBuffer.substr(0,this._dataBuffer.length-1)),this.feedSse({data:this._dataBuffer,eventType:this._eventType}),this._dataBuffer="",this._eventType=""}if(e[0]===":")return;const r=e.indexOf(":"),n=e.substr(0,r);let i=r===-1?"":e.substr(r+1);i.startsWith(" ")&&(i=i.substr(1)),n==="event"?this._eventType=i:n==="data"&&(this._dataBuffer+=i,this._dataBuffer+=`
`)}feedSse(e){this.assertState(me.NEED_DATA);const r=e.data.indexOf("%");if(r!==-1){let n="",i=0;for(let o=r;o!==-1;o=e.data.indexOf("%",i)){n+=e.data.substr(i,o-i);const s=e.data.substr(o,3);s==="%25"?n+="%":s==="%0A"?n+=`
`:s==="%0D"?n+="\r":n+=s,i=o+s.length}n+=e.data.substr(i),e.data=n}if(!e.eventType||e.eventType==="message"){try{const n=Ke.parse(e.data);if(typeof n=="object"){this._nextEvent=n,this._state=me.HAVE_EVENT;return}}catch{}this._state=me.HAVE_ERROR,this._error=new ir({message:"server returned malformed event: "+e.data,code:"bad bson parse"})}else if(e.eventType==="error"){this._state=me.HAVE_ERROR,this._error=new ir({message:e.data,code:"unknown"});try{const{error_code:n,error:i}=Ke.parse(e.data);if(typeof n!="string"||typeof i!="string")return;this._error=new ir({message:i,code:n})}catch{return}}}get state(){return this._state}nextEvent(){this.assertState(me.HAVE_EVENT);const e=this._nextEvent;return this._state=me.NEED_DATA,this.advanceBufferState(),e}get error(){return this._error}advanceBufferState(){for(this.assertState(me.NEED_DATA);this.state===me.NEED_DATA;){if(this._bufferOffset===this._buffer.length){this._buffer="",this._bufferOffset=0;return}const e=this._buffer.indexOf(`
`,this._bufferOffset);if(e===-1){this._bufferOffset!==0&&(this._buffer=this._buffer.substr(this._bufferOffset,this._buffer.length-this._bufferOffset),this._bufferOffset=0);return}this.feedLine(this._buffer.substr(this._bufferOffset,e-this._bufferOffset)),this._bufferOffset=e+1}}assertState(e){if(this._state!==e)throw Error(`Expected WatchStream to be in state ${e}, but in state ${this._state}`)}}class Co{constructor(e,r,n,i){this.functions=Ht.create(e,{serviceName:r}),this.databaseName=n,this.collectionName=i,this.serviceName=r,this.fetcher=e}find(e={},r={}){return this.functions.find({database:this.databaseName,collection:this.collectionName,query:e,project:r.projection,sort:r.sort,limit:r.limit})}findOne(e={},r={}){return this.functions.findOne({database:this.databaseName,collection:this.collectionName,query:e,project:r.projection,sort:r.sort})}findOneAndUpdate(e={},r,n={}){return this.functions.findOneAndUpdate({database:this.databaseName,collection:this.collectionName,filter:e,update:r,sort:n.sort,projection:n.projection,upsert:n.upsert,returnNewDocument:n.returnNewDocument})}findOneAndReplace(e={},r,n={}){return this.functions.findOneAndReplace({database:this.databaseName,collection:this.collectionName,filter:e,update:r,sort:n.sort,projection:n.projection,upsert:n.upsert,returnNewDocument:n.returnNewDocument})}findOneAndDelete(e={},r={}){return this.functions.findOneAndReplace({database:this.databaseName,collection:this.collectionName,filter:e,sort:r.sort,projection:r.projection})}aggregate(e){return this.functions.aggregate({database:this.databaseName,collection:this.collectionName,pipeline:e})}count(e={},r={}){return this.functions.count({database:this.databaseName,collection:this.collectionName,query:e,limit:r.limit})}insertOne(e){return this.functions.insertOne({database:this.databaseName,collection:this.collectionName,document:e})}insertMany(e){return this.functions.insertMany({database:this.databaseName,collection:this.collectionName,documents:e})}deleteOne(e={}){return this.functions.deleteOne({database:this.databaseName,collection:this.collectionName,query:e})}deleteMany(e={}){return this.functions.deleteMany({database:this.databaseName,collection:this.collectionName,query:e})}updateOne(e,r,n={}){return this.functions.updateOne({database:this.databaseName,collection:this.collectionName,query:e,update:r,upsert:n.upsert,arrayFilters:n.arrayFilters})}updateMany(e,r,n={}){return this.functions.updateMany({database:this.databaseName,collection:this.collectionName,query:e,update:r,upsert:n.upsert,arrayFilters:n.arrayFilters})}watch({ids:e,filter:r}={}){const i=this.functions.callFunctionStreaming("watch",{database:this.databaseName,collection:this.collectionName,ids:e,filter:r}).then(u=>u[Symbol.asyncIterator]()),o=this.watchImpl(i),s=o.return;return Object.assign(o,{return(u){return i.then(y=>y.return?y.return(u):void 0),s.call(o,u)}})}async*watchImpl(e){const r=new ko,n=e.then(i=>({[Symbol.asyncIterator]:()=>i}));for await(const i of await n)if(i){for(r.feedBuffer(i);r.state==me.HAVE_EVENT;)yield r.nextEvent();if(r.state==me.HAVE_ERROR)throw r.error}}}function Mo(t,e,r,n){return new Co(t,e,r,n)}function Lo(t,e,r){return{collection:Mo.bind(null,t,e,r)}}function Do(t,e="mongo-db"){return{db:Lo.bind(null,t,e)}}const Po="000000000000000000000000";var Ye;(function(t){t.Active="active",t.LoggedOut="logged-out",t.Removed="removed"})(Ye||(Ye={}));var en;(function(t){t.Normal="normal",t.Server="server"})(en||(en={}));class tn{constructor(e){if(this.app=e.app,this.id=e.id,this.storage=new Ao(this.app.storage,this.id),"accessToken"in e&&"refreshToken"in e&&"providerType"in e)this._accessToken=e.accessToken,this._refreshToken=e.refreshToken,this.providerType=e.providerType,this.storage.accessToken=e.accessToken,this.storage.refreshToken=e.refreshToken,this.storage.providerType=e.providerType;else{this._accessToken=this.storage.accessToken,this._refreshToken=this.storage.refreshToken;const r=this.storage.providerType;if(this._profile=this.storage.profile,r)this.providerType=r;else throw new Error("Storage is missing a provider type")}this.fetcher=this.app.fetcher.clone({userContext:{currentUser:this}}),this.apiKeys=new Ro(this.fetcher),this.functions=Ht.create(this.fetcher)}get accessToken(){return this._accessToken}set accessToken(e){this._accessToken=e,this.storage.accessToken=e}get refreshToken(){return this._refreshToken}set refreshToken(e){this._refreshToken=e,this.storage.refreshToken=e}get state(){return this.id in this.app.allUsers?this.refreshToken===null?Ye.LoggedOut:Ye.Active:Ye.Removed}get isLoggedIn(){return this.state===Ye.Active}get customData(){if(this.accessToken)return this.decodeAccessToken().userData;throw new Error("Cannot read custom data without an access token")}get profile(){if(this._profile)return this._profile.data;throw new Error("A profile was never fetched for this user")}get identities(){if(this._profile)return this._profile.identities;throw new Error("A profile was never fetched for this user")}get deviceId(){if(this.accessToken){const e=this.accessToken.split(".")[1];if(e){const n=JSON.parse(It.decode(e)).baas_device_id;if(typeof n=="string"&&n!==Po)return n}}return null}async refreshProfile(){const e=await this.fetcher.fetchJSON({method:"GET",path:Se.api().auth().profile().path});this._profile=new Mn(e),this.storage.profile=this._profile}async logOut(){try{this._refreshToken!==null&&await this.fetcher.fetchJSON({method:"DELETE",path:Se.api().auth().session().path,tokenType:"refresh"})}catch(e){if(!(e instanceof Error)||!e.message.includes("failed to find refresh token"))throw e}finally{this.accessToken=null,this.refreshToken=null}}async linkCredentials(e){const r=await this.app.authenticator.authenticate(e,this);if(this.id!==r.userId){const n=`got user id ${r.userId} expected ${this.id}`;throw new Error(`Link response ment for another user (${n})`)}this.accessToken=r.accessToken,await this.refreshProfile()}async refreshAccessToken(){const e=await this.fetcher.fetchJSON({method:"POST",path:Se.api().auth().session().path,tokenType:"refresh"}),{access_token:r}=e;if(typeof r=="string")this.accessToken=r;else throw new Error("Expected an 'access_token' in the response")}async refreshCustomData(){return await this.refreshAccessToken(),this.customData}addListener(){throw new Error("Not yet implemented")}removeListener(){throw new Error("Not yet implemented")}removeAllListeners(){throw new Error("Not yet implemented")}callFunction(e,...r){return this.functions.callFunction(e,...r)}toJSON(){return{id:this.id,accessToken:this.accessToken,refreshToken:this.refreshToken,profile:this._profile,state:this.state,customData:this.customData}}push(){throw new Error("Not yet implemented")}mongoClient(e){return Do(this.fetcher,e)}decodeAccessToken(){if(this.accessToken){const e=this.accessToken.split(".");if(e.length!==3)throw new Error("Expected an access token with three parts");const r=e[1],n=It.decode(r),i=JSON.parse(n),{exp:o,iat:s,sub:u,user_data:y={}}=i;if(typeof o!="number")throw new Error("Failed to decode access token 'exp'");if(typeof s!="number")throw new Error("Failed to decode access token 'iat'");return{expires:o,issuedAt:s,subject:u,userData:y}}else throw new Error("Missing an access token")}}class Ae{static anonymous(e=!0){return new Ae("anon-user","anon-user",e,{})}static apiKey(e){return new Ae("api-key","api-key",!1,{key:e})}static emailPassword(e,r){return new Ae("local-userpass","local-userpass",!1,{username:e,password:r})}static function(e){return new Ae("custom-function","custom-function",!1,e)}static jwt(e){return new Ae("custom-token","custom-token",!1,{token:e})}static google(e){return new Ae("oauth2-google","oauth2-google",!1,Ae.derivePayload(e))}static derivePayload(e){if(typeof e=="string")throw new Error("`google(<tokenString>)` has been deprecated.  Please use `google(<authCodeObject>).");if(Object.keys(e).length===1){if("authCode"in e||"redirectUrl"in e)return e;if("idToken"in e)return{id_token:e.idToken};throw new Error("Unexpected payload: "+JSON.stringify(e))}else throw new Error("Expected only one property in payload, got "+JSON.stringify(e))}static facebook(e){return new Ae("oauth2-facebook","oauth2-facebook",!1,e.includes("://")?{redirectUrl:e}:{accessToken:e})}static apple(e){return new Ae("oauth2-apple","oauth2-apple",!1,e.includes("://")?{redirectUrl:e}:{id_token:e})}constructor(e,r,n,i){this.providerName=e,this.providerType=r,this.reuse=n,this.payload=i}}const rn="userIds",nn="deviceId";class jo extends Ue{constructor(e,r){super(e,`app(${r})`)}getUserIds(){const e=this.get(rn),r=e?JSON.parse(e):[];if(Array.isArray(r))return[...new Set(r)];throw new Error("Expected the user ids to be an array")}setUserIds(e,r){if(r){const n=this.getUserIds();for(const i of n)e.indexOf(i)===-1&&e.push(i)}this.set(rn,JSON.stringify(e))}removeUserId(e){const n=this.getUserIds().filter(i=>i!==e);this.setUserIds(n,!1)}getDeviceId(){return this.get(nn)}setDeviceId(e){this.set(nn,e)}}const $o="abcdefghijklmnopqrstuvwxyz",Ho=100,Wo={_baas_client_app_id:"appId",_baas_ua:"userAuth",_baas_link:"link",_baas_error:"error",_baas_state:"state"};class at{static parseRedirectLocation(e){const r=No(e),n={};for(const[i,o]of Object.entries(Wo)){const s=r[i];s&&(n[o]=s)}return n}static handleRedirect(e,r=wt().defaultStorage){const n=at.parseRedirectLocation(e),{state:i,error:o}=n;if(typeof i=="string"){const s=r.prefix("oauth2");at.getStateStorage(s,i).set("result",JSON.stringify(n))}else throw o?new Error(`Failed to handle OAuth 2.0 redirect: ${o}`):new Error("Failed to handle OAuth 2.0 redirect.")}static decodeAuthInfo(e){const r=(e||"").split("$");if(r.length===4){const[n,i,o,s]=r;return{accessToken:n,refreshToken:i,userId:o,deviceId:s}}else throw new Error("Failed to decode 'authInfo' into ids and tokens")}static getStateStorage(e,r){return e.prefix(`state(${r})`)}constructor(e,r=wt().openWindow){this.storage=e.prefix("oauth2"),this.openWindow=r}openWindowAndWaitForRedirect(e,r){const n=at.getStateStorage(this.storage,r);return new Promise((i,o)=>{let s=null,u;const y=()=>{const E=n.get("result");if(E){const c=JSON.parse(E);n.removeListener(y),n.clear();try{s&&(clearInterval(u),s.close())}catch(l){console.warn(`Failed closing redirect window: ${l}`)}finally{i(c)}}};n.addListener(y),s=this.openWindow(e),u=setInterval(()=>{if(!s)clearInterval(u);else if(s.closed){clearInterval(u),n.removeListener(y);const E=new Error("Window closed");o(E)}},Ho)})}generateState(){return So(12,$o)}}const on="x-baas-location";class Vo{constructor(e,r,n){this.fetcher=e,this.oauth2=new at(r),this.getDeviceInformation=n}async authenticate(e,r){const n=this.getDeviceInformation(),i=typeof r=="object";if(e.providerType.startsWith("oauth2")&&typeof e.payload.redirectUrl=="string"){const o=this.oauth2.generateState(),s=await this.getLogInUrl(e,i,{state:o,redirect:e.payload.redirectUrl,providerRedirectHeader:i?!0:void 0,device:i?void 0:n.encode()});if(i){const y=(await this.fetcher.fetch({method:"GET",url:s,tokenType:i?"access":"none",user:r,mode:"cors",credentials:"include"})).headers.get(on);if(y)return this.openWindowAndWaitForAuthResponse(y,o);throw new Error(`Missing ${on} header`)}else return this.openWindowAndWaitForAuthResponse(s,o)}else{const o=await this.getLogInUrl(e,i),s=await this.fetcher.fetchJSON({method:"POST",url:o,body:{...e.payload,options:{device:n.toJSON()}},tokenType:i?"access":"none",user:r}),{user_id:u,access_token:y,refresh_token:E=null,device_id:c}=s;if(typeof u!="string")throw new Error("Expected a user id in the response");if(typeof y!="string")throw new Error("Expected an access token in the response");if(typeof E!="string"&&E!==null)throw new Error("Expected refresh token to be a string or null");if(typeof c!="string")throw new Error("Expected device id to be a string");return{userId:u,accessToken:y,refreshToken:E,deviceId:c}}}async getLogInUrl(e,r=!1,n={}){const o=this.fetcher.appRoute.authProvider(e.providerName).login(),s=Ln({link:r?"true":void 0,...n});return await this.fetcher.locationUrl+o.path+s}async openWindowAndWaitForAuthResponse(e,r){const n=await this.oauth2.openWindowAndWaitForRedirect(e,r);return at.decodeAuthInfo(n.userAuth)}}class Ut extends Error{static async fromRequestAndResponse(e,r,n){var i;const{method:o="unknown"}=r,{status:s,statusText:u}=n;if(!((i=n.headers.get("content-type"))===null||i===void 0)&&i.startsWith("application/json")){const y=await n.json();if(typeof y=="object"&&y){const{error:E,error_code:c,link:l}=y;return new Ut(o,e,s,u,typeof E=="string"?E:void 0,typeof c=="string"?c:void 0,typeof l=="string"?l:void 0)}}return new Ut(o,e,s,u)}constructor(e,r,n,i,o,s,u){const y=i?`status ${n} ${i}`:`status ${n}`;typeof o=="string"?super(`Request failed (${e} ${r}): ${o} (${y})`):super(`Request failed (${e} ${r}): (${y})`),this.method=e,this.url=r,this.statusText=i,this.statusCode=n,this.error=o,this.errorCode=s,this.link=u}}function Jo({body:t}){if(typeof t!="object"||t===null)throw new Error("Expected a non-null object");if("getReader"in t)return{[Symbol.asyncIterator](){const e=t.getReader();return{async next(){const{done:r,value:n}=await e.read();if(r)return{done:r,value:void 0};if(n instanceof Uint8Array)return{done:r,value:n};throw new Error("Expected value to be Uint8Array")},async return(){return await e.cancel(),{done:!0,value:null}}}}};throw new Error("Expected an AsyncIterable or a ReadableStream")}class it{static buildAuthorizationHeader(e,r){if(!e||r==="none")return{};if(r==="access")return{Authorization:`Bearer ${e.accessToken}`};if(r==="refresh")return{Authorization:`Bearer ${e.refreshToken}`};throw new Error(`Unexpected token type (${r})`)}static buildBody(e){if(e){if(typeof e=="object"&&e!==null)return JSON.stringify(kn(e));if(typeof e=="string")return e;throw console.log("body is",e),new Error("Unexpected type of body")}else return}static buildJsonHeader(e){return e&&e.length>0?{"Content-Type":"application/json"}:{}}constructor(e){this.config=e}clone(e){return new it({...this.config,...e})}async fetch(e){const{path:r,url:n,tokenType:i="access",user:o=this.config.userContext.currentUser,...s}=e;if(typeof r=="string"&&typeof n=="string")throw new Error("Use of 'url' and 'path' mutually exclusive");if(typeof r=="string"){const u=await this.config.locationUrlContext.locationUrl+r;return this.fetch({...e,path:void 0,url:u})}else if(typeof n=="string"){const u=await this.config.fetch(n,{...s,headers:{...it.buildAuthorizationHeader(o,i),...e.headers}});if(u.ok)return u;{const y=await Ut.fromRequestAndResponse(n,e,u);if(o&&u.status===401&&(y.errorCode==="InvalidSession"||y.error==="unauthorized")){if(i==="access")return await o.refreshAccessToken(),this.fetch({...e,user:o});i==="refresh"&&(o.accessToken=null,o.refreshToken=null)}throw y}}else throw new Error("Expected either 'url' or 'path'")}async fetchJSON(e){const{body:r}=e,n=it.buildBody(r),i=it.buildJsonHeader(n),o=await this.fetch({...e,body:n,headers:{Accept:"application/json",...i,...e.headers}}),s=o.headers.get("content-type");if(s!=null&&s.startsWith("application/json")){const u=await o.json();return Cn(u)}else{if(s===null)return null;throw new Error(`Expected JSON response, got "${s}"`)}}async fetchStream(e){const r=await this.fetch({...e,headers:{Accept:"text/event-stream",...e.headers}});return Jo(r)}get appRoute(){return Se.api().app(this.config.appId)}get locationUrl(){return this.config.locationUrlContext.locationUrl}}const zo="deviceId";var sn;(function(t){t.DEVICE_ID="deviceId",t.APP_ID="appId",t.APP_VERSION="appVersion",t.PLATFORM="platform",t.PLATFORM_VERSION="platformVersion",t.SDK_VERSION="sdkVersion"})(sn||(sn={}));class Go{constructor({appId:e,appVersion:r,deviceId:n}){this.sdkVersion="2.0.1";const i=wt();this.platform=i.platform,this.platformVersion=i.platformVersion,this.appId=e,this.appVersion=r,this.deviceId=n}encode(){const e=hr(this);return It.encode(JSON.stringify(e))}toJSON(){return hr(this)}}const Yo="https://services.cloud.mongodb.com";class He{static getApp(e){if(e in He.appCache)return He.appCache[e];{const r=new He(e);return He.appCache[e]=r,r}}constructor(e){var r;this.users=[],this._locationUrl=null;const n=typeof e=="string"?{id:e}:e;if(typeof n=="object"&&typeof n.id=="string")this.id=n.id;else throw new Error("Missing an Atlas App Services app-id");this.baseUrl=n.baseUrl||Yo,n.skipLocationRequest&&(this._locationUrl=Promise.resolve(this.baseUrl)),this.localApp=n.app,this.fetcher=new it({appId:this.id,userContext:this,locationUrlContext:this,fetch:(r=n.fetch)!==null&&r!==void 0?r:fo}),this.emailPasswordAuth=new Uo(this.fetcher);const i=n.storage||wt().defaultStorage;this.storage=new jo(i,this.id),this.authenticator=new Vo(this.fetcher,i,()=>this.deviceInformation);try{this.hydrate()}catch(o){this.storage.clear(),console.warn("Realm app hydration failed:",o instanceof Error?o.message:o)}}switchUser(e){const r=this.users.findIndex(i=>i===e);if(r===-1)throw new Error("The user was never logged into this app");const[n]=this.users.splice(r,1);this.users.unshift(n)}async logIn(e,r=!0){if(e.reuse){const s=this.users.find(u=>u.providerType===e.providerType);if(s)return this.switchUser(s),r&&await s.refreshProfile(),s}const n=await this.authenticator.authenticate(e),i=this.createOrUpdateUser(n,e.providerType);this.switchUser(i),r&&await i.refreshProfile(),this.storage.setUserIds(this.users.map(s=>s.id),!0);const o=n.deviceId;return o&&o!=="000000000000000000000000"&&this.storage.set(zo,o),i}async removeUser(e){const r=this.users.findIndex(n=>n===e);if(r===-1)throw new Error("The user was never logged into this app");this.users.splice(r,1),await e.logOut(),this.storage.remove(`user(${e.id}):profile`),this.storage.removeUserId(e.id)}async deleteUser(e){await this.fetcher.fetchJSON({method:"DELETE",path:Se.api().auth().delete().path}),await this.removeUser(e)}addListener(){throw new Error("Not yet implemented")}removeListener(){throw new Error("Not yet implemented")}removeAllListeners(){throw new Error("Not yet implemented")}get currentUser(){const e=this.users.filter(r=>r.state===Ye.Active);return e.length===0?null:e[0]}get allUsers(){return Object.fromEntries(this.users.map(e=>[e.id,e]))}get locationUrl(){if(!this._locationUrl){const e=Se.api().app(this.id).location().path;this._locationUrl=this.fetcher.fetchJSON({method:"GET",url:this.baseUrl+e,tokenType:"none"}).then(r=>{if(typeof r!="object")throw new Error("Expected response body be an object");return r}).then(({hostname:r})=>{if(typeof r!="string")throw new Error("Expected response to contain a 'hostname'");return r}).catch(r=>{throw this._locationUrl=null,r})}return this._locationUrl}get deviceInformation(){const e=this.storage.getDeviceId(),r=typeof e=="string"&&e!=="000000000000000000000000"?new be(e):void 0;return new Go({appId:this.localApp?this.localApp.name:void 0,appVersion:this.localApp?this.localApp.version:void 0,deviceId:r})}createOrUpdateUser(e,r){const n=this.users.find(i=>i.id===e.userId);if(n)return n.accessToken=e.accessToken,n.refreshToken=e.refreshToken,n;{if(!e.refreshToken)throw new Error("No refresh token in response from server");const i=new tn({app:this,id:e.userId,accessToken:e.accessToken,refreshToken:e.refreshToken,providerType:r});return this.users.unshift(i),i}}hydrate(){const e=this.storage.getUserIds();this.users=e.map(r=>new tn({app:this,id:r}))}}He.appCache={};He.Credentials=Ae;const Zo=t=>{},St=function(t){return t&&t.Math==Math&&t},bt=St(typeof globalThis=="object"&&globalThis)||St(typeof window=="object"&&window)||St(typeof self=="object"&&self)||St(typeof global=="object"&&global)||function(){return this}()||Function("return this")();Zo(typeof __DEV__<"u"&&__DEV__);class qo{constructor(){if(typeof bt.localStorage=="object")this.global=bt;else throw new Error("Cannot use LocalStorage without a global localStorage object")}get(e){return this.global.localStorage.getItem(e)}set(e,r){return this.global.localStorage.setItem(e,r)}remove(e){return this.global.localStorage.removeItem(e)}prefix(e){return new Ue(this,e)}clear(e){const r=[];for(let n=0;n<this.global.localStorage.length;n++){const i=this.global.localStorage.key(n);i&&(!e||i.startsWith(e))&&r.push(i)}for(const n of r)this.global.localStorage.removeItem(n)}addListener(e){return this.global.addEventListener("storage",e)}removeListener(e){return this.global.removeEventListener("storage",e)}}const rt=ro(),Ko="localStorage"in bt?qo:_o;function Xo(t){return typeof bt.open=="function"?bt.open(t):(console.log(`Please open ${t}`),null)}const Qo={defaultStorage:new Ko().prefix("realm-web"),openWindow:Xo,platform:(rt==null?void 0:rt.name)||"web",platformVersion:(rt==null?void 0:rt.version)||"0.0.0",TextDecoder};Fo(Qo);function es(t,e){return e.forEach(function(r){r&&typeof r!="string"&&!Array.isArray(r)&&Object.keys(r).forEach(function(n){if(n!=="default"&&!(n in t)){var i=Object.getOwnPropertyDescriptor(r,n);Object.defineProperty(t,n,i.get?i:{enumerable:!0,get:function(){return r[n]}})}})}),Object.freeze(t)}function Dn(t,e){return new Promise(function(r,n){let i;return ts(t).then(function(o){try{return i=o,r(new Blob([e.slice(0,2),i,e.slice(2)],{type:"image/jpeg"}))}catch(s){return n(s)}},n)})}const ts=t=>new Promise((e,r)=>{const n=new FileReader;n.addEventListener("load",({target:{result:i}})=>{const o=new DataView(i);let s=0;if(o.getUint16(s)!==65496)return r("not a valid JPEG");for(s+=2;;){const u=o.getUint16(s);if(u===65498)break;const y=o.getUint16(s+2);if(u===65505&&o.getUint32(s+4)===1165519206){const E=s+10;let c;switch(o.getUint16(E)){case 18761:c=!0;break;case 19789:c=!1;break;default:return r("TIFF header contains invalid endian")}if(o.getUint16(E+2,c)!==42)return r("TIFF header contains invalid version");const l=o.getUint32(E+4,c),h=E+l+2+12*o.getUint16(E+l,c);for(let p=E+l+2;p<h;p+=12)if(o.getUint16(p,c)==274){if(o.getUint16(p+2,c)!==3)return r("Orientation data type is invalid");if(o.getUint32(p+4,c)!==1)return r("Orientation data count is invalid");o.setUint16(p+8,1,c);break}return e(i.slice(s,s+2+y))}s+=2+y}return e(new Blob)}),n.readAsArrayBuffer(t)});var Bt={},rs={get exports(){return Bt},set exports(t){Bt=t}};(function(t){var e,r,n={};rs.exports=n,n.parse=function(i,o){for(var s=n.bin.readUshort,u=n.bin.readUint,y=0,E={},c=new Uint8Array(i),l=c.length-4;u(c,l)!=101010256;)l--;y=l,y+=4;var h=s(c,y+=4);s(c,y+=2);var p=u(c,y+=2),b=u(c,y+=4);y+=4,y=b;for(var O=0;O<h;O++){u(c,y),y+=4,y+=4,y+=4,u(c,y+=4),p=u(c,y+=4);var k=u(c,y+=4),S=s(c,y+=4),L=s(c,y+2),D=s(c,y+4);y+=6;var A=u(c,y+=8);y+=4,y+=S+L+D,n._readLocal(c,A,E,p,k,o)}return E},n._readLocal=function(i,o,s,u,y,E){var c=n.bin.readUshort,l=n.bin.readUint;l(i,o),c(i,o+=4),c(i,o+=2);var h=c(i,o+=2);l(i,o+=2),l(i,o+=4),o+=4;var p=c(i,o+=8),b=c(i,o+=2);o+=2;var O=n.bin.readUTF8(i,o,p);if(o+=p,o+=b,E)s[O]={size:y,csize:u};else{var k=new Uint8Array(i.buffer,o);if(h==0)s[O]=new Uint8Array(k.buffer.slice(o,o+u));else{if(h!=8)throw"unknown compression method: "+h;var S=new Uint8Array(y);n.inflateRaw(k,S),s[O]=S}}},n.inflateRaw=function(i,o){return n.F.inflate(i,o)},n.inflate=function(i,o){return i[0],i[1],n.inflateRaw(new Uint8Array(i.buffer,i.byteOffset+2,i.length-6),o)},n.deflate=function(i,o){o==null&&(o={level:6});var s=0,u=new Uint8Array(50+Math.floor(1.1*i.length));u[s]=120,u[s+1]=156,s+=2,s=n.F.deflateRaw(i,u,s,o.level);var y=n.adler(i,0,i.length);return u[s+0]=y>>>24&255,u[s+1]=y>>>16&255,u[s+2]=y>>>8&255,u[s+3]=y>>>0&255,new Uint8Array(u.buffer,0,s+4)},n.deflateRaw=function(i,o){o==null&&(o={level:6});var s=new Uint8Array(50+Math.floor(1.1*i.length)),u=n.F.deflateRaw(i,s,u,o.level);return new Uint8Array(s.buffer,0,u)},n.encode=function(i,o){o==null&&(o=!1);var s=0,u=n.bin.writeUint,y=n.bin.writeUshort,E={};for(var c in i){var l=!n._noNeed(c)&&!o,h=i[c],p=n.crc.crc(h,0,h.length);E[c]={cpr:l,usize:h.length,crc:p,file:l?n.deflateRaw(h):h}}for(var c in E)s+=E[c].file.length+30+46+2*n.bin.sizeUTF8(c);s+=22;var b=new Uint8Array(s),O=0,k=[];for(var c in E){var S=E[c];k.push(O),O=n._writeHeader(b,O,c,S,0)}var L=0,D=O;for(var c in E)S=E[c],k.push(O),O=n._writeHeader(b,O,c,S,1,k[L++]);var A=O-D;return u(b,O,101010256),O+=4,y(b,O+=4,L),y(b,O+=2,L),u(b,O+=2,A),u(b,O+=4,D),O+=4,O+=2,b.buffer},n._noNeed=function(i){var o=i.split(".").pop().toLowerCase();return"png,jpg,jpeg,zip".indexOf(o)!=-1},n._writeHeader=function(i,o,s,u,y,E){var c=n.bin.writeUint,l=n.bin.writeUshort,h=u.file;return c(i,o,y==0?67324752:33639248),o+=4,y==1&&(o+=2),l(i,o,20),l(i,o+=2,0),l(i,o+=2,u.cpr?8:0),c(i,o+=2,0),c(i,o+=4,u.crc),c(i,o+=4,h.length),c(i,o+=4,u.usize),l(i,o+=4,n.bin.sizeUTF8(s)),l(i,o+=2,0),o+=2,y==1&&(o+=2,o+=2,c(i,o+=6,E),o+=4),o+=n.bin.writeUTF8(i,o,s),y==0&&(i.set(h,o),o+=h.length),o},n.crc={table:function(){for(var i=new Uint32Array(256),o=0;o<256;o++){for(var s=o,u=0;u<8;u++)1&s?s=3988292384^s>>>1:s>>>=1;i[o]=s}return i}(),update:function(i,o,s,u){for(var y=0;y<u;y++)i=n.crc.table[255&(i^o[s+y])]^i>>>8;return i},crc:function(i,o,s){return 4294967295^n.crc.update(4294967295,i,o,s)}},n.adler=function(i,o,s){for(var u=1,y=0,E=o,c=o+s;E<c;){for(var l=Math.min(E+5552,c);E<l;)y+=u+=i[E++];u%=65521,y%=65521}return y<<16|u},n.bin={readUshort:function(i,o){return i[o]|i[o+1]<<8},writeUshort:function(i,o,s){i[o]=255&s,i[o+1]=s>>8&255},readUint:function(i,o){return 16777216*i[o+3]+(i[o+2]<<16|i[o+1]<<8|i[o])},writeUint:function(i,o,s){i[o]=255&s,i[o+1]=s>>8&255,i[o+2]=s>>16&255,i[o+3]=s>>24&255},readASCII:function(i,o,s){for(var u="",y=0;y<s;y++)u+=String.fromCharCode(i[o+y]);return u},writeASCII:function(i,o,s){for(var u=0;u<s.length;u++)i[o+u]=s.charCodeAt(u)},pad:function(i){return i.length<2?"0"+i:i},readUTF8:function(i,o,s){for(var u,y="",E=0;E<s;E++)y+="%"+n.bin.pad(i[o+E].toString(16));try{u=decodeURIComponent(y)}catch{return n.bin.readASCII(i,o,s)}return u},writeUTF8:function(i,o,s){for(var u=s.length,y=0,E=0;E<u;E++){var c=s.charCodeAt(E);if(!(4294967168&c))i[o+y]=c,y++;else if(!(4294965248&c))i[o+y]=192|c>>6,i[o+y+1]=128|c>>0&63,y+=2;else if(!(4294901760&c))i[o+y]=224|c>>12,i[o+y+1]=128|c>>6&63,i[o+y+2]=128|c>>0&63,y+=3;else{if(4292870144&c)throw"e";i[o+y]=240|c>>18,i[o+y+1]=128|c>>12&63,i[o+y+2]=128|c>>6&63,i[o+y+3]=128|c>>0&63,y+=4}}return y},sizeUTF8:function(i){for(var o=i.length,s=0,u=0;u<o;u++){var y=i.charCodeAt(u);if(!(4294967168&y))s++;else if(!(4294965248&y))s+=2;else if(!(4294901760&y))s+=3;else{if(4292870144&y)throw"e";s+=4}}return s}},n.F={},n.F.deflateRaw=function(i,o,s,u){var y=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][u],E=n.F.U,c=n.F._goodIndex;n.F._hash;var l=n.F._putsE,h=0,p=s<<3,b=0,O=i.length;if(u==0){for(;h<O;)l(o,p,h+(R=Math.min(65535,O-h))==O?1:0),p=n.F._copyExact(i,h,R,o,p+8),h+=R;return p>>>3}var k=E.lits,S=E.strt,L=E.prev,D=0,A=0,H=0,_=0,P=0,v=0;for(O>2&&(S[v=n.F._hash(i,0)]=0),h=0;h<O;h++){if(P=v,h+1<O-2){v=n.F._hash(i,h+1);var w=h+1&32767;L[w]=S[v],S[v]=w}if(b<=h){(D>14e3||A>26697)&&O-h>100&&(b<h&&(k[D]=h-b,D+=2,b=h),p=n.F._writeBlock(h==O-1||b==O?1:0,k,D,_,i,H,h-H,o,p),D=A=_=0,H=h);var T=0;h<O-2&&(T=n.F._bestMatch(i,h,L,P,Math.min(y[2],O-h),y[3]));var R=T>>>16,U=65535&T;if(T!=0){U=65535&T;var F=c(R=T>>>16,E.of0);E.lhst[257+F]++;var N=c(U,E.df0);E.dhst[N]++,_+=E.exb[F]+E.dxb[N],k[D]=R<<23|h-b,k[D+1]=U<<16|F<<8|N,D+=2,b=h+R}else E.lhst[i[h]]++;A++}}for(H==h&&i.length!=0||(b<h&&(k[D]=h-b,D+=2,b=h),p=n.F._writeBlock(1,k,D,_,i,H,h-H,o,p),D=0,A=0,D=A=_=0,H=h);7&p;)p++;return p>>>3},n.F._bestMatch=function(i,o,s,u,y,E){var c=32767&o,l=s[c],h=c-l+32768&32767;if(l==c||u!=n.F._hash(i,o-h))return 0;for(var p=0,b=0,O=Math.min(32767,o);h<=O&&--E!=0&&l!=c;){if(p==0||i[o+p]==i[o+p-h]){var k=n.F._howLong(i,o,h);if(k>p){if(b=h,(p=k)>=y)break;h+2<k&&(k=h+2);for(var S=0,L=0;L<k-2;L++){var D=o-h+L+32768&32767,A=D-s[D]+32768&32767;A>S&&(S=A,l=D)}}}h+=(c=l)-(l=s[c])+32768&32767}return p<<16|b},n.F._howLong=function(i,o,s){if(i[o]!=i[o-s]||i[o+1]!=i[o+1-s]||i[o+2]!=i[o+2-s])return 0;var u=o,y=Math.min(i.length,o+258);for(o+=3;o<y&&i[o]==i[o-s];)o++;return o-u},n.F._hash=function(i,o){return(i[o]<<8|i[o+1])+(i[o+2]<<4)&65535},n.saved=0,n.F._writeBlock=function(i,o,s,u,y,E,c,l,h){var p,b,O,k,S,L,D,A,H,_=n.F.U,P=n.F._putsF,v=n.F._putsE;_.lhst[256]++,b=(p=n.F.getTrees())[0],O=p[1],k=p[2],S=p[3],L=p[4],D=p[5],A=p[6],H=p[7];var w=32+(h+3&7?8-(h+3&7):0)+(c<<3),T=u+n.F.contSize(_.fltree,_.lhst)+n.F.contSize(_.fdtree,_.dhst),R=u+n.F.contSize(_.ltree,_.lhst)+n.F.contSize(_.dtree,_.dhst);R+=14+3*D+n.F.contSize(_.itree,_.ihst)+(2*_.ihst[16]+3*_.ihst[17]+7*_.ihst[18]);for(var U=0;U<286;U++)_.lhst[U]=0;for(U=0;U<30;U++)_.dhst[U]=0;for(U=0;U<19;U++)_.ihst[U]=0;var F=w<T&&w<R?0:T<R?1:2;if(P(l,h,i),P(l,h+1,F),h+=3,F==0){for(;7&h;)h++;h=n.F._copyExact(y,E,c,l,h)}else{var N,C;if(F==1&&(N=_.fltree,C=_.fdtree),F==2){n.F.makeCodes(_.ltree,b),n.F.revCodes(_.ltree,b),n.F.makeCodes(_.dtree,O),n.F.revCodes(_.dtree,O),n.F.makeCodes(_.itree,k),n.F.revCodes(_.itree,k),N=_.ltree,C=_.dtree,v(l,h,S-257),v(l,h+=5,L-1),v(l,h+=5,D-4),h+=4;for(var x=0;x<D;x++)v(l,h+3*x,_.itree[1+(_.ordr[x]<<1)]);h+=3*D,h=n.F._codeTiny(A,_.itree,l,h),h=n.F._codeTiny(H,_.itree,l,h)}for(var g=E,j=0;j<s;j+=2){for(var B=o[j],M=B>>>23,G=g+(8388607&B);g<G;)h=n.F._writeLit(y[g++],N,l,h);if(M!=0){var z=o[j+1],Y=z>>16,J=z>>8&255,$=255&z;v(l,h=n.F._writeLit(257+J,N,l,h),M-_.of0[J]),h+=_.exb[J],P(l,h=n.F._writeLit($,C,l,h),Y-_.df0[$]),h+=_.dxb[$],g+=M}}h=n.F._writeLit(256,N,l,h)}return h},n.F._copyExact=function(i,o,s,u,y){var E=y>>>3;return u[E]=s,u[E+1]=s>>>8,u[E+2]=255-u[E],u[E+3]=255-u[E+1],E+=4,u.set(new Uint8Array(i.buffer,o,s),E),y+(s+4<<3)},n.F.getTrees=function(){for(var i=n.F.U,o=n.F._hufTree(i.lhst,i.ltree,15),s=n.F._hufTree(i.dhst,i.dtree,15),u=[],y=n.F._lenCodes(i.ltree,u),E=[],c=n.F._lenCodes(i.dtree,E),l=0;l<u.length;l+=2)i.ihst[u[l]]++;for(l=0;l<E.length;l+=2)i.ihst[E[l]]++;for(var h=n.F._hufTree(i.ihst,i.itree,7),p=19;p>4&&i.itree[1+(i.ordr[p-1]<<1)]==0;)p--;return[o,s,h,y,c,p,u,E]},n.F.getSecond=function(i){for(var o=[],s=0;s<i.length;s+=2)o.push(i[s+1]);return o},n.F.nonZero=function(i){for(var o="",s=0;s<i.length;s+=2)i[s+1]!=0&&(o+=(s>>1)+",");return o},n.F.contSize=function(i,o){for(var s=0,u=0;u<o.length;u++)s+=o[u]*i[1+(u<<1)];return s},n.F._codeTiny=function(i,o,s,u){for(var y=0;y<i.length;y+=2){var E=i[y],c=i[y+1];u=n.F._writeLit(E,o,s,u);var l=E==16?2:E==17?3:7;E>15&&(n.F._putsE(s,u,c,l),u+=l)}return u},n.F._lenCodes=function(i,o){for(var s=i.length;s!=2&&i[s-1]==0;)s-=2;for(var u=0;u<s;u+=2){var y=i[u+1],E=u+3<s?i[u+3]:-1,c=u+5<s?i[u+5]:-1,l=u==0?-1:i[u-1];if(y==0&&E==y&&c==y){for(var h=u+5;h+2<s&&i[h+2]==y;)h+=2;(p=Math.min(h+1-u>>>1,138))<11?o.push(17,p-3):o.push(18,p-11),u+=2*p-2}else if(y==l&&E==y&&c==y){for(h=u+5;h+2<s&&i[h+2]==y;)h+=2;var p=Math.min(h+1-u>>>1,6);o.push(16,p-3),u+=2*p-2}else o.push(y,0)}return s>>>1},n.F._hufTree=function(i,o,s){var u=[],y=i.length,E=o.length,c=0;for(c=0;c<E;c+=2)o[c]=0,o[c+1]=0;for(c=0;c<y;c++)i[c]!=0&&u.push({lit:c,f:i[c]});var l=u.length,h=u.slice(0);if(l==0)return 0;if(l==1){var p=u[0].lit;return h=p==0?1:0,o[1+(p<<1)]=1,o[1+(h<<1)]=1,1}u.sort(function(A,H){return A.f-H.f});var b=u[0],O=u[1],k=0,S=1,L=2;for(u[0]={lit:-1,f:b.f+O.f,l:b,r:O,d:0};S!=l-1;)b=k!=S&&(L==l||u[k].f<u[L].f)?u[k++]:u[L++],O=k!=S&&(L==l||u[k].f<u[L].f)?u[k++]:u[L++],u[S++]={lit:-1,f:b.f+O.f,l:b,r:O};var D=n.F.setDepth(u[S-1],0);for(D>s&&(n.F.restrictDepth(h,s,D),D=s),c=0;c<l;c++)o[1+(h[c].lit<<1)]=h[c].d;return D},n.F.setDepth=function(i,o){return i.lit!=-1?(i.d=o,o):Math.max(n.F.setDepth(i.l,o+1),n.F.setDepth(i.r,o+1))},n.F.restrictDepth=function(i,o,s){var u=0,y=1<<s-o,E=0;for(i.sort(function(l,h){return h.d==l.d?l.f-h.f:h.d-l.d}),u=0;u<i.length&&i[u].d>o;u++){var c=i[u].d;i[u].d=o,E+=y-(1<<s-c)}for(E>>>=s-o;E>0;)(c=i[u].d)<o?(i[u].d++,E-=1<<o-c-1):u++;for(;u>=0;u--)i[u].d==o&&E<0&&(i[u].d--,E++);E!=0&&console.log("debt left")},n.F._goodIndex=function(i,o){var s=0;return o[16|s]<=i&&(s|=16),o[8|s]<=i&&(s|=8),o[4|s]<=i&&(s|=4),o[2|s]<=i&&(s|=2),o[1|s]<=i&&(s|=1),s},n.F._writeLit=function(i,o,s,u){return n.F._putsF(s,u,o[i<<1]),u+o[1+(i<<1)]},n.F.inflate=function(i,o){var s=Uint8Array;if(i[0]==3&&i[1]==0)return o||new s(0);var u=n.F,y=u._bitsF,E=u._bitsE,c=u._decodeTiny,l=u.makeCodes,h=u.codes2map,p=u._get17,b=u.U,O=o==null;O&&(o=new s(i.length>>>2<<3));for(var k,S,L=0,D=0,A=0,H=0,_=0,P=0,v=0,w=0,T=0;L==0;)if(L=y(i,T,1),D=y(i,T+1,2),T+=3,D!=0){if(O&&(o=n.F._check(o,w+(1<<17))),D==1&&(k=b.flmap,S=b.fdmap,P=511,v=31),D==2){A=E(i,T,5)+257,H=E(i,T+5,5)+1,_=E(i,T+10,4)+4,T+=14;for(var R=0;R<38;R+=2)b.itree[R]=0,b.itree[R+1]=0;var U=1;for(R=0;R<_;R++){var F=E(i,T+3*R,3);b.itree[1+(b.ordr[R]<<1)]=F,F>U&&(U=F)}T+=3*_,l(b.itree,U),h(b.itree,U,b.imap),k=b.lmap,S=b.dmap,T=c(b.imap,(1<<U)-1,A+H,i,T,b.ttree);var N=u._copyOut(b.ttree,0,A,b.ltree);P=(1<<N)-1;var C=u._copyOut(b.ttree,A,H,b.dtree);v=(1<<C)-1,l(b.ltree,N),h(b.ltree,N,k),l(b.dtree,C),h(b.dtree,C,S)}for(;;){var x=k[p(i,T)&P];T+=15&x;var g=x>>>4;if(!(g>>>8))o[w++]=g;else{if(g==256)break;var j=w+g-254;if(g>264){var B=b.ldef[g-257];j=w+(B>>>3)+E(i,T,7&B),T+=7&B}var M=S[p(i,T)&v];T+=15&M;var G=M>>>4,z=b.ddef[G],Y=(z>>>4)+y(i,T,15&z);for(T+=15&z,O&&(o=n.F._check(o,w+(1<<17)));w<j;)o[w]=o[w++-Y],o[w]=o[w++-Y],o[w]=o[w++-Y],o[w]=o[w++-Y];w=j}}}else{7&T&&(T+=8-(7&T));var J=4+(T>>>3),$=i[J-4]|i[J-3]<<8;O&&(o=n.F._check(o,w+$)),o.set(new s(i.buffer,i.byteOffset+J,$),w),T=J+$<<3,w+=$}return o.length==w?o:o.slice(0,w)},n.F._check=function(i,o){var s=i.length;if(o<=s)return i;var u=new Uint8Array(Math.max(s<<1,o));return u.set(i,0),u},n.F._decodeTiny=function(i,o,s,u,y,E){for(var c=n.F._bitsE,l=n.F._get17,h=0;h<s;){var p=i[l(u,y)&o];y+=15&p;var b=p>>>4;if(b<=15)E[h]=b,h++;else{var O=0,k=0;b==16?(k=3+c(u,y,2),y+=2,O=E[h-1]):b==17?(k=3+c(u,y,3),y+=3):b==18&&(k=11+c(u,y,7),y+=7);for(var S=h+k;h<S;)E[h]=O,h++}}return y},n.F._copyOut=function(i,o,s,u){for(var y=0,E=0,c=u.length>>>1;E<s;){var l=i[E+o];u[E<<1]=0,u[1+(E<<1)]=l,l>y&&(y=l),E++}for(;E<c;)u[E<<1]=0,u[1+(E<<1)]=0,E++;return y},n.F.makeCodes=function(i,o){for(var s,u,y,E,c=n.F.U,l=i.length,h=c.bl_count,p=0;p<=o;p++)h[p]=0;for(p=1;p<l;p+=2)h[i[p]]++;var b=c.next_code;for(s=0,h[0]=0,u=1;u<=o;u++)s=s+h[u-1]<<1,b[u]=s;for(y=0;y<l;y+=2)(E=i[y+1])!=0&&(i[y]=b[E],b[E]++)},n.F.codes2map=function(i,o,s){for(var u=i.length,y=n.F.U.rev15,E=0;E<u;E+=2)if(i[E+1]!=0)for(var c=E>>1,l=i[E+1],h=c<<4|l,p=o-l,b=i[E]<<p,O=b+(1<<p);b!=O;)s[y[b]>>>15-o]=h,b++},n.F.revCodes=function(i,o){for(var s=n.F.U.rev15,u=15-o,y=0;y<i.length;y+=2){var E=i[y]<<o-i[y+1];i[y]=s[E]>>>u}},n.F._putsE=function(i,o,s){s<<=7&o;var u=o>>>3;i[u]|=s,i[u+1]|=s>>>8},n.F._putsF=function(i,o,s){s<<=7&o;var u=o>>>3;i[u]|=s,i[u+1]|=s>>>8,i[u+2]|=s>>>16},n.F._bitsE=function(i,o,s){return(i[o>>>3]|i[1+(o>>>3)]<<8)>>>(7&o)&(1<<s)-1},n.F._bitsF=function(i,o,s){return(i[o>>>3]|i[1+(o>>>3)]<<8|i[2+(o>>>3)]<<16)>>>(7&o)&(1<<s)-1},n.F._get17=function(i,o){return(i[o>>>3]|i[1+(o>>>3)]<<8|i[2+(o>>>3)]<<16)>>>(7&o)},n.F._get25=function(i,o){return(i[o>>>3]|i[1+(o>>>3)]<<8|i[2+(o>>>3)]<<16|i[3+(o>>>3)]<<24)>>>(7&o)},n.F.U=(e=Uint16Array,r=Uint32Array,{next_code:new e(16),bl_count:new e(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new e(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new r(32),flmap:new e(512),fltree:[],fdmap:new e(32),fdtree:[],lmap:new e(32768),ltree:[],ttree:[],dmap:new e(32768),dtree:[],imap:new e(512),itree:[],rev15:new e(32768),lhst:new r(286),dhst:new r(30),ihst:new r(19),lits:new r(15e3),strt:new e(65536),prev:new e(32768)}),function(){for(var i=n.F.U,o=0;o<32768;o++){var s=o;s=(4278255360&(s=(4042322160&(s=(3435973836&(s=(2863311530&s)>>>1|(1431655765&s)<<1))>>>2|(858993459&s)<<2))>>>4|(252645135&s)<<4))>>>8|(16711935&s)<<8,i.rev15[o]=(s>>>16|s<<16)>>>17}function u(y,E,c){for(;E--!=0;)y.push(0,c)}for(o=0;o<32;o++)i.ldef[o]=i.of0[o]<<3|i.exb[o],i.ddef[o]=i.df0[o]<<4|i.dxb[o];u(i.fltree,144,8),u(i.fltree,112,9),u(i.fltree,24,7),u(i.fltree,8,8),n.F.makeCodes(i.fltree,9),n.F.codes2map(i.fltree,9,i.flmap),n.F.revCodes(i.fltree,9),u(i.fdtree,32,5),n.F.makeCodes(i.fdtree,5),n.F.codes2map(i.fdtree,5,i.fdmap),n.F.revCodes(i.fdtree,5),u(i.itree,19,0),u(i.ltree,286,0),u(i.dtree,30,0),u(i.ttree,320,0)}()})();var ns=es({__proto__:null,default:Bt},[Bt]);const Te=function(){var t={nextZero(c,l){for(;c[l]!=0;)l++;return l},readUshort:(c,l)=>c[l]<<8|c[l+1],writeUshort(c,l,h){c[l]=h>>8&255,c[l+1]=255&h},readUint:(c,l)=>16777216*c[l]+(c[l+1]<<16|c[l+2]<<8|c[l+3]),writeUint(c,l,h){c[l]=h>>24&255,c[l+1]=h>>16&255,c[l+2]=h>>8&255,c[l+3]=255&h},readASCII(c,l,h){let p="";for(let b=0;b<h;b++)p+=String.fromCharCode(c[l+b]);return p},writeASCII(c,l,h){for(let p=0;p<h.length;p++)c[l+p]=h.charCodeAt(p)},readBytes(c,l,h){const p=[];for(let b=0;b<h;b++)p.push(c[l+b]);return p},pad:c=>c.length<2?`0${c}`:c,readUTF8(c,l,h){let p,b="";for(let O=0;O<h;O++)b+=`%${t.pad(c[l+O].toString(16))}`;try{p=decodeURIComponent(b)}catch{return t.readASCII(c,l,h)}return p}};function e(c,l,h,p){const b=l*h,O=o(p),k=Math.ceil(l*O/8),S=new Uint8Array(4*b),L=new Uint32Array(S.buffer),{ctype:D}=p,{depth:A}=p,H=t.readUshort;if(D==6){const B=b<<2;if(A==8)for(var _=0;_<B;_+=4)S[_]=c[_],S[_+1]=c[_+1],S[_+2]=c[_+2],S[_+3]=c[_+3];if(A==16)for(_=0;_<B;_++)S[_]=c[_<<1]}else if(D==2){const B=p.tabs.tRNS;if(B==null){if(A==8)for(_=0;_<b;_++){var P=3*_;L[_]=255<<24|c[P+2]<<16|c[P+1]<<8|c[P]}if(A==16)for(_=0;_<b;_++)P=6*_,L[_]=255<<24|c[P+4]<<16|c[P+2]<<8|c[P]}else{var v=B[0];const M=B[1],G=B[2];if(A==8)for(_=0;_<b;_++){var w=_<<2;P=3*_,L[_]=255<<24|c[P+2]<<16|c[P+1]<<8|c[P],c[P]==v&&c[P+1]==M&&c[P+2]==G&&(S[w+3]=0)}if(A==16)for(_=0;_<b;_++)w=_<<2,P=6*_,L[_]=255<<24|c[P+4]<<16|c[P+2]<<8|c[P],H(c,P)==v&&H(c,P+2)==M&&H(c,P+4)==G&&(S[w+3]=0)}}else if(D==3){const B=p.tabs.PLTE,M=p.tabs.tRNS,G=M?M.length:0;if(A==1)for(var T=0;T<h;T++){var R=T*k,U=T*l;for(_=0;_<l;_++){w=U+_<<2;var F=3*(N=c[R+(_>>3)]>>7-((7&_)<<0)&1);S[w]=B[F],S[w+1]=B[F+1],S[w+2]=B[F+2],S[w+3]=N<G?M[N]:255}}if(A==2)for(T=0;T<h;T++)for(R=T*k,U=T*l,_=0;_<l;_++)w=U+_<<2,F=3*(N=c[R+(_>>2)]>>6-((3&_)<<1)&3),S[w]=B[F],S[w+1]=B[F+1],S[w+2]=B[F+2],S[w+3]=N<G?M[N]:255;if(A==4)for(T=0;T<h;T++)for(R=T*k,U=T*l,_=0;_<l;_++)w=U+_<<2,F=3*(N=c[R+(_>>1)]>>4-((1&_)<<2)&15),S[w]=B[F],S[w+1]=B[F+1],S[w+2]=B[F+2],S[w+3]=N<G?M[N]:255;if(A==8)for(_=0;_<b;_++){var N;w=_<<2,F=3*(N=c[_]),S[w]=B[F],S[w+1]=B[F+1],S[w+2]=B[F+2],S[w+3]=N<G?M[N]:255}}else if(D==4){if(A==8)for(_=0;_<b;_++){w=_<<2;var C=c[x=_<<1];S[w]=C,S[w+1]=C,S[w+2]=C,S[w+3]=c[x+1]}if(A==16)for(_=0;_<b;_++){var x;w=_<<2,C=c[x=_<<2],S[w]=C,S[w+1]=C,S[w+2]=C,S[w+3]=c[x+2]}}else if(D==0)for(v=p.tabs.tRNS?p.tabs.tRNS:-1,T=0;T<h;T++){const B=T*k,M=T*l;if(A==1)for(var g=0;g<l;g++){var j=(C=255*(c[B+(g>>>3)]>>>7-(7&g)&1))==255*v?0:255;L[M+g]=j<<24|C<<16|C<<8|C}else if(A==2)for(g=0;g<l;g++)j=(C=85*(c[B+(g>>>2)]>>>6-((3&g)<<1)&3))==85*v?0:255,L[M+g]=j<<24|C<<16|C<<8|C;else if(A==4)for(g=0;g<l;g++)j=(C=17*(c[B+(g>>>1)]>>>4-((1&g)<<2)&15))==17*v?0:255,L[M+g]=j<<24|C<<16|C<<8|C;else if(A==8)for(g=0;g<l;g++)j=(C=c[B+g])==v?0:255,L[M+g]=j<<24|C<<16|C<<8|C;else if(A==16)for(g=0;g<l;g++)C=c[B+(g<<1)],j=H(c,B+(g<<1))==v?0:255,L[M+g]=j<<24|C<<16|C<<8|C}return S}function r(c,l,h,p){const b=o(c),O=Math.ceil(h*b/8),k=new Uint8Array((O+1+c.interlace)*p);return l=c.tabs.CgBI?i(l,k):n(l,k),c.interlace==0?l=s(l,c,0,h,p):c.interlace==1&&(l=function(L,D){const A=D.width,H=D.height,_=o(D),P=_>>3,v=Math.ceil(A*_/8),w=new Uint8Array(H*v);let T=0;const R=[0,0,4,0,2,0,1],U=[0,4,0,2,0,1,0],F=[8,8,8,4,4,2,2],N=[8,8,4,4,2,2,1];let C=0;for(;C<7;){const g=F[C],j=N[C];let B=0,M=0,G=R[C];for(;G<H;)G+=g,M++;let z=U[C];for(;z<A;)z+=j,B++;const Y=Math.ceil(B*_/8);s(L,D,T,B,M);let J=0,$=R[C];for(;$<H;){let Q=U[C],se=T+J*Y<<3;for(;Q<A;){var x;if(_==1&&(x=(x=L[se>>3])>>7-(7&se)&1,w[$*v+(Q>>3)]|=x<<7-((7&Q)<<0)),_==2&&(x=(x=L[se>>3])>>6-(7&se)&3,w[$*v+(Q>>2)]|=x<<6-((3&Q)<<1)),_==4&&(x=(x=L[se>>3])>>4-(7&se)&15,w[$*v+(Q>>1)]|=x<<4-((1&Q)<<2)),_>=8){const oe=$*v+Q*P;for(let ee=0;ee<P;ee++)w[oe+ee]=L[(se>>3)+ee]}se+=_,Q+=j}J++,$+=g}B*M!=0&&(T+=M*(1+Y)),C+=1}return w}(l,c)),l}function n(c,l){return i(new Uint8Array(c.buffer,2,c.length-6),l)}var i=function(){const c={H:{}};return c.H.N=function(l,h){const p=Uint8Array;let b,O,k=0,S=0,L=0,D=0,A=0,H=0,_=0,P=0,v=0;if(l[0]==3&&l[1]==0)return h||new p(0);const w=c.H,T=w.b,R=w.e,U=w.R,F=w.n,N=w.A,C=w.Z,x=w.m,g=h==null;for(g&&(h=new p(l.length>>>2<<5));k==0;)if(k=T(l,v,1),S=T(l,v+1,2),v+=3,S!=0){if(g&&(h=c.H.W(h,P+(1<<17))),S==1&&(b=x.J,O=x.h,H=511,_=31),S==2){L=R(l,v,5)+257,D=R(l,v+5,5)+1,A=R(l,v+10,4)+4,v+=14;let B=1;for(var j=0;j<38;j+=2)x.Q[j]=0,x.Q[j+1]=0;for(j=0;j<A;j++){const z=R(l,v+3*j,3);x.Q[1+(x.X[j]<<1)]=z,z>B&&(B=z)}v+=3*A,F(x.Q,B),N(x.Q,B,x.u),b=x.w,O=x.d,v=U(x.u,(1<<B)-1,L+D,l,v,x.v);const M=w.V(x.v,0,L,x.C);H=(1<<M)-1;const G=w.V(x.v,L,D,x.D);_=(1<<G)-1,F(x.C,M),N(x.C,M,b),F(x.D,G),N(x.D,G,O)}for(;;){const B=b[C(l,v)&H];v+=15&B;const M=B>>>4;if(!(M>>>8))h[P++]=M;else{if(M==256)break;{let G=P+M-254;if(M>264){const Q=x.q[M-257];G=P+(Q>>>3)+R(l,v,7&Q),v+=7&Q}const z=O[C(l,v)&_];v+=15&z;const Y=z>>>4,J=x.c[Y],$=(J>>>4)+T(l,v,15&J);for(v+=15&J;P<G;)h[P]=h[P++-$],h[P]=h[P++-$],h[P]=h[P++-$],h[P]=h[P++-$];P=G}}}}else{7&v&&(v+=8-(7&v));const B=4+(v>>>3),M=l[B-4]|l[B-3]<<8;g&&(h=c.H.W(h,P+M)),h.set(new p(l.buffer,l.byteOffset+B,M),P),v=B+M<<3,P+=M}return h.length==P?h:h.slice(0,P)},c.H.W=function(l,h){const p=l.length;if(h<=p)return l;const b=new Uint8Array(p<<1);return b.set(l,0),b},c.H.R=function(l,h,p,b,O,k){const S=c.H.e,L=c.H.Z;let D=0;for(;D<p;){const A=l[L(b,O)&h];O+=15&A;const H=A>>>4;if(H<=15)k[D]=H,D++;else{let _=0,P=0;H==16?(P=3+S(b,O,2),O+=2,_=k[D-1]):H==17?(P=3+S(b,O,3),O+=3):H==18&&(P=11+S(b,O,7),O+=7);const v=D+P;for(;D<v;)k[D]=_,D++}}return O},c.H.V=function(l,h,p,b){let O=0,k=0;const S=b.length>>>1;for(;k<p;){const L=l[k+h];b[k<<1]=0,b[1+(k<<1)]=L,L>O&&(O=L),k++}for(;k<S;)b[k<<1]=0,b[1+(k<<1)]=0,k++;return O},c.H.n=function(l,h){const p=c.H.m,b=l.length;let O,k,S,L;const D=p.j;for(var A=0;A<=h;A++)D[A]=0;for(A=1;A<b;A+=2)D[l[A]]++;const H=p.K;for(O=0,D[0]=0,k=1;k<=h;k++)O=O+D[k-1]<<1,H[k]=O;for(S=0;S<b;S+=2)L=l[S+1],L!=0&&(l[S]=H[L],H[L]++)},c.H.A=function(l,h,p){const b=l.length,O=c.H.m.r;for(let k=0;k<b;k+=2)if(l[k+1]!=0){const S=k>>1,L=l[k+1],D=S<<4|L,A=h-L;let H=l[k]<<A;const _=H+(1<<A);for(;H!=_;)p[O[H]>>>15-h]=D,H++}},c.H.l=function(l,h){const p=c.H.m.r,b=15-h;for(let O=0;O<l.length;O+=2){const k=l[O]<<h-l[O+1];l[O]=p[k]>>>b}},c.H.M=function(l,h,p){p<<=7&h;const b=h>>>3;l[b]|=p,l[b+1]|=p>>>8},c.H.I=function(l,h,p){p<<=7&h;const b=h>>>3;l[b]|=p,l[b+1]|=p>>>8,l[b+2]|=p>>>16},c.H.e=function(l,h,p){return(l[h>>>3]|l[1+(h>>>3)]<<8)>>>(7&h)&(1<<p)-1},c.H.b=function(l,h,p){return(l[h>>>3]|l[1+(h>>>3)]<<8|l[2+(h>>>3)]<<16)>>>(7&h)&(1<<p)-1},c.H.Z=function(l,h){return(l[h>>>3]|l[1+(h>>>3)]<<8|l[2+(h>>>3)]<<16)>>>(7&h)},c.H.i=function(l,h){return(l[h>>>3]|l[1+(h>>>3)]<<8|l[2+(h>>>3)]<<16|l[3+(h>>>3)]<<24)>>>(7&h)},c.H.m=function(){const l=Uint16Array,h=Uint32Array;return{K:new l(16),j:new l(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new l(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new h(32),J:new l(512),_:[],h:new l(32),$:[],w:new l(32768),C:[],v:[],d:new l(32768),D:[],u:new l(512),Q:[],r:new l(32768),s:new h(286),Y:new h(30),a:new h(19),t:new h(15e3),k:new l(65536),g:new l(32768)}}(),function(){const l=c.H.m;for(var h=0;h<32768;h++){let b=h;b=(2863311530&b)>>>1|(1431655765&b)<<1,b=(3435973836&b)>>>2|(858993459&b)<<2,b=(4042322160&b)>>>4|(252645135&b)<<4,b=(4278255360&b)>>>8|(16711935&b)<<8,l.r[h]=(b>>>16|b<<16)>>>17}function p(b,O,k){for(;O--!=0;)b.push(0,k)}for(h=0;h<32;h++)l.q[h]=l.S[h]<<3|l.T[h],l.c[h]=l.p[h]<<4|l.z[h];p(l._,144,8),p(l._,112,9),p(l._,24,7),p(l._,8,8),c.H.n(l._,9),c.H.A(l._,9,l.J),c.H.l(l._,9),p(l.$,32,5),c.H.n(l.$,5),c.H.A(l.$,5,l.h),c.H.l(l.$,5),p(l.Q,19,0),p(l.C,286,0),p(l.D,30,0),p(l.v,320,0)}(),c.H.N}();function o(c){return[1,null,3,1,2,null,4][c.ctype]*c.depth}function s(c,l,h,p,b){let O=o(l);const k=Math.ceil(p*O/8);let S,L;O=Math.ceil(O/8);let D=c[h],A=0;if(D>1&&(c[h]=[0,0,1][D-2]),D==3)for(A=O;A<k;A++)c[A+1]=c[A+1]+(c[A+1-O]>>>1)&255;for(let H=0;H<b;H++)if(S=h+H*k,L=S+H+1,D=c[L-1],A=0,D==0)for(;A<k;A++)c[S+A]=c[L+A];else if(D==1){for(;A<O;A++)c[S+A]=c[L+A];for(;A<k;A++)c[S+A]=c[L+A]+c[S+A-O]}else if(D==2)for(;A<k;A++)c[S+A]=c[L+A]+c[S+A-k];else if(D==3){for(;A<O;A++)c[S+A]=c[L+A]+(c[S+A-k]>>>1);for(;A<k;A++)c[S+A]=c[L+A]+(c[S+A-k]+c[S+A-O]>>>1)}else{for(;A<O;A++)c[S+A]=c[L+A]+u(0,c[S+A-k],0);for(;A<k;A++)c[S+A]=c[L+A]+u(c[S+A-O],c[S+A-k],c[S+A-O-k])}return c}function u(c,l,h){const p=c+l-h,b=p-c,O=p-l,k=p-h;return b*b<=O*O&&b*b<=k*k?c:O*O<=k*k?l:h}function y(c,l,h){h.width=t.readUint(c,l),l+=4,h.height=t.readUint(c,l),l+=4,h.depth=c[l],l++,h.ctype=c[l],l++,h.compress=c[l],l++,h.filter=c[l],l++,h.interlace=c[l],l++}function E(c,l,h,p,b,O,k,S,L){const D=Math.min(l,b),A=Math.min(h,O);let H=0,_=0;for(let C=0;C<A;C++)for(let x=0;x<D;x++)if(k>=0&&S>=0?(H=C*l+x<<2,_=(S+C)*b+k+x<<2):(H=(-S+C)*l-k+x<<2,_=C*b+x<<2),L==0)p[_]=c[H],p[_+1]=c[H+1],p[_+2]=c[H+2],p[_+3]=c[H+3];else if(L==1){var P=c[H+3]*.00392156862745098,v=c[H]*P,w=c[H+1]*P,T=c[H+2]*P,R=p[_+3]*(1/255),U=p[_]*R,F=p[_+1]*R,N=p[_+2]*R;const g=1-P,j=P+R*g,B=j==0?0:1/j;p[_+3]=255*j,p[_+0]=(v+U*g)*B,p[_+1]=(w+F*g)*B,p[_+2]=(T+N*g)*B}else if(L==2)P=c[H+3],v=c[H],w=c[H+1],T=c[H+2],R=p[_+3],U=p[_],F=p[_+1],N=p[_+2],P==R&&v==U&&w==F&&T==N?(p[_]=0,p[_+1]=0,p[_+2]=0,p[_+3]=0):(p[_]=v,p[_+1]=w,p[_+2]=T,p[_+3]=P);else if(L==3){if(P=c[H+3],v=c[H],w=c[H+1],T=c[H+2],R=p[_+3],U=p[_],F=p[_+1],N=p[_+2],P==R&&v==U&&w==F&&T==N)continue;if(P<220&&R>20)return!1}return!0}return{decode:function(l){const h=new Uint8Array(l);let p=8;const b=t,O=b.readUshort,k=b.readUint,S={tabs:{},frames:[]},L=new Uint8Array(h.length);let D,A=0,H=0;const _=[137,80,78,71,13,10,26,10];for(var P=0;P<8;P++)if(h[P]!=_[P])throw"The input is not a PNG file!";for(;p<h.length;){const C=b.readUint(h,p);p+=4;const x=b.readASCII(h,p,4);if(p+=4,x=="IHDR")y(h,p,S);else if(x=="iCCP"){for(var v=p;h[v]!=0;)v++;b.readASCII(h,p,v-p),h[v+1];const g=h.slice(v+2,p+C);let j=null;try{j=n(g)}catch{j=i(g)}S.tabs[x]=j}else if(x=="CgBI")S.tabs[x]=h.slice(p,p+4);else if(x=="IDAT"){for(P=0;P<C;P++)L[A+P]=h[p+P];A+=C}else if(x=="acTL")S.tabs[x]={num_frames:k(h,p),num_plays:k(h,p+4)},D=new Uint8Array(h.length);else if(x=="fcTL"){H!=0&&((N=S.frames[S.frames.length-1]).data=r(S,D.slice(0,H),N.rect.width,N.rect.height),H=0);const g={x:k(h,p+12),y:k(h,p+16),width:k(h,p+4),height:k(h,p+8)};let j=O(h,p+22);j=O(h,p+20)/(j==0?100:j);const B={rect:g,delay:Math.round(1e3*j),dispose:h[p+24],blend:h[p+25]};S.frames.push(B)}else if(x=="fdAT"){for(P=0;P<C-4;P++)D[H+P]=h[p+P+4];H+=C-4}else if(x=="pHYs")S.tabs[x]=[b.readUint(h,p),b.readUint(h,p+4),h[p+8]];else if(x=="cHRM")for(S.tabs[x]=[],P=0;P<8;P++)S.tabs[x].push(b.readUint(h,p+4*P));else if(x=="tEXt"||x=="zTXt"){S.tabs[x]==null&&(S.tabs[x]={});var w=b.nextZero(h,p),T=b.readASCII(h,p,w-p),R=p+C-w-1;if(x=="tEXt")F=b.readASCII(h,w+1,R);else{var U=n(h.slice(w+2,w+2+R));F=b.readUTF8(U,0,U.length)}S.tabs[x][T]=F}else if(x=="iTXt"){S.tabs[x]==null&&(S.tabs[x]={}),w=0,v=p,w=b.nextZero(h,v),T=b.readASCII(h,v,w-v);const g=h[v=w+1];var F;h[v+1],v+=2,w=b.nextZero(h,v),b.readASCII(h,v,w-v),v=w+1,w=b.nextZero(h,v),b.readUTF8(h,v,w-v),R=C-((v=w+1)-p),g==0?F=b.readUTF8(h,v,R):(U=n(h.slice(v,v+R)),F=b.readUTF8(U,0,U.length)),S.tabs[x][T]=F}else if(x=="PLTE")S.tabs[x]=b.readBytes(h,p,C);else if(x=="hIST"){const g=S.tabs.PLTE.length/3;for(S.tabs[x]=[],P=0;P<g;P++)S.tabs[x].push(O(h,p+2*P))}else if(x=="tRNS")S.ctype==3?S.tabs[x]=b.readBytes(h,p,C):S.ctype==0?S.tabs[x]=O(h,p):S.ctype==2&&(S.tabs[x]=[O(h,p),O(h,p+2),O(h,p+4)]);else if(x=="gAMA")S.tabs[x]=b.readUint(h,p)/1e5;else if(x=="sRGB")S.tabs[x]=h[p];else if(x=="bKGD")S.ctype==0||S.ctype==4?S.tabs[x]=[O(h,p)]:S.ctype==2||S.ctype==6?S.tabs[x]=[O(h,p),O(h,p+2),O(h,p+4)]:S.ctype==3&&(S.tabs[x]=h[p]);else if(x=="IEND")break;p+=C,b.readUint(h,p),p+=4}var N;return H!=0&&((N=S.frames[S.frames.length-1]).data=r(S,D.slice(0,H),N.rect.width,N.rect.height)),S.data=r(S,L,S.width,S.height),delete S.compress,delete S.interlace,delete S.filter,S},toRGBA8:function(l){const h=l.width,p=l.height;if(l.tabs.acTL==null)return[e(l.data,h,p,l).buffer];const b=[];l.frames[0].data==null&&(l.frames[0].data=l.data);const O=h*p*4,k=new Uint8Array(O),S=new Uint8Array(O),L=new Uint8Array(O);for(let A=0;A<l.frames.length;A++){const H=l.frames[A],_=H.rect.x,P=H.rect.y,v=H.rect.width,w=H.rect.height,T=e(H.data,v,w,l);if(A!=0)for(var D=0;D<O;D++)L[D]=k[D];if(H.blend==0?E(T,v,w,k,h,p,_,P,0):H.blend==1&&E(T,v,w,k,h,p,_,P,1),b.push(k.buffer.slice(0)),H.dispose!=0){if(H.dispose==1)E(S,v,w,k,h,p,_,P,0);else if(H.dispose==2)for(D=0;D<O;D++)k[D]=L[D]}}return b},_paeth:u,_copyTile:E,_bin:t}}();(function(){const{_copyTile:t}=Te,{_bin:e}=Te,r=Te._paeth;var n={table:function(){const v=new Uint32Array(256);for(let w=0;w<256;w++){let T=w;for(let R=0;R<8;R++)1&T?T=3988292384^T>>>1:T>>>=1;v[w]=T}return v}(),update(v,w,T,R){for(let U=0;U<R;U++)v=n.table[255&(v^w[T+U])]^v>>>8;return v},crc:(v,w,T)=>4294967295^n.update(4294967295,v,w,T)};function i(v,w,T,R){w[T]+=v[0]*R>>4,w[T+1]+=v[1]*R>>4,w[T+2]+=v[2]*R>>4,w[T+3]+=v[3]*R>>4}function o(v){return Math.max(0,Math.min(255,v))}function s(v,w){const T=v[0]-w[0],R=v[1]-w[1],U=v[2]-w[2],F=v[3]-w[3];return T*T+R*R+U*U+F*F}function u(v,w,T,R,U,F,N){N==null&&(N=1);const C=R.length,x=[];for(var g=0;g<C;g++){const $=R[g];x.push([$>>>0&255,$>>>8&255,$>>>16&255,$>>>24&255])}for(g=0;g<C;g++){let $=4294967295;for(var j=0,B=0;B<C;B++){var M=s(x[g],x[B]);B!=g&&M<$&&($=M,j=B)}}const G=new Uint32Array(U.buffer),z=new Int16Array(w*T*4),Y=[0,8,2,10,12,4,14,6,3,11,1,9,15,7,13,5];for(g=0;g<Y.length;g++)Y[g]=255*((Y[g]+.5)/16-.5);for(let $=0;$<T;$++)for(let Q=0;Q<w;Q++){var J;g=4*($*w+Q),N!=2?J=[o(v[g]+z[g]),o(v[g+1]+z[g+1]),o(v[g+2]+z[g+2]),o(v[g+3]+z[g+3])]:(M=Y[4*(3&$)+(3&Q)],J=[o(v[g]+M),o(v[g+1]+M),o(v[g+2]+M),o(v[g+3]+M)]),j=0;let se=16777215;for(B=0;B<C;B++){const ae=s(J,x[B]);ae<se&&(se=ae,j=B)}const oe=x[j],ee=[J[0]-oe[0],J[1]-oe[1],J[2]-oe[2],J[3]-oe[3]];N==1&&(Q!=w-1&&i(ee,z,g+4,7),$!=T-1&&(Q!=0&&i(ee,z,g+4*w-4,3),i(ee,z,g+4*w,5),Q!=w-1&&i(ee,z,g+4*w+4,1))),F[g>>2]=j,G[g>>2]=R[j]}}function y(v,w,T,R,U){U==null&&(U={});const{crc:F}=n,N=e.writeUint,C=e.writeUshort,x=e.writeASCII;let g=8;const j=v.frames.length>1;let B,M=!1,G=33+(j?20:0);if(U.sRGB!=null&&(G+=13),U.pHYs!=null&&(G+=21),U.iCCP!=null&&(B=pako.deflate(U.iCCP),G+=21+B.length+4),v.ctype==3){for(var z=v.plte.length,Y=0;Y<z;Y++)v.plte[Y]>>>24!=255&&(M=!0);G+=8+3*z+4+(M?8+1*z+4:0)}for(var J=0;J<v.frames.length;J++)j&&(G+=38),G+=(oe=v.frames[J]).cimg.length+12,J!=0&&(G+=4);G+=12;const $=new Uint8Array(G),Q=[137,80,78,71,13,10,26,10];for(Y=0;Y<8;Y++)$[Y]=Q[Y];if(N($,g,13),g+=4,x($,g,"IHDR"),g+=4,N($,g,w),g+=4,N($,g,T),g+=4,$[g]=v.depth,g++,$[g]=v.ctype,g++,$[g]=0,g++,$[g]=0,g++,$[g]=0,g++,N($,g,F($,g-17,17)),g+=4,U.sRGB!=null&&(N($,g,1),g+=4,x($,g,"sRGB"),g+=4,$[g]=U.sRGB,g++,N($,g,F($,g-5,5)),g+=4),U.iCCP!=null){const ee=13+B.length;N($,g,ee),g+=4,x($,g,"iCCP"),g+=4,x($,g,"ICC profile"),g+=11,g+=2,$.set(B,g),g+=B.length,N($,g,F($,g-(ee+4),ee+4)),g+=4}if(U.pHYs!=null&&(N($,g,9),g+=4,x($,g,"pHYs"),g+=4,N($,g,U.pHYs[0]),g+=4,N($,g,U.pHYs[1]),g+=4,$[g]=U.pHYs[2],g++,N($,g,F($,g-13,13)),g+=4),j&&(N($,g,8),g+=4,x($,g,"acTL"),g+=4,N($,g,v.frames.length),g+=4,N($,g,U.loop!=null?U.loop:0),g+=4,N($,g,F($,g-12,12)),g+=4),v.ctype==3){for(N($,g,3*(z=v.plte.length)),g+=4,x($,g,"PLTE"),g+=4,Y=0;Y<z;Y++){const ee=3*Y,ae=v.plte[Y],fe=255&ae,ne=ae>>>8&255,Ne=ae>>>16&255;$[g+ee+0]=fe,$[g+ee+1]=ne,$[g+ee+2]=Ne}if(g+=3*z,N($,g,F($,g-3*z-4,3*z+4)),g+=4,M){for(N($,g,z),g+=4,x($,g,"tRNS"),g+=4,Y=0;Y<z;Y++)$[g+Y]=v.plte[Y]>>>24&255;g+=z,N($,g,F($,g-z-4,z+4)),g+=4}}let se=0;for(J=0;J<v.frames.length;J++){var oe=v.frames[J];j&&(N($,g,26),g+=4,x($,g,"fcTL"),g+=4,N($,g,se++),g+=4,N($,g,oe.rect.width),g+=4,N($,g,oe.rect.height),g+=4,N($,g,oe.rect.x),g+=4,N($,g,oe.rect.y),g+=4,C($,g,R[J]),g+=2,C($,g,1e3),g+=2,$[g]=oe.dispose,g++,$[g]=oe.blend,g++,N($,g,F($,g-30,30)),g+=4);const ee=oe.cimg;N($,g,(z=ee.length)+(J==0?0:4)),g+=4;const ae=g;x($,g,J==0?"IDAT":"fdAT"),g+=4,J!=0&&(N($,g,se++),g+=4),$.set(ee,g),g+=z,N($,g,F($,ae,g-ae)),g+=4}return N($,g,0),g+=4,x($,g,"IEND"),g+=4,N($,g,F($,g-4,4)),g+=4,$.buffer}function E(v,w,T){for(let R=0;R<v.frames.length;R++){const U=v.frames[R];U.rect.width;const F=U.rect.height,N=new Uint8Array(F*U.bpl+F);U.cimg=p(U.img,F,U.bpp,U.bpl,N,w,T)}}function c(v,w,T,R,U){const F=U[0],N=U[1],C=U[2],x=U[3],g=U[4],j=U[5];let B=6,M=8,G=255;for(var z=0;z<v.length;z++){const a=new Uint8Array(v[z]);for(var Y=a.length,J=0;J<Y;J+=4)G&=a[J+3]}const $=G!=255,Q=function(f,m,I,W,V,X){const K=[];for(var q=0;q<f.length;q++){const ge=new Uint8Array(f[q]),Oe=new Uint32Array(ge.buffer);var ie;let xe=0,Le=0,Re=m,Ve=I,Vt=W?1:0;if(q!=0){const qn=X||W||q==1||K[q-2].dispose!=0?1:2;let Jt=0,Sr=1e9;for(let ut=0;ut<qn;ut++){var te=new Uint8Array(f[q-1-ut]);const Kn=new Uint32Array(f[q-1-ut]);let Pe=m,je=I,Xe=-1,ct=-1;for(let Je=0;Je<I;Je++)for(let ze=0;ze<m;ze++)Oe[he=Je*m+ze]!=Kn[he]&&(ze<Pe&&(Pe=ze),ze>Xe&&(Xe=ze),Je<je&&(je=Je),Je>ct&&(ct=Je));Xe==-1&&(Pe=je=Xe=ct=0),V&&((1&Pe)==1&&Pe--,(1&je)==1&&je--);const Nr=(Xe-Pe+1)*(ct-je+1);Nr<Sr&&(Sr=Nr,Jt=ut,xe=Pe,Le=je,Re=Xe-Pe+1,Ve=ct-je+1)}te=new Uint8Array(f[q-1-Jt]),Jt==1&&(K[q-1].dispose=2),ie=new Uint8Array(Re*Ve*4),t(te,m,I,ie,Re,Ve,-xe,-Le,0),Vt=t(ge,m,I,ie,Re,Ve,-xe,-Le,3)?1:0,Vt==1?h(ge,m,I,ie,{x:xe,y:Le,width:Re,height:Ve}):t(ge,m,I,ie,Re,Ve,-xe,-Le,0)}else ie=ge.slice(0);K.push({rect:{x:xe,y:Le,width:Re,height:Ve},img:ie,blend:Vt,dispose:0})}if(W)for(q=0;q<K.length;q++){if((Be=K[q]).blend==1)continue;const ge=Be.rect,Oe=K[q-1].rect,xe=Math.min(ge.x,Oe.x),Le=Math.min(ge.y,Oe.y),Re={x:xe,y:Le,width:Math.max(ge.x+ge.width,Oe.x+Oe.width)-xe,height:Math.max(ge.y+ge.height,Oe.y+Oe.height)-Le};K[q-1].dispose=1,q-1!=0&&l(f,m,I,K,q-1,Re,V),l(f,m,I,K,q,Re,V)}let Me=0;if(f.length!=1)for(var he=0;he<K.length;he++){var Be;Me+=(Be=K[he]).rect.width*Be.rect.height}return K}(v,w,T,F,N,C),se={},oe=[],ee=[];if(R!=0){const a=[];for(J=0;J<Q.length;J++)a.push(Q[J].img.buffer);const f=function(V){let X=0;for(var K=0;K<V.length;K++)X+=V[K].byteLength;const q=new Uint8Array(X);let ie=0;for(K=0;K<V.length;K++){const te=new Uint8Array(V[K]),Me=te.length;for(let he=0;he<Me;he+=4){let Be=te[he],ge=te[he+1],Oe=te[he+2];const xe=te[he+3];xe==0&&(Be=ge=Oe=0),q[ie+he]=Be,q[ie+he+1]=ge,q[ie+he+2]=Oe,q[ie+he+3]=xe}ie+=Me}return q.buffer}(a),m=O(f,R);for(J=0;J<m.plte.length;J++)oe.push(m.plte[J].est.rgba);let I=0;for(J=0;J<Q.length;J++){const W=(fe=Q[J]).img.length;var ae=new Uint8Array(m.inds.buffer,I>>2,W>>2);ee.push(ae);const V=new Uint8Array(m.abuf,I,W);j&&u(fe.img,fe.rect.width,fe.rect.height,oe,V,ae),fe.img.set(V),I+=W}}else for(z=0;z<Q.length;z++){var fe=Q[z];const a=new Uint32Array(fe.img.buffer);var ne=fe.rect.width;for(Y=a.length,ae=new Uint8Array(Y),ee.push(ae),J=0;J<Y;J++){const f=a[J];if(J!=0&&f==a[J-1])ae[J]=ae[J-1];else if(J>ne&&f==a[J-ne])ae[J]=ae[J-ne];else{let m=se[f];if(m==null&&(se[f]=m=oe.length,oe.push(f),oe.length>=300))break;ae[J]=m}}}const Ne=oe.length;for(Ne<=256&&g==0&&(M=Ne<=2?1:Ne<=4?2:Ne<=16?4:8,M=Math.max(M,x)),z=0;z<Q.length;z++){(fe=Q[z]).rect.x,fe.rect.y,ne=fe.rect.width;const a=fe.rect.height;let f=fe.img;new Uint32Array(f.buffer);let m=4*ne,I=4;if(Ne<=256&&g==0){m=Math.ceil(M*ne/8);var ve=new Uint8Array(m*a);const W=ee[z];for(let V=0;V<a;V++){J=V*m;const X=V*ne;if(M==8)for(var d=0;d<ne;d++)ve[J+d]=W[X+d];else if(M==4)for(d=0;d<ne;d++)ve[J+(d>>1)]|=W[X+d]<<4-4*(1&d);else if(M==2)for(d=0;d<ne;d++)ve[J+(d>>2)]|=W[X+d]<<6-2*(3&d);else if(M==1)for(d=0;d<ne;d++)ve[J+(d>>3)]|=W[X+d]<<7-1*(7&d)}f=ve,B=3,I=1}else if($==0&&Q.length==1){ve=new Uint8Array(ne*a*3);const W=ne*a;for(J=0;J<W;J++){const V=3*J,X=4*J;ve[V]=f[X],ve[V+1]=f[X+1],ve[V+2]=f[X+2]}f=ve,B=2,I=3,m=3*ne}fe.img=f,fe.bpl=m,fe.bpp=I}return{ctype:B,depth:M,plte:oe,frames:Q}}function l(v,w,T,R,U,F,N){const C=Uint8Array,x=Uint32Array,g=new C(v[U-1]),j=new x(v[U-1]),B=U+1<v.length?new C(v[U+1]):null,M=new C(v[U]),G=new x(M.buffer);let z=w,Y=T,J=-1,$=-1;for(let se=0;se<F.height;se++)for(let oe=0;oe<F.width;oe++){const ee=F.x+oe,ae=F.y+se,fe=ae*w+ee,ne=G[fe];ne==0||R[U-1].dispose==0&&j[fe]==ne&&(B==null||B[4*fe+3]!=0)||(ee<z&&(z=ee),ee>J&&(J=ee),ae<Y&&(Y=ae),ae>$&&($=ae))}J==-1&&(z=Y=J=$=0),N&&((1&z)==1&&z--,(1&Y)==1&&Y--),F={x:z,y:Y,width:J-z+1,height:$-Y+1};const Q=R[U];Q.rect=F,Q.blend=1,Q.img=new Uint8Array(F.width*F.height*4),R[U-1].dispose==0?(t(g,w,T,Q.img,F.width,F.height,-F.x,-F.y,0),h(M,w,T,Q.img,F)):t(M,w,T,Q.img,F.width,F.height,-F.x,-F.y,0)}function h(v,w,T,R,U){t(v,w,T,R,U.width,U.height,-U.x,-U.y,2)}function p(v,w,T,R,U,F,N){const C=[];let x,g=[0,1,2,3,4];F!=-1?g=[F]:(w*R>5e5||T==1)&&(g=[0]),N&&(x={level:0});const j=ns;for(var B=0;B<g.length;B++){for(let z=0;z<w;z++)b(U,v,z,R,T,g[B]);C.push(j.deflate(U,x))}let M,G=1e9;for(B=0;B<C.length;B++)C[B].length<G&&(M=B,G=C[B].length);return C[M]}function b(v,w,T,R,U,F){const N=T*R;let C=N+T;if(v[C]=F,C++,F==0)if(R<500)for(var x=0;x<R;x++)v[C+x]=w[N+x];else v.set(new Uint8Array(w.buffer,N,R),C);else if(F==1){for(x=0;x<U;x++)v[C+x]=w[N+x];for(x=U;x<R;x++)v[C+x]=w[N+x]-w[N+x-U]+256&255}else if(T==0){for(x=0;x<U;x++)v[C+x]=w[N+x];if(F==2)for(x=U;x<R;x++)v[C+x]=w[N+x];if(F==3)for(x=U;x<R;x++)v[C+x]=w[N+x]-(w[N+x-U]>>1)+256&255;if(F==4)for(x=U;x<R;x++)v[C+x]=w[N+x]-r(w[N+x-U],0,0)+256&255}else{if(F==2)for(x=0;x<R;x++)v[C+x]=w[N+x]+256-w[N+x-R]&255;if(F==3){for(x=0;x<U;x++)v[C+x]=w[N+x]+256-(w[N+x-R]>>1)&255;for(x=U;x<R;x++)v[C+x]=w[N+x]+256-(w[N+x-R]+w[N+x-U]>>1)&255}if(F==4){for(x=0;x<U;x++)v[C+x]=w[N+x]+256-r(0,w[N+x-R],0)&255;for(x=U;x<R;x++)v[C+x]=w[N+x]+256-r(w[N+x-U],w[N+x-R],w[N+x-U-R])&255}}}function O(v,w){const T=new Uint8Array(v),R=T.slice(0),U=new Uint32Array(R.buffer),F=k(R,w),N=F[0],C=F[1],x=T.length,g=new Uint8Array(x>>2);let j;if(T.length<2e7)for(var B=0;B<x;B+=4)j=S(N,M=T[B]*(1/255),G=T[B+1]*(1/255),z=T[B+2]*(1/255),Y=T[B+3]*(1/255)),g[B>>2]=j.ind,U[B>>2]=j.est.rgba;else for(B=0;B<x;B+=4){var M=T[B]*.00392156862745098,G=T[B+1]*(1/255),z=T[B+2]*(1/255),Y=T[B+3]*(1/255);for(j=N;j.left;)j=L(j.est,M,G,z,Y)<=0?j.left:j.right;g[B>>2]=j.ind,U[B>>2]=j.est.rgba}return{abuf:R.buffer,inds:g,plte:C}}function k(v,w,T){T==null&&(T=1e-4);const R=new Uint32Array(v.buffer),U={i0:0,i1:v.length,bst:null,est:null,tdst:0,left:null,right:null};U.bst=H(v,U.i0,U.i1),U.est=_(U.bst);const F=[U];for(;F.length<w;){let C=0,x=0;for(var N=0;N<F.length;N++)F[N].est.L>C&&(C=F[N].est.L,x=N);if(C<T)break;const g=F[x],j=D(v,R,g.i0,g.i1,g.est.e,g.est.eMq255);if(g.i0>=j||g.i1<=j){g.est.L=0;continue}const B={i0:g.i0,i1:j,bst:null,est:null,tdst:0,left:null,right:null};B.bst=H(v,B.i0,B.i1),B.est=_(B.bst);const M={i0:j,i1:g.i1,bst:null,est:null,tdst:0,left:null,right:null};for(M.bst={R:[],m:[],N:g.bst.N-B.bst.N},N=0;N<16;N++)M.bst.R[N]=g.bst.R[N]-B.bst.R[N];for(N=0;N<4;N++)M.bst.m[N]=g.bst.m[N]-B.bst.m[N];M.est=_(M.bst),g.left=B,g.right=M,F[x]=B,F.push(M)}for(F.sort((C,x)=>x.bst.N-C.bst.N),N=0;N<F.length;N++)F[N].ind=N;return[U,F]}function S(v,w,T,R,U){if(v.left==null)return v.tdst=function(B,M,G,z,Y){const J=M-B[0],$=G-B[1],Q=z-B[2],se=Y-B[3];return J*J+$*$+Q*Q+se*se}(v.est.q,w,T,R,U),v;const F=L(v.est,w,T,R,U);let N=v.left,C=v.right;F>0&&(N=v.right,C=v.left);const x=S(N,w,T,R,U);if(x.tdst<=F*F)return x;const g=S(C,w,T,R,U);return g.tdst<x.tdst?g:x}function L(v,w,T,R,U){const{e:F}=v;return F[0]*w+F[1]*T+F[2]*R+F[3]*U-v.eMq}function D(v,w,T,R,U,F){for(R-=4;T<R;){for(;A(v,T,U)<=F;)T+=4;for(;A(v,R,U)>F;)R-=4;if(T>=R)break;const N=w[T>>2];w[T>>2]=w[R>>2],w[R>>2]=N,T+=4,R-=4}for(;A(v,T,U)>F;)T-=4;return T+4}function A(v,w,T){return v[w]*T[0]+v[w+1]*T[1]+v[w+2]*T[2]+v[w+3]*T[3]}function H(v,w,T){const R=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],U=[0,0,0,0],F=T-w>>2;for(let N=w;N<T;N+=4){const C=v[N]*.00392156862745098,x=v[N+1]*(1/255),g=v[N+2]*(1/255),j=v[N+3]*(1/255);U[0]+=C,U[1]+=x,U[2]+=g,U[3]+=j,R[0]+=C*C,R[1]+=C*x,R[2]+=C*g,R[3]+=C*j,R[5]+=x*x,R[6]+=x*g,R[7]+=x*j,R[10]+=g*g,R[11]+=g*j,R[15]+=j*j}return R[4]=R[1],R[8]=R[2],R[9]=R[6],R[12]=R[3],R[13]=R[7],R[14]=R[11],{R,m:U,N:F}}function _(v){const{R:w}=v,{m:T}=v,{N:R}=v,U=T[0],F=T[1],N=T[2],C=T[3],x=R==0?0:1/R,g=[w[0]-U*U*x,w[1]-U*F*x,w[2]-U*N*x,w[3]-U*C*x,w[4]-F*U*x,w[5]-F*F*x,w[6]-F*N*x,w[7]-F*C*x,w[8]-N*U*x,w[9]-N*F*x,w[10]-N*N*x,w[11]-N*C*x,w[12]-C*U*x,w[13]-C*F*x,w[14]-C*N*x,w[15]-C*C*x],j=g,B=P;let M=[Math.random(),Math.random(),Math.random(),Math.random()],G=0,z=0;if(R!=0)for(let J=0;J<16&&(M=B.multVec(j,M),z=Math.sqrt(B.dot(M,M)),M=B.sml(1/z,M),!(J!=0&&Math.abs(z-G)<1e-9));J++)G=z;const Y=[U*x,F*x,N*x,C*x];return{Cov:g,q:Y,e:M,L:G,eMq255:B.dot(B.sml(255,Y),M),eMq:B.dot(M,Y),rgba:(Math.round(255*Y[3])<<24|Math.round(255*Y[2])<<16|Math.round(255*Y[1])<<8|Math.round(255*Y[0])<<0)>>>0}}var P={multVec:(v,w)=>[v[0]*w[0]+v[1]*w[1]+v[2]*w[2]+v[3]*w[3],v[4]*w[0]+v[5]*w[1]+v[6]*w[2]+v[7]*w[3],v[8]*w[0]+v[9]*w[1]+v[10]*w[2]+v[11]*w[3],v[12]*w[0]+v[13]*w[1]+v[14]*w[2]+v[15]*w[3]],dot:(v,w)=>v[0]*w[0]+v[1]*w[1]+v[2]*w[2]+v[3]*w[3],sml:(v,w)=>[v*w[0],v*w[1],v*w[2],v*w[3]]};Te.encode=function(w,T,R,U,F,N,C){U==null&&(U=0),C==null&&(C=!1);const x=c(w,T,R,U,[!1,!1,!1,0,C,!1]);return E(x,-1),y(x,T,R,F,N)},Te.encodeLL=function(w,T,R,U,F,N,C,x){const g={ctype:0+(U==1?0:2)+(F==0?0:4),depth:N,frames:[]},j=(U+F)*N,B=j*T;for(let M=0;M<w.length;M++)g.frames.push({rect:{x:0,y:0,width:T,height:R},img:new Uint8Array(w[M]),blend:0,dispose:1,bpp:Math.ceil(j/8),bpl:Math.ceil(B/8)});return E(g,0,!0),y(g,T,R,C,x)},Te.encode.compress=c,Te.encode.dither=u,Te.quantize=O,Te.quantize.getKDtree=k,Te.quantize.getNearest=S})();const Pn={toArrayBuffer(t,e){const r=t.width,n=t.height,i=r<<2,o=t.getContext("2d").getImageData(0,0,r,n),s=new Uint32Array(o.data.buffer),u=(32*r+31)/32<<2,y=u*n,E=122+y,c=new ArrayBuffer(E),l=new DataView(c),h=1<<20;let p,b,O,k,S=h,L=0,D=0,A=0;function H(v){l.setUint16(D,v,!0),D+=2}function _(v){l.setUint32(D,v,!0),D+=4}function P(v){D+=v}H(19778),_(E),P(4),_(122),_(108),_(r),_(-n>>>0),H(1),H(32),_(3),_(y),_(2835),_(2835),P(8),_(16711680),_(65280),_(255),_(4278190080),_(1466527264),function v(){for(;L<n&&S>0;){for(k=122+L*u,p=0;p<i;)S--,b=s[A++],O=b>>>24,l.setUint32(k+p,b<<8|O),p+=4;L++}A<s.length?(S=h,setTimeout(v,Pn._dly)):e(c)}()},toBlob(t,e){this.toArrayBuffer(t,r=>{e(new Blob([r],{type:"image/bmp"}))})},_dly:9};var we={CHROME:"CHROME",FIREFOX:"FIREFOX",DESKTOP_SAFARI:"DESKTOP_SAFARI",IE:"IE",IOS:"IOS",ETC:"ETC"},is={[we.CHROME]:16384,[we.FIREFOX]:11180,[we.DESKTOP_SAFARI]:16384,[we.IE]:8192,[we.IOS]:4096,[we.ETC]:8192};const _r=typeof window<"u",jn=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,Rt=_r&&window.cordova&&window.cordova.require&&window.cordova.require("cordova/modulemapper"),os=(_r||jn)&&(Rt&&Rt.getOriginalSymbol(window,"File")||typeof File<"u"&&File),$n=(_r||jn)&&(Rt&&Rt.getOriginalSymbol(window,"FileReader")||typeof FileReader<"u"&&FileReader);function Ar(t,e,r=Date.now()){return new Promise(n=>{const i=t.split(","),o=i[0].match(/:(.*?);/)[1],s=globalThis.atob(i[1]);let u=s.length;const y=new Uint8Array(u);for(;u--;)y[u]=s.charCodeAt(u);const E=new Blob([y],{type:o});E.name=e,E.lastModified=r,n(E)})}function Hn(t){return new Promise((e,r)=>{const n=new $n;n.onload=()=>e(n.result),n.onerror=i=>r(i),n.readAsDataURL(t)})}function Wn(t){return new Promise((e,r)=>{const n=new Image;n.onload=()=>e(n),n.onerror=i=>r(i),n.src=t})}function Ze(){if(Ze.cachedResult!==void 0)return Ze.cachedResult;let t=we.ETC;const{userAgent:e}=navigator;return/Chrom(e|ium)/i.test(e)?t=we.CHROME:/iP(ad|od|hone)/i.test(e)&&/WebKit/i.test(e)?t=we.IOS:/Safari/i.test(e)?t=we.DESKTOP_SAFARI:/Firefox/i.test(e)?t=we.FIREFOX:(/MSIE/i.test(e)||document.documentMode)&&(t=we.IE),Ze.cachedResult=t,Ze.cachedResult}function Vn(t,e){const r=Ze(),n=is[r];let i=t,o=e,s=i*o;const u=i>o?o/i:i/o;for(;s>n*n;){const y=(n+i)/2,E=(n+o)/2;y<E?(o=E,i=E*u):(o=y*u,i=y),s=i*o}return{width:i,height:o}}function Wt(t,e){let r,n;try{if(r=new OffscreenCanvas(t,e),n=r.getContext("2d"),n===null)throw new Error("getContext of OffscreenCanvas returns null")}catch{r=document.createElement("canvas"),n=r.getContext("2d")}return r.width=t,r.height=e,[r,n]}function Jn(t,e){const{width:r,height:n}=Vn(t.width,t.height),[i,o]=Wt(r,n);return e&&/jpe?g/.test(e)&&(o.fillStyle="white",o.fillRect(0,0,i.width,i.height)),o.drawImage(t,0,0,i.width,i.height),i}function Ot(){return Ot.cachedResult!==void 0||(Ot.cachedResult=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&typeof document<"u"&&"ontouchend"in document),Ot.cachedResult}function Ft(t,e={}){return new Promise(function(r,n){let i,o;var s=function(){try{return o=Jn(i,e.fileType||t.type),r([i,o])}catch(y){return n(y)}},u=function(y){try{var E=function(c){try{throw c}catch(l){return n(l)}};try{let c;return Hn(t).then(function(l){try{return c=l,Wn(c).then(function(h){try{return i=h,function(){try{return s()}catch(p){return n(p)}}()}catch(p){return E(p)}},E)}catch(h){return E(h)}},E)}catch(c){E(c)}}catch(c){return n(c)}};try{if(Ot()||[we.DESKTOP_SAFARI,we.MOBILE_SAFARI].includes(Ze()))throw new Error("Skip createImageBitmap on IOS and Safari");return createImageBitmap(t).then(function(y){try{return i=y,s()}catch{return u()}},u)}catch{u()}})}function kt(t,e,r,n,i=1){return new Promise(function(o,s){let u;if(e==="image/png"){let E,c,l;return E=t.getContext("2d"),{data:c}=E.getImageData(0,0,t.width,t.height),l=Te.encode([c.buffer],t.width,t.height,4096*i),u=new Blob([l],{type:e}),u.name=r,u.lastModified=n,y.call(this)}{let E=function(){return y.call(this)};if(e==="image/bmp")return new Promise(c=>Pn.toBlob(t,c)).then((function(c){try{return u=c,u.name=r,u.lastModified=n,E.call(this)}catch(l){return s(l)}}).bind(this),s);{let c=function(){return E.call(this)};if(typeof OffscreenCanvas=="function"&&t instanceof OffscreenCanvas)return t.convertToBlob({type:e,quality:i}).then((function(l){try{return u=l,u.name=r,u.lastModified=n,c.call(this)}catch(h){return s(h)}}).bind(this),s);{let l;return l=t.toDataURL(e,i),Ar(l,r,n).then((function(h){try{return u=h,c.call(this)}catch(p){return s(p)}}).bind(this),s)}}}function y(){return o(u)}})}function ke(t){t.width=0,t.height=0}function ot(){return new Promise(function(t,e){let r,n,i,o;return ot.cachedResult!==void 0?t(ot.cachedResult):Ar("data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==","test.jpg",Date.now()).then(function(s){try{return r=s,Ft(r).then(function(u){try{return n=u[1],kt(n,r.type,r.name,r.lastModified).then(function(y){try{return i=y,ke(n),Ft(i).then(function(E){try{return o=E[0],ot.cachedResult=o.width===1&&o.height===2,t(ot.cachedResult)}catch(c){return e(c)}},e)}catch(E){return e(E)}},e)}catch(y){return e(y)}},e)}catch(u){return e(u)}},e)})}function zn(t){return new Promise((e,r)=>{const n=new $n;n.onload=i=>{const o=new DataView(i.target.result);if(o.getUint16(0,!1)!=65496)return e(-2);const s=o.byteLength;let u=2;for(;u<s;){if(o.getUint16(u+2,!1)<=8)return e(-1);const y=o.getUint16(u,!1);if(u+=2,y==65505){if(o.getUint32(u+=2,!1)!=1165519206)return e(-1);const E=o.getUint16(u+=6,!1)==18761;u+=o.getUint32(u+4,E);const c=o.getUint16(u,E);u+=2;for(let l=0;l<c;l++)if(o.getUint16(u+12*l,E)==274)return e(o.getUint16(u+12*l+8,E))}else{if((65280&y)!=65280)break;u+=o.getUint16(u,!1)}}return e(-1)},n.onerror=i=>r(i),n.readAsArrayBuffer(t)})}function Gn(t,e){const{width:r}=t,{height:n}=t,{maxWidthOrHeight:i}=e;let o,s=t;return isFinite(i)&&(r>i||n>i)&&([s,o]=Wt(r,n),r>n?(s.width=i,s.height=n/r*i):(s.width=r/n*i,s.height=i),o.drawImage(t,0,0,s.width,s.height),ke(t)),s}function Yn(t,e){const{width:r}=t,{height:n}=t,[i,o]=Wt(r,n);switch(e>4&&e<9?(i.width=n,i.height=r):(i.width=r,i.height=n),e){case 2:o.transform(-1,0,0,1,r,0);break;case 3:o.transform(-1,0,0,-1,r,n);break;case 4:o.transform(1,0,0,-1,0,n);break;case 5:o.transform(0,1,1,0,0,0);break;case 6:o.transform(0,1,-1,0,n,0);break;case 7:o.transform(0,-1,-1,0,n,r);break;case 8:o.transform(0,-1,1,0,0,r)}return o.drawImage(t,0,0,r,n),ke(t),i}function an(t,e,r=0){return new Promise(function(n,i){let o,s,u,y,E,c,l,h,p,b,O,k,S,L,D,A,H,_,P,v;function w(R=5){if(e.signal&&e.signal.aborted)throw e.signal.reason;o+=R,e.onProgress(Math.min(o,100))}function T(R){if(e.signal&&e.signal.aborted)throw e.signal.reason;o=Math.min(Math.max(R,o),100),e.onProgress(o)}return o=r,s=e.maxIteration||10,u=1024*e.maxSizeMB*1024,w(),Ft(t,e).then((function(R){try{return[,y]=R,w(),E=Gn(y,e),w(),new Promise(function(U,F){var N;if(!(N=e.exifOrientation))return zn(t).then((function(x){try{return N=x,C.call(this)}catch(g){return F(g)}}).bind(this),F);function C(){return U(N)}return C.call(this)}).then((function(U){try{return c=U,w(),ot().then((function(F){try{return l=F?E:Yn(E,c),w(),h=e.initialQuality||1,p=e.fileType||t.type,kt(l,p,t.name,t.lastModified,h).then((function(N){try{{let x=function(){if(s--&&(D>u||D>S)){let j,B;return j=v?.95*P.width:P.width,B=v?.95*P.height:P.height,[H,_]=Wt(j,B),_.drawImage(P,0,0,j,B),h*=p==="image/png"?.85:.95,kt(H,p,t.name,t.lastModified,h).then(function(M){try{return A=M,ke(P),P=H,D=A.size,T(Math.min(99,Math.floor((L-D)/(L-u)*100))),x}catch(G){return i(G)}},i)}return[1]},g=function(){return ke(P),ke(H),ke(E),ke(l),ke(y),T(100),n(A)};if(b=N,w(),O=b.size>u,k=b.size>t.size,!O&&!k)return T(100),n(b);var C;return S=t.size,L=b.size,D=L,P=l,v=!e.alwaysKeepResolution&&O,(C=(function(j){for(;j;){if(j.then)return void j.then(C,i);try{if(j.pop){if(j.length)return j.pop()?g.call(this):j;j=x}else j=j.call(this)}catch(B){return i(B)}}}).bind(this))(x)}}catch(x){return i(x)}}).bind(this),i)}catch(N){return i(N)}}).bind(this),i)}catch(F){return i(F)}}).bind(this),i)}catch(U){return i(U)}}).bind(this),i)})}const ss=`
let scriptImported = false
self.addEventListener('message', async (e) => {
  const { file, id, imageCompressionLibUrl, options } = e.data
  options.onProgress = (progress) => self.postMessage({ progress, id })
  try {
    if (!scriptImported) {
      // console.log('[worker] importScripts', imageCompressionLibUrl)
      self.importScripts(imageCompressionLibUrl)
      scriptImported = true
    }
    // console.log('[worker] self', self)
    const compressedFile = await imageCompression(file, options)
    self.postMessage({ file: compressedFile, id })
  } catch (e) {
    // console.error('[worker] error', e)
    self.postMessage({ error: e.message + '\\n' + e.stack, id })
  }
})
`;let or;function as(t,e){return new Promise((r,n)=>{or||(or=function(s){const u=[];return u.push(s),URL.createObjectURL(new Blob(u))}(ss));const i=new Worker(or);i.addEventListener("message",function(s){if(e.signal&&e.signal.aborted)i.terminate();else if(s.data.progress===void 0){if(s.data.error)return n(new Error(s.data.error)),void i.terminate();r(s.data.file),i.terminate()}else e.onProgress(s.data.progress)}),i.addEventListener("error",n),e.signal&&e.signal.addEventListener("abort",()=>{n(e.signal.reason),i.terminate()}),i.postMessage({file:t,imageCompressionLibUrl:e.libURL,options:{...e,onProgress:void 0,signal:void 0}})})}function de(t,e){return new Promise(function(r,n){let i,o,s,u,y,E;if(i={...e},s=0,{onProgress:u}=i,i.maxSizeMB=i.maxSizeMB||Number.POSITIVE_INFINITY,y=typeof i.useWebWorker!="boolean"||i.useWebWorker,delete i.useWebWorker,i.onProgress=p=>{s=p,typeof u=="function"&&u(s)},!(t instanceof Blob||t instanceof os))return n(new Error("The file given is not an instance of Blob or File"));if(!/^image/.test(t.type))return n(new Error("The file given is not an image"));if(E=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,!y||typeof Worker!="function"||E)return an(t,i).then((function(p){try{return o=p,h.call(this)}catch(b){return n(b)}}).bind(this),n);var c=(function(){try{return h.call(this)}catch(p){return n(p)}}).bind(this),l=function(p){try{return an(t,i).then(function(b){try{return o=b,c()}catch(O){return n(O)}},n)}catch(b){return n(b)}};try{return i.libURL=i.libURL||"https://cdn.jsdelivr.net/npm/browser-image-compression@2.0.2/dist/browser-image-compression.js",as(t,i).then(function(p){try{return o=p,c()}catch{return l()}},l)}catch{l()}function h(){try{o.name=t.name,o.lastModified=t.lastModified}catch{}try{i.preserveExif&&t.type==="image/jpeg"&&(!i.fileType||i.fileType&&i.fileType===t.type)&&(o=Dn(t,o))}catch{}return r(o)}})}de.getDataUrlFromFile=Hn,de.getFilefromDataUrl=Ar,de.loadImage=Wn,de.drawImageInCanvas=Jn,de.drawFileInCanvas=Ft,de.canvasToFile=kt,de.getExifOrientation=zn,de.handleMaxWidthOrHeight=Gn,de.followExifOrientation=Yn,de.cleanupCanvasMemory=ke,de.isAutoOrientationInBrowser=ot,de.approximateBelowMaximumCanvasSizeOfBrowser=Vn,de.copyExifWithoutOrientation=Dn,de.getBrowserName=Ze,de.version="2.0.2";class Zn{constructor(){ht(this,"options",{app_id:"postgraduate-task_app-cgoisax",api_key:"cAMxh77dKtSL97n5fi4Jrg3oyC23BrGT0xOp2WZbig5u9XjzRQSX5psKp7eo0L4y",cluster:"mongodb-atlas",database:"postgraduate-task",collection:"tasks"});ht(this,"app");ht(this,"user",null);ht(this,"databse",null);this.app=new He({id:this.options.app_id})}async initialize(){const e=Ae.apiKey(this.options.api_key);this.user=await this.app.logIn(e),this.databse=this.user.mongoClient("mongodb-atlas")}getCollection(e,r){if(!this.databse)throw new Error("MongoDB client not initialized. Call initialize() first.");return this.databse.db(e).collection(r)}async findList(e,r,n={}){return await this.getCollection(e,r).find(n)}async findOne(e,r,n={}){return await this.getCollection(e,r).findOne(n)}async findMany(e,r,n={}){return await this.getCollection(e,r).find(n)}async addOne(e,r,n={}){return(await this.getCollection(e,r).insertOne(n)).insertedId}async updateOne(e,r,n={},i){return(await this.getCollection(e,r).updateOne(n,{$set:i})).modifiedCount}async deleteOne(e,r,n={}){return(await this.getCollection(e,r).deleteOne(n)).deletedCount}async addMany(e,r,n){const o=await this.getCollection(e,r).insertMany(n);return Object.values(o.insertedIds)}async updateMany(e,r,n={},i){return(await this.getCollection(e,r).updateMany(n,{$set:i})).modifiedCount}async deleteMany(e,r,n={}){return(await this.getCollection(e,r).deleteMany(n)).deletedCount}async compressImage(e){try{const n=await de(e,{maxSizeMB:1,maxWidthOrHeight:1920,useWebWorker:!0});return new File([n],e.name,{type:n.type})}catch(r){console.error("Error in compression or upload:",r)}return null}async fileToBinary(e){return new Promise((r,n)=>{const i=new FileReader;i.onload=o=>{if(o.target&&o.target.result){const s=new We(new Uint8Array(o.target.result));r(s)}else n(new Error("Failed to read file"))},i.onerror=o=>n(o),i.readAsArrayBuffer(e)})}async uploadFile(e,r,n,i={}){const o=this.getCollection(e,r),s=await this.compressImage(n);if(s==null)throw Error("compress image error");const u=await this.fileToBinary(s),y={filename:n.name,contentType:n.type,length:n.size,uploadDate:new Date,...i,data:u};return{insertedId:(await o.insertOne(y)).insertedId,file_name:n.name}}async getFile(e,r,n){const o=await this.getCollection(e,r).findOne({_id:n});if(!o||!o.data)throw new Error("File not found");const{data:s,...u}=o;return{fileData:s.buffer,metadata:u}}async getImageUrl(e,r,n){try{const{fileData:i,metadata:o}=await this.getFile(e,r,n),s=new Blob([i],{type:o.contentType});return URL.createObjectURL(s)}catch(i){console.error("Error displaying image:",i)}return null}async deleteFile(e,r,n){return(await this.getCollection(e,r).deleteOne({_id:n})).deletedCount>0}}const xt=t=>(dr("data-v-a95514b2"),t=t(),gr(),t),fs={class:"submit-form"},us={key:0},cs=xt(()=>ue("label",{class:"submit-form-text",for:"title"},"Input title: ",-1)),hs=xt(()=>ue("br",null,null,-1)),ls=xt(()=>ue("label",{class:"submit-form-text",for:"input-file"},"Input Picutre: ",-1)),ps=xt(()=>ue("br",null,null,-1)),ds=xt(()=>ue("label",{class:"submit-form-text",for:"submit-content"},"Submit Message: ",-1)),gs=pr({__name:"SubmitForm",props:["is_submit_form_show"],emits:["submit","start_loading","stop_loading"],setup(t,{emit:e}){const r=e,n=t,i=new Zn;fn(async()=>{await i.initialize()});const o=pt();function s(y){let E=y.target.files;if(E==null||E==null){alert("No files upload");return}for(let c of E)if(c.size>500*1024*1024){alert("upload file over than 500M!");return}r("start_loading");for(let c of E)new FormData().append("file",c),i.uploadFile("postgraduate-task","files",c).then(h=>{var p,b;(p=o.value.file_id_list)==null||p.push(h.insertedId),(b=o.value.file_name_list)==null||b.push(h.file_name)}).catch(h=>{console.log(h)}).finally(()=>{r("stop_loading")})}function u(){r("submit",o.value),o.value={},o.value.status=0,o.value.file_id_list=[],o.value.file_name_list=[]}return(y,E)=>(le(),ye("div",fs,[ue("div",{class:"submit-button",onClick:u},"submit"),n.is_submit_form_show?(le(),ye("div",us,[cs,Or(ue("input",{class:"submit-form-title",id:"title",type:"text","onUpdate:modelValue":E[0]||(E[0]=c=>o.value.title=c)},null,512),[[Tr,o.value.title]]),hs,ls,ue("input",{class:"input-file",id:"input-file",type:"file",multiple:"",accept:".png, .jpg, .jpeg",name:"Upload",onChange:s},null,32),ps,ds,Or(ue("textarea",{class:"submit-content",id:"submit-content",rows:"10",placeholder:"input your submit message: ","onUpdate:modelValue":E[1]||(E[1]=c=>o.value.message=c)},null,512),[[Tr,o.value.message]])])):dt("",!0)]))}}),ys=Ct(gs,[["__scopeId","data-v-a95514b2"]]),ms={class:"image-block"},ws=["src"],bs=pr({__name:"ImageBlock",props:["image_url"],emits:["close"],setup(t,{emit:e}){const r=t,n=e;function i(){n("close")}return(o,s)=>(le(),ye("div",ms,[ue("div",{class:"close",onClick:i},"X"),ue("img",{src:r.image_url,alt:""},null,8,ws)]))}}),vs=Ct(bs,[["__scopeId","data-v-7e14827f"]]),xs={},Es=t=>(dr("data-v-4c05609e"),t=t(),gr(),t),_s={class:"loading"},As=Es(()=>ue("div",{class:"loading-spinner"},null,-1)),Ss=[As];function Ns(t,e){return le(),ye("div",_s,Ss)}const Os=Ct(xs,[["render",Ns],["__scopeId","data-v-4c05609e"]]),Ts=t=>(dr("data-v-3fedb951"),t=t(),gr(),t),Is={class:"submission"},Us=Ts(()=>ue("h1",null,"This is the submission page",-1)),Bs={key:2,class:"submission-content"},Rs={class:"submission-collapse-container"},Fs={class:"submission-collapse-func"},ks={class:"submission-collapse-func-item"},Cs={class:"submission-collapse-func-item"},Ms={class:"submission-collapse-func-item"},Ls={class:"submission-func"},Ds={class:"submission-title"},Ps={class:"submission-func-container"},js={key:0,class:"submission-file"},$s=["onClick"],Hs={class:"submission-date"},Ws={class:"submission-message"},Vs={key:0,class:"submission-line"},Js={key:3,class:"empty"},zs=pr({__name:"Submission",setup(t){const e=pt(!1),r=pt(!1),n=pt(!1),i=["submit","checked","awarded","failed"],o=["#895ef9fc","#41d6ba","#3ddf58","#f95e85fc"],s=pt(null),u=Ir([]),y=Ir([]),E=new Zn;function c(){r.value=!0}function l(){r.value=!1}async function h(){c(),await E.findList("postgraduate-task","tasks").then(L=>{y.splice(0,y.length),u.splice(0,u.length),L!=null&&y.push(...L),y.sort((D,A)=>A.date.getTime()-D.date.getTime()),y.forEach(D=>{u.length==0||u.filter(A=>A.id==Et(D.date).format("YY-MM-DD")).length==0?u.push({id:Et(D.date).format("YY-MM-DD"),task_list:[D]}):u.map(A=>{if(A.id==Et(D.date).format("YY-MM-DD")){A.task_list.push(D);return}})})}).catch(L=>{console.log(L)}).finally(()=>{l()})}fn(async()=>{r.value=!0,await E.initialize(),await h()});function p(L){L.target.parentNode.nextElementSibling.style.display=="none"?L.target.parentNode.nextElementSibling.style.display="block":L.target.parentNode.nextElementSibling.style.display="none"}function b(L,D){let A=0;for(let H of L)H.status>=D&&A++;return A}function O(L){e.value=!0,c(),s.value=null,E.getImageUrl("postgraduate-task","files",L).then(D=>{s.value=D,l()})}function k(){s.value=null,e.value=!1,l()}function S(L){n.value=!n.value,n.value==!1&&(L.message==null||L.title==null||L.message==""||L.title==""?alert("Nothing to submit! The form should be completed!"):(L.date=new Date,E.addOne("postgraduate-task","tasks",L),h()))}return(L,D)=>(le(),ye("div",Is,[r.value?(le(),Ur(Os,{key:0})):dt("",!0),e.value?(le(),Ur(vs,{key:1,image_url:s.value,onClose:k},null,8,["image_url"])):dt("",!0),Us,ei(ys,{is_submit_form_show:n.value,onSubmit:S,onStart_loading:c,onStop_loading:l},null,8,["is_submit_form_show"]),u.length>0?(le(),ye("ul",Bs,[(le(!0),ye(zt,null,Gt(u,(A,H)=>(le(),ye("li",{class:"submission-item",key:A.id},[ue("div",Rs,[ue("div",{class:"submission-collapse",onClick:p},De(A.id),1),ue("div",Fs,[ue("span",ks,"Submitted: "+De(b(A.task_list,0)),1),ue("span",Cs,"Checked: "+De(b(A.task_list,1)),1),ue("span",Ms,"Awarded: "+De(b(A.task_list,2)),1)])]),ue("div",{class:"submission-item-container",style:Br({display:H==0?"display":"none"})},[(le(!0),ye(zt,null,Gt(A.task_list,(_,P)=>(le(),ye("div",{class:"submission-item-container-content",key:P},[ue("div",Ls,[ue("div",Ds,De(_.title),1),ue("div",Ps,[_.file_id_list?(le(),ye("div",js,[(le(!0),ye(zt,null,Gt(_.file_name_list,(v,w)=>(le(),ye("div",{class:"submission-file-item",key:w,onClick:T=>O(_.file_id_list[w])},De(v),9,$s))),128))])):dt("",!0),ue("div",Hs,De(ti(Et)(_.date).format("HH:mm:ss")),1),ue("div",{class:ri({"submission-status":!0,"submission-status-error":_.status==3}),style:Br({backgroundColor:o[_.status]})},De(i[_.status]),7)])]),ue("div",Ws,De(_.message),1),P!=A.task_list.length-1?(le(),ye("hr",Vs)):dt("",!0)]))),128))],4)]))),128))])):(le(),ye("div",Js," Nothing to show! "))]))}}),Zs=Ct(zs,[["__scopeId","data-v-3fedb951"]]);export{Zs as default};
