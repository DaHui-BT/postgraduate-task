var sn=Object.defineProperty;var an=(e,t,r)=>t in e?sn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var Tt=(e,t,r)=>an(e,typeof t!="symbol"?t+"":t,r);import{d as Ie,o as _r,r as ve,c as W,a as R,w as He,v as Ye,b as Bt,e as j,p as Be,f as Ue,_ as qt,g as Vt,h as ze,i as fn,F as fe,j as ue,k as Wt,t as ot,u as un,n as cn,l as Ge}from"./index-CQgR9D-a.js";function hn(e,t){return t={exports:{}},e(t,t.exports),t.exports}var ln=mn,pn=bn,dn=En,it=[],Z=[],gn=typeof Uint8Array<"u"?Uint8Array:Array,ce="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var wt=0,yn=ce.length;wt<yn;++wt)it[wt]=ce[wt],Z[ce.charCodeAt(wt)]=wt;Z[45]=62;Z[95]=63;function Sr(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");r===-1&&(r=t);var o=r===t?0:4-r%4;return[r,o]}function mn(e){var t=Sr(e),r=t[0],o=t[1];return(r+o)*3/4-o}function wn(e,t,r){return(t+r)*3/4-r}function bn(e){var t,r=Sr(e),o=r[0],a=r[1],u=new gn(wn(e,o,a)),s=0,l=a>0?o-4:o,p;for(p=0;p<l;p+=4)t=Z[e.charCodeAt(p)]<<18|Z[e.charCodeAt(p+1)]<<12|Z[e.charCodeAt(p+2)]<<6|Z[e.charCodeAt(p+3)],u[s++]=t>>16&255,u[s++]=t>>8&255,u[s++]=t&255;return a===2&&(t=Z[e.charCodeAt(p)]<<2|Z[e.charCodeAt(p+1)]>>4,u[s++]=t&255),a===1&&(t=Z[e.charCodeAt(p)]<<10|Z[e.charCodeAt(p+1)]<<4|Z[e.charCodeAt(p+2)]>>2,u[s++]=t>>8&255,u[s++]=t&255),u}function xn(e){return it[e>>18&63]+it[e>>12&63]+it[e>>6&63]+it[e&63]}function vn(e,t,r){for(var o,a=[],u=t;u<r;u+=3)o=(e[u]<<16&16711680)+(e[u+1]<<8&65280)+(e[u+2]&255),a.push(xn(o));return a.join("")}function En(e){for(var t,r=e.length,o=r%3,a=[],u=16383,s=0,l=r-o;s<l;s+=u)a.push(vn(e,s,s+u>l?l:s+u));return o===1?(t=e[r-1],a.push(it[t>>2]+it[t<<4&63]+"==")):o===2&&(t=(e[r-2]<<8)+e[r-1],a.push(it[t>>10]+it[t>>4&63]+it[t<<2&63]+"=")),a.join("")}var he={byteLength:ln,toByteArray:pn,fromByteArray:dn};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var _n=function(t,r,o,a,u){var s,l,p=u*8-a-1,m=(1<<p)-1,y=m>>1,w=-7,x=o?u-1:0,_=o?-1:1,E=t[r+x];for(x+=_,s=E&(1<<-w)-1,E>>=-w,w+=p;w>0;s=s*256+t[r+x],x+=_,w-=8);for(l=s&(1<<-w)-1,s>>=-w,w+=a;w>0;l=l*256+t[r+x],x+=_,w-=8);if(s===0)s=1-y;else{if(s===m)return l?NaN:(E?-1:1)*(1/0);l=l+Math.pow(2,a),s=s-y}return(E?-1:1)*l*Math.pow(2,s-a)},Sn=function(t,r,o,a,u,s){var l,p,m,y=s*8-u-1,w=(1<<y)-1,x=w>>1,_=u===23?Math.pow(2,-24)-Math.pow(2,-77):0,E=a?0:s-1,A=a?1:-1,L=r<0||r===0&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(p=isNaN(r)?1:0,l=w):(l=Math.floor(Math.log(r)/Math.LN2),r*(m=Math.pow(2,-l))<1&&(l--,m*=2),l+x>=1?r+=_/m:r+=_*Math.pow(2,1-x),r*m>=2&&(l++,m/=2),l+x>=w?(p=0,l=w):l+x>=1?(p=(r*m-1)*Math.pow(2,u),l=l+x):(p=r*Math.pow(2,x-1)*Math.pow(2,u),l=0));u>=8;t[o+E]=p&255,E+=A,p/=256,u-=8);for(l=l<<u|p,y+=u;y>0;t[o+E]=l&255,E+=A,l/=256,y-=8);t[o+E-A]|=L*128},bt={read:_n,write:Sn},Qt=hn(function(e,t){var r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=s,t.SlowBuffer=F,t.INSPECT_MAX_BYTES=50;var o=2147483647;t.kMaxLength=o,s.TYPED_ARRAY_SUPPORT=a(),!s.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function a(){try{var f=new Uint8Array(1),n={foo:function(){return 42}};return Object.setPrototypeOf(n,Uint8Array.prototype),Object.setPrototypeOf(f,n),f.foo()===42}catch{return!1}}Object.defineProperty(s.prototype,"parent",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.buffer}}),Object.defineProperty(s.prototype,"offset",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.byteOffset}});function u(f){if(f>o)throw new RangeError('The value "'+f+'" is invalid for option "size"');var n=new Uint8Array(f);return Object.setPrototypeOf(n,s.prototype),n}function s(f,n,i){if(typeof f=="number"){if(typeof n=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return y(f)}return l(f,n,i)}s.poolSize=8192;function l(f,n,i){if(typeof f=="string")return w(f,n);if(ArrayBuffer.isView(f))return _(f);if(f==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+babelHelpers.typeof(f));if(rt(f,ArrayBuffer)||f&&rt(f.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(rt(f,SharedArrayBuffer)||f&&rt(f.buffer,SharedArrayBuffer)))return E(f,n,i);if(typeof f=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var c=f.valueOf&&f.valueOf();if(c!=null&&c!==f)return s.from(c,n,i);var h=A(f);if(h)return h;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof f[Symbol.toPrimitive]=="function")return s.from(f[Symbol.toPrimitive]("string"),n,i);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+babelHelpers.typeof(f))}s.from=function(f,n,i){return l(f,n,i)},Object.setPrototypeOf(s.prototype,Uint8Array.prototype),Object.setPrototypeOf(s,Uint8Array);function p(f){if(typeof f!="number")throw new TypeError('"size" argument must be of type number');if(f<0)throw new RangeError('The value "'+f+'" is invalid for option "size"')}function m(f,n,i){return p(f),f<=0?u(f):n!==void 0?typeof i=="string"?u(f).fill(n,i):u(f).fill(n):u(f)}s.alloc=function(f,n,i){return m(f,n,i)};function y(f){return p(f),u(f<0?0:L(f)|0)}s.allocUnsafe=function(f){return y(f)},s.allocUnsafeSlow=function(f){return y(f)};function w(f,n){if((typeof n!="string"||n==="")&&(n="utf8"),!s.isEncoding(n))throw new TypeError("Unknown encoding: "+n);var i=S(f,n)|0,c=u(i),h=c.write(f,n);return h!==i&&(c=c.slice(0,h)),c}function x(f){for(var n=f.length<0?0:L(f.length)|0,i=u(n),c=0;c<n;c+=1)i[c]=f[c]&255;return i}function _(f){if(rt(f,Uint8Array)){var n=new Uint8Array(f);return E(n.buffer,n.byteOffset,n.byteLength)}return x(f)}function E(f,n,i){if(n<0||f.byteLength<n)throw new RangeError('"offset" is outside of buffer bounds');if(f.byteLength<n+(i||0))throw new RangeError('"length" is outside of buffer bounds');var c;return n===void 0&&i===void 0?c=new Uint8Array(f):i===void 0?c=new Uint8Array(f,n):c=new Uint8Array(f,n,i),Object.setPrototypeOf(c,s.prototype),c}function A(f){if(s.isBuffer(f)){var n=L(f.length)|0,i=u(n);return i.length===0||f.copy(i,0,0,n),i}if(f.length!==void 0)return typeof f.length!="number"||ae(f.length)?u(0):x(f);if(f.type==="Buffer"&&Array.isArray(f.data))return x(f.data)}function L(f){if(f>=o)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return f|0}function F(f){return+f!=f&&(f=0),s.alloc(+f)}s.isBuffer=function(n){return n!=null&&n._isBuffer===!0&&n!==s.prototype},s.compare=function(n,i){if(rt(n,Uint8Array)&&(n=s.from(n,n.offset,n.byteLength)),rt(i,Uint8Array)&&(i=s.from(i,i.offset,i.byteLength)),!s.isBuffer(n)||!s.isBuffer(i))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(n===i)return 0;for(var c=n.length,h=i.length,d=0,g=Math.min(c,h);d<g;++d)if(n[d]!==i[d]){c=n[d],h=i[d];break}return c<h?-1:h<c?1:0},s.isEncoding=function(n){switch(String(n).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(n,i){if(!Array.isArray(n))throw new TypeError('"list" argument must be an Array of Buffers');if(n.length===0)return s.alloc(0);var c;if(i===void 0)for(i=0,c=0;c<n.length;++c)i+=n[c].length;var h=s.allocUnsafe(i),d=0;for(c=0;c<n.length;++c){var g=n[c];if(rt(g,Uint8Array))d+g.length>h.length?s.from(g).copy(h,d):Uint8Array.prototype.set.call(h,g,d);else if(s.isBuffer(g))g.copy(h,d);else throw new TypeError('"list" argument must be an Array of Buffers');d+=g.length}return h};function S(f,n){if(s.isBuffer(f))return f.length;if(ArrayBuffer.isView(f)||rt(f,ArrayBuffer))return f.byteLength;if(typeof f!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+babelHelpers.typeof(f));var i=f.length,c=arguments.length>2&&arguments[2]===!0;if(!c&&i===0)return 0;for(var h=!1;;)switch(n){case"ascii":case"latin1":case"binary":return i;case"utf8":case"utf-8":return se(f).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return i*2;case"hex":return i>>>1;case"base64":return Je(f).length;default:if(h)return c?-1:se(f).length;n=(""+n).toLowerCase(),h=!0}}s.byteLength=S;function B(f,n,i){var c=!1;if((n===void 0||n<0)&&(n=0),n>this.length||((i===void 0||i>this.length)&&(i=this.length),i<=0)||(i>>>=0,n>>>=0,i<=n))return"";for(f||(f="utf8");;)switch(f){case"hex":return Q(this,n,i);case"utf8":case"utf-8":return yt(this,n,i);case"ascii":return mt(this,n,i);case"latin1":case"binary":return D(this,n,i);case"base64":return gt(this,n,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,n,i);default:if(c)throw new TypeError("Unknown encoding: "+f);f=(f+"").toLowerCase(),c=!0}}s.prototype._isBuffer=!0;function b(f,n,i){var c=f[n];f[n]=f[i],f[i]=c}s.prototype.swap16=function(){var n=this.length;if(n%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var i=0;i<n;i+=2)b(this,i,i+1);return this},s.prototype.swap32=function(){var n=this.length;if(n%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var i=0;i<n;i+=4)b(this,i,i+3),b(this,i+1,i+2);return this},s.prototype.swap64=function(){var n=this.length;if(n%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var i=0;i<n;i+=8)b(this,i,i+7),b(this,i+1,i+6),b(this,i+2,i+5),b(this,i+3,i+4);return this},s.prototype.toString=function(){var n=this.length;return n===0?"":arguments.length===0?yt(this,0,n):B.apply(this,arguments)},s.prototype.toLocaleString=s.prototype.toString,s.prototype.equals=function(n){if(!s.isBuffer(n))throw new TypeError("Argument must be a Buffer");return this===n?!0:s.compare(this,n)===0},s.prototype.inspect=function(){var n="",i=t.INSPECT_MAX_BYTES;return n=this.toString("hex",0,i).replace(/(.{2})/g,"$1 ").trim(),this.length>i&&(n+=" ... "),"<Buffer "+n+">"},r&&(s.prototype[r]=s.prototype.inspect),s.prototype.compare=function(n,i,c,h,d){if(rt(n,Uint8Array)&&(n=s.from(n,n.offset,n.byteLength)),!s.isBuffer(n))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+babelHelpers.typeof(n));if(i===void 0&&(i=0),c===void 0&&(c=n?n.length:0),h===void 0&&(h=0),d===void 0&&(d=this.length),i<0||c>n.length||h<0||d>this.length)throw new RangeError("out of range index");if(h>=d&&i>=c)return 0;if(h>=d)return-1;if(i>=c)return 1;if(i>>>=0,c>>>=0,h>>>=0,d>>>=0,this===n)return 0;for(var g=d-h,O=c-i,U=Math.min(g,O),k=this.slice(h,d),V=n.slice(i,c),M=0;M<U;++M)if(k[M]!==V[M]){g=k[M],O=V[M];break}return g<O?-1:O<g?1:0};function J(f,n,i,c,h){if(f.length===0)return-1;if(typeof i=="string"?(c=i,i=0):i>2147483647?i=2147483647:i<-2147483648&&(i=-2147483648),i=+i,ae(i)&&(i=h?0:f.length-1),i<0&&(i=f.length+i),i>=f.length){if(h)return-1;i=f.length-1}else if(i<0)if(h)i=0;else return-1;if(typeof n=="string"&&(n=s.from(n,c)),s.isBuffer(n))return n.length===0?-1:$(f,n,i,c,h);if(typeof n=="number")return n=n&255,typeof Uint8Array.prototype.indexOf=="function"?h?Uint8Array.prototype.indexOf.call(f,n,i):Uint8Array.prototype.lastIndexOf.call(f,n,i):$(f,[n],i,c,h);throw new TypeError("val must be string, number or Buffer")}function $(f,n,i,c,h){var d=1,g=f.length,O=n.length;if(c!==void 0&&(c=String(c).toLowerCase(),c==="ucs2"||c==="ucs-2"||c==="utf16le"||c==="utf-16le")){if(f.length<2||n.length<2)return-1;d=2,g/=2,O/=2,i/=2}function U(Ve,We){return d===1?Ve[We]:Ve.readUInt16BE(We*d)}var k;if(h){var V=-1;for(k=i;k<g;k++)if(U(f,k)===U(n,V===-1?0:k-V)){if(V===-1&&(V=k),k-V+1===O)return V*d}else V!==-1&&(k-=k-V),V=-1}else for(i+O>g&&(i=g-O),k=i;k>=0;k--){for(var M=!0,Jt=0;Jt<O;Jt++)if(U(f,k+Jt)!==U(n,Jt)){M=!1;break}if(M)return k}return-1}s.prototype.includes=function(n,i,c){return this.indexOf(n,i,c)!==-1},s.prototype.indexOf=function(n,i,c){return J(this,n,i,c,!0)},s.prototype.lastIndexOf=function(n,i,c){return J(this,n,i,c,!1)};function q(f,n,i,c){i=Number(i)||0;var h=f.length-i;c?(c=Number(c),c>h&&(c=h)):c=h;var d=n.length;c>d/2&&(c=d/2);for(var g=0;g<c;++g){var O=parseInt(n.substr(g*2,2),16);if(ae(O))return g;f[i+g]=O}return g}function Ot(f,n,i,c){return Pt(se(n,f.length-i),f,i,c)}function st(f,n,i,c){return Pt(rn(n),f,i,c)}function Ct(f,n,i,c){return Pt(Je(n),f,i,c)}function $t(f,n,i,c){return Pt(nn(n,f.length-i),f,i,c)}s.prototype.write=function(n,i,c,h){if(i===void 0)h="utf8",c=this.length,i=0;else if(c===void 0&&typeof i=="string")h=i,c=this.length,i=0;else if(isFinite(i))i=i>>>0,isFinite(c)?(c=c>>>0,h===void 0&&(h="utf8")):(h=c,c=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var d=this.length-i;if((c===void 0||c>d)&&(c=d),n.length>0&&(c<0||i<0)||i>this.length)throw new RangeError("Attempt to write outside buffer bounds");h||(h="utf8");for(var g=!1;;)switch(h){case"hex":return q(this,n,i,c);case"utf8":case"utf-8":return Ot(this,n,i,c);case"ascii":case"latin1":case"binary":return st(this,n,i,c);case"base64":return Ct(this,n,i,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return $t(this,n,i,c);default:if(g)throw new TypeError("Unknown encoding: "+h);h=(""+h).toLowerCase(),g=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function gt(f,n,i){return n===0&&i===f.length?he.fromByteArray(f):he.fromByteArray(f.slice(n,i))}function yt(f,n,i){i=Math.min(f.length,i);for(var c=[],h=n;h<i;){var d=f[h],g=null,O=d>239?4:d>223?3:d>191?2:1;if(h+O<=i){var U,k,V,M;switch(O){case 1:d<128&&(g=d);break;case 2:U=f[h+1],(U&192)===128&&(M=(d&31)<<6|U&63,M>127&&(g=M));break;case 3:U=f[h+1],k=f[h+2],(U&192)===128&&(k&192)===128&&(M=(d&15)<<12|(U&63)<<6|k&63,M>2047&&(M<55296||M>57343)&&(g=M));break;case 4:U=f[h+1],k=f[h+2],V=f[h+3],(U&192)===128&&(k&192)===128&&(V&192)===128&&(M=(d&15)<<18|(U&63)<<12|(k&63)<<6|V&63,M>65535&&M<1114112&&(g=M))}}g===null?(g=65533,O=1):g>65535&&(g-=65536,c.push(g>>>10&1023|55296),g=56320|g&1023),c.push(g),h+=O}return jt(c)}var at=4096;function jt(f){var n=f.length;if(n<=at)return String.fromCharCode.apply(String,f);for(var i="",c=0;c<n;)i+=String.fromCharCode.apply(String,f.slice(c,c+=at));return i}function mt(f,n,i){var c="";i=Math.min(f.length,i);for(var h=n;h<i;++h)c+=String.fromCharCode(f[h]&127);return c}function D(f,n,i){var c="";i=Math.min(f.length,i);for(var h=n;h<i;++h)c+=String.fromCharCode(f[h]);return c}function Q(f,n,i){var c=f.length;(!n||n<0)&&(n=0),(!i||i<0||i>c)&&(i=c);for(var h="",d=n;d<i;++d)h+=on[f[d]];return h}function T(f,n,i){for(var c=f.slice(n,i),h="",d=0;d<c.length-1;d+=2)h+=String.fromCharCode(c[d]+c[d+1]*256);return h}s.prototype.slice=function(n,i){var c=this.length;n=~~n,i=i===void 0?c:~~i,n<0?(n+=c,n<0&&(n=0)):n>c&&(n=c),i<0?(i+=c,i<0&&(i=0)):i>c&&(i=c),i<n&&(i=n);var h=this.subarray(n,i);return Object.setPrototypeOf(h,s.prototype),h};function N(f,n,i){if(f%1!==0||f<0)throw new RangeError("offset is not uint");if(f+n>i)throw new RangeError("Trying to access beyond buffer length")}s.prototype.readUintLE=s.prototype.readUIntLE=function(n,i,c){n=n>>>0,i=i>>>0,c||N(n,i,this.length);for(var h=this[n],d=1,g=0;++g<i&&(d*=256);)h+=this[n+g]*d;return h},s.prototype.readUintBE=s.prototype.readUIntBE=function(n,i,c){n=n>>>0,i=i>>>0,c||N(n,i,this.length);for(var h=this[n+--i],d=1;i>0&&(d*=256);)h+=this[n+--i]*d;return h},s.prototype.readUint8=s.prototype.readUInt8=function(n,i){return n=n>>>0,i||N(n,1,this.length),this[n]},s.prototype.readUint16LE=s.prototype.readUInt16LE=function(n,i){return n=n>>>0,i||N(n,2,this.length),this[n]|this[n+1]<<8},s.prototype.readUint16BE=s.prototype.readUInt16BE=function(n,i){return n=n>>>0,i||N(n,2,this.length),this[n]<<8|this[n+1]},s.prototype.readUint32LE=s.prototype.readUInt32LE=function(n,i){return n=n>>>0,i||N(n,4,this.length),(this[n]|this[n+1]<<8|this[n+2]<<16)+this[n+3]*16777216},s.prototype.readUint32BE=s.prototype.readUInt32BE=function(n,i){return n=n>>>0,i||N(n,4,this.length),this[n]*16777216+(this[n+1]<<16|this[n+2]<<8|this[n+3])},s.prototype.readIntLE=function(n,i,c){n=n>>>0,i=i>>>0,c||N(n,i,this.length);for(var h=this[n],d=1,g=0;++g<i&&(d*=256);)h+=this[n+g]*d;return d*=128,h>=d&&(h-=Math.pow(2,8*i)),h},s.prototype.readIntBE=function(n,i,c){n=n>>>0,i=i>>>0,c||N(n,i,this.length);for(var h=i,d=1,g=this[n+--h];h>0&&(d*=256);)g+=this[n+--h]*d;return d*=128,g>=d&&(g-=Math.pow(2,8*i)),g},s.prototype.readInt8=function(n,i){return n=n>>>0,i||N(n,1,this.length),this[n]&128?(255-this[n]+1)*-1:this[n]},s.prototype.readInt16LE=function(n,i){n=n>>>0,i||N(n,2,this.length);var c=this[n]|this[n+1]<<8;return c&32768?c|4294901760:c},s.prototype.readInt16BE=function(n,i){n=n>>>0,i||N(n,2,this.length);var c=this[n+1]|this[n]<<8;return c&32768?c|4294901760:c},s.prototype.readInt32LE=function(n,i){return n=n>>>0,i||N(n,4,this.length),this[n]|this[n+1]<<8|this[n+2]<<16|this[n+3]<<24},s.prototype.readInt32BE=function(n,i){return n=n>>>0,i||N(n,4,this.length),this[n]<<24|this[n+1]<<16|this[n+2]<<8|this[n+3]},s.prototype.readFloatLE=function(n,i){return n=n>>>0,i||N(n,4,this.length),bt.read(this,n,!0,23,4)},s.prototype.readFloatBE=function(n,i){return n=n>>>0,i||N(n,4,this.length),bt.read(this,n,!1,23,4)},s.prototype.readDoubleLE=function(n,i){return n=n>>>0,i||N(n,8,this.length),bt.read(this,n,!0,52,8)},s.prototype.readDoubleBE=function(n,i){return n=n>>>0,i||N(n,8,this.length),bt.read(this,n,!1,52,8)};function Y(f,n,i,c,h,d){if(!s.isBuffer(f))throw new TypeError('"buffer" argument must be a Buffer instance');if(n>h||n<d)throw new RangeError('"value" argument is out of bounds');if(i+c>f.length)throw new RangeError("Index out of range")}s.prototype.writeUintLE=s.prototype.writeUIntLE=function(n,i,c,h){if(n=+n,i=i>>>0,c=c>>>0,!h){var d=Math.pow(2,8*c)-1;Y(this,n,i,c,d,0)}var g=1,O=0;for(this[i]=n&255;++O<c&&(g*=256);)this[i+O]=n/g&255;return i+c},s.prototype.writeUintBE=s.prototype.writeUIntBE=function(n,i,c,h){if(n=+n,i=i>>>0,c=c>>>0,!h){var d=Math.pow(2,8*c)-1;Y(this,n,i,c,d,0)}var g=c-1,O=1;for(this[i+g]=n&255;--g>=0&&(O*=256);)this[i+g]=n/O&255;return i+c},s.prototype.writeUint8=s.prototype.writeUInt8=function(n,i,c){return n=+n,i=i>>>0,c||Y(this,n,i,1,255,0),this[i]=n&255,i+1},s.prototype.writeUint16LE=s.prototype.writeUInt16LE=function(n,i,c){return n=+n,i=i>>>0,c||Y(this,n,i,2,65535,0),this[i]=n&255,this[i+1]=n>>>8,i+2},s.prototype.writeUint16BE=s.prototype.writeUInt16BE=function(n,i,c){return n=+n,i=i>>>0,c||Y(this,n,i,2,65535,0),this[i]=n>>>8,this[i+1]=n&255,i+2},s.prototype.writeUint32LE=s.prototype.writeUInt32LE=function(n,i,c){return n=+n,i=i>>>0,c||Y(this,n,i,4,4294967295,0),this[i+3]=n>>>24,this[i+2]=n>>>16,this[i+1]=n>>>8,this[i]=n&255,i+4},s.prototype.writeUint32BE=s.prototype.writeUInt32BE=function(n,i,c){return n=+n,i=i>>>0,c||Y(this,n,i,4,4294967295,0),this[i]=n>>>24,this[i+1]=n>>>16,this[i+2]=n>>>8,this[i+3]=n&255,i+4},s.prototype.writeIntLE=function(n,i,c,h){if(n=+n,i=i>>>0,!h){var d=Math.pow(2,8*c-1);Y(this,n,i,c,d-1,-d)}var g=0,O=1,U=0;for(this[i]=n&255;++g<c&&(O*=256);)n<0&&U===0&&this[i+g-1]!==0&&(U=1),this[i+g]=(n/O>>0)-U&255;return i+c},s.prototype.writeIntBE=function(n,i,c,h){if(n=+n,i=i>>>0,!h){var d=Math.pow(2,8*c-1);Y(this,n,i,c,d-1,-d)}var g=c-1,O=1,U=0;for(this[i+g]=n&255;--g>=0&&(O*=256);)n<0&&U===0&&this[i+g+1]!==0&&(U=1),this[i+g]=(n/O>>0)-U&255;return i+c},s.prototype.writeInt8=function(n,i,c){return n=+n,i=i>>>0,c||Y(this,n,i,1,127,-128),n<0&&(n=255+n+1),this[i]=n&255,i+1},s.prototype.writeInt16LE=function(n,i,c){return n=+n,i=i>>>0,c||Y(this,n,i,2,32767,-32768),this[i]=n&255,this[i+1]=n>>>8,i+2},s.prototype.writeInt16BE=function(n,i,c){return n=+n,i=i>>>0,c||Y(this,n,i,2,32767,-32768),this[i]=n>>>8,this[i+1]=n&255,i+2},s.prototype.writeInt32LE=function(n,i,c){return n=+n,i=i>>>0,c||Y(this,n,i,4,2147483647,-2147483648),this[i]=n&255,this[i+1]=n>>>8,this[i+2]=n>>>16,this[i+3]=n>>>24,i+4},s.prototype.writeInt32BE=function(n,i,c){return n=+n,i=i>>>0,c||Y(this,n,i,4,2147483647,-2147483648),n<0&&(n=4294967295+n+1),this[i]=n>>>24,this[i+1]=n>>>16,this[i+2]=n>>>8,this[i+3]=n&255,i+4};function $e(f,n,i,c,h,d){if(i+c>f.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("Index out of range")}function je(f,n,i,c,h){return n=+n,i=i>>>0,h||$e(f,n,i,4),bt.write(f,n,i,c,23,4),i+4}s.prototype.writeFloatLE=function(n,i,c){return je(this,n,i,!0,c)},s.prototype.writeFloatBE=function(n,i,c){return je(this,n,i,!1,c)};function Pe(f,n,i,c,h){return n=+n,i=i>>>0,h||$e(f,n,i,8),bt.write(f,n,i,c,52,8),i+8}s.prototype.writeDoubleLE=function(n,i,c){return Pe(this,n,i,!0,c)},s.prototype.writeDoubleBE=function(n,i,c){return Pe(this,n,i,!1,c)},s.prototype.copy=function(n,i,c,h){if(!s.isBuffer(n))throw new TypeError("argument should be a Buffer");if(c||(c=0),!h&&h!==0&&(h=this.length),i>=n.length&&(i=n.length),i||(i=0),h>0&&h<c&&(h=c),h===c||n.length===0||this.length===0)return 0;if(i<0)throw new RangeError("targetStart out of bounds");if(c<0||c>=this.length)throw new RangeError("Index out of range");if(h<0)throw new RangeError("sourceEnd out of bounds");h>this.length&&(h=this.length),n.length-i<h-c&&(h=n.length-i+c);var d=h-c;return this===n&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(i,c,h):Uint8Array.prototype.set.call(n,this.subarray(c,h),i),d},s.prototype.fill=function(n,i,c,h){if(typeof n=="string"){if(typeof i=="string"?(h=i,i=0,c=this.length):typeof c=="string"&&(h=c,c=this.length),h!==void 0&&typeof h!="string")throw new TypeError("encoding must be a string");if(typeof h=="string"&&!s.isEncoding(h))throw new TypeError("Unknown encoding: "+h);if(n.length===1){var d=n.charCodeAt(0);(h==="utf8"&&d<128||h==="latin1")&&(n=d)}}else typeof n=="number"?n=n&255:typeof n=="boolean"&&(n=Number(n));if(i<0||this.length<i||this.length<c)throw new RangeError("Out of range index");if(c<=i)return this;i=i>>>0,c=c===void 0?this.length:c>>>0,n||(n=0);var g;if(typeof n=="number")for(g=i;g<c;++g)this[g]=n;else{var O=s.isBuffer(n)?n:s.from(n,h),U=O.length;if(U===0)throw new TypeError('The value "'+n+'" is invalid for argument "value"');for(g=0;g<c-i;++g)this[g+i]=O[g%U]}return this};var tn=/[^+/0-9A-Za-z-_]/g;function en(f){if(f=f.split("=")[0],f=f.trim().replace(tn,""),f.length<2)return"";for(;f.length%4!==0;)f=f+"=";return f}function se(f,n){n=n||1/0;for(var i,c=f.length,h=null,d=[],g=0;g<c;++g){if(i=f.charCodeAt(g),i>55295&&i<57344){if(!h){if(i>56319){(n-=3)>-1&&d.push(239,191,189);continue}else if(g+1===c){(n-=3)>-1&&d.push(239,191,189);continue}h=i;continue}if(i<56320){(n-=3)>-1&&d.push(239,191,189),h=i;continue}i=(h-55296<<10|i-56320)+65536}else h&&(n-=3)>-1&&d.push(239,191,189);if(h=null,i<128){if((n-=1)<0)break;d.push(i)}else if(i<2048){if((n-=2)<0)break;d.push(i>>6|192,i&63|128)}else if(i<65536){if((n-=3)<0)break;d.push(i>>12|224,i>>6&63|128,i&63|128)}else if(i<1114112){if((n-=4)<0)break;d.push(i>>18|240,i>>12&63|128,i>>6&63|128,i&63|128)}else throw new Error("Invalid code point")}return d}function rn(f){for(var n=[],i=0;i<f.length;++i)n.push(f.charCodeAt(i)&255);return n}function nn(f,n){for(var i,c,h,d=[],g=0;g<f.length&&!((n-=2)<0);++g)i=f.charCodeAt(g),c=i>>8,h=i%256,d.push(h),d.push(c);return d}function Je(f){return he.toByteArray(en(f))}function Pt(f,n,i,c){for(var h=0;h<c&&!(h+i>=n.length||h>=f.length);++h)n[h+i]=f[h];return h}function rt(f,n){return f instanceof n||f!=null&&f.constructor!=null&&f.constructor.name!=null&&f.constructor.name===n.name}function ae(f){return f!==f}var on=function(){for(var f="0123456789abcdef",n=new Array(256),i=0;i<16;++i)for(var c=i*16,h=0;h<16;++h)n[c+h]=f[i]+f[h];return n}()}),I=Qt.Buffer;Qt.SlowBuffer;Qt.INSPECT_MAX_BYTES;Qt.kMaxLength;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Ee=function(t,r){return Ee=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,a){o.__proto__=a}||function(o,a){for(var u in a)a.hasOwnProperty(u)&&(o[u]=a[u])},Ee(t,r)};function te(e,t){Ee(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var pt=function(e){te(t,e);function t(r){var o=e.call(this,r)||this;return Object.setPrototypeOf(o,t.prototype),o}return Object.defineProperty(t.prototype,"name",{get:function(){return"BSONError"},enumerable:!1,configurable:!0}),t}(Error),C=function(e){te(t,e);function t(r){var o=e.call(this,r)||this;return Object.setPrototypeOf(o,t.prototype),o}return Object.defineProperty(t.prototype,"name",{get:function(){return"BSONTypeError"},enumerable:!1,configurable:!0}),t}(TypeError);function Ht(e){return e&&e.Math==Math&&e}function Nr(){return Ht(typeof globalThis=="object"&&globalThis)||Ht(typeof window=="object"&&window)||Ht(typeof self=="object"&&self)||Ht(typeof global=="object"&&global)||Function("return this")()}function Nn(){var e=Nr();return typeof e.navigator=="object"&&e.navigator.product==="ReactNative"}var An=function(t){var r=Nn()?"BSON: For React Native please polyfill crypto.getRandomValues, e.g. using: https://www.npmjs.com/package/react-native-get-random-values.":"BSON: No cryptographic implementation for random bytes present, falling back to a less secure implementation.";console.warn(r);for(var o=I.alloc(t),a=0;a<t;++a)o[a]=Math.floor(Math.random()*256);return o},On=function(){{if(typeof window<"u"){var e=window.crypto||window.msCrypto;if(e&&e.getRandomValues)return function(t){return e.getRandomValues(I.alloc(t))}}return typeof global<"u"&&global.crypto&&global.crypto.getRandomValues?function(t){return global.crypto.getRandomValues(I.alloc(t))}:An}},Ar=On();function Tn(e){return["[object ArrayBuffer]","[object SharedArrayBuffer]"].includes(Object.prototype.toString.call(e))}function Re(e){return Object.prototype.toString.call(e)==="[object Uint8Array]"}function In(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function Bn(e){return Dt(e)&&Object.prototype.toString.call(e)==="[object Date]"}function Dt(e){return typeof e=="object"&&e!==null}function ee(e,t){var r=!1;function o(){for(var a=[],u=0;u<arguments.length;u++)a[u]=arguments[u];return r||(console.warn(t),r=!0),e.apply(this,a)}return o}function Zt(e){if(ArrayBuffer.isView(e))return I.from(e.buffer,e.byteOffset,e.byteLength);if(Tn(e))return I.from(e);throw new C("Must use either Buffer or TypedArray")}var Un=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|[0-9a-f]{12}4[0-9a-f]{3}[89ab][0-9a-f]{15})$/i,Or=function(e){return typeof e=="string"&&Un.test(e)},_e=function(e){if(!Or(e))throw new C('UUID string representations must be a 32 or 36 character hex string (dashes excluded/included). Format: "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx" or "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx".');var t=e.replace(/-/g,"");return I.from(t,"hex")},Ze=function(e,t){return t===void 0&&(t=!0),t?e.toString("hex",0,4)+"-"+e.toString("hex",4,6)+"-"+e.toString("hex",6,8)+"-"+e.toString("hex",8,10)+"-"+e.toString("hex",10,16):e.toString("hex")},Rn=Math.pow(2,53),kn=-Math.pow(2,53),Tr=4,ct=function(){function e(t,r){if(!(this instanceof e))return new e(t,r);if(t!=null&&typeof t!="string"&&!ArrayBuffer.isView(t)&&!(t instanceof ArrayBuffer)&&!Array.isArray(t))throw new C("Binary can only be constructed from string, Buffer, TypedArray, or Array<number>");this.sub_type=r??e.BSON_BINARY_SUBTYPE_DEFAULT,t==null?(this.buffer=I.alloc(e.BUFFER_SIZE),this.position=0):(typeof t=="string"?this.buffer=I.from(t,"binary"):Array.isArray(t)?this.buffer=I.from(t):this.buffer=Zt(t),this.position=this.buffer.byteLength)}return e.prototype.put=function(t){if(typeof t=="string"&&t.length!==1)throw new C("only accepts single character String");if(typeof t!="number"&&t.length!==1)throw new C("only accepts single character Uint8Array or Array");var r;if(typeof t=="string"?r=t.charCodeAt(0):typeof t=="number"?r=t:r=t[0],r<0||r>255)throw new C("only accepts number in a valid unsigned byte range 0-255");if(this.buffer.length>this.position)this.buffer[this.position++]=r;else{var o=I.alloc(e.BUFFER_SIZE+this.buffer.length);this.buffer.copy(o,0,0,this.buffer.length),this.buffer=o,this.buffer[this.position++]=r}},e.prototype.write=function(t,r){if(r=typeof r=="number"?r:this.position,this.buffer.length<r+t.length){var o=I.alloc(this.buffer.length+t.length);this.buffer.copy(o,0,0,this.buffer.length),this.buffer=o}ArrayBuffer.isView(t)?(this.buffer.set(Zt(t),r),this.position=r+t.byteLength>this.position?r+t.length:this.position):typeof t=="string"&&(this.buffer.write(t,r,t.length,"binary"),this.position=r+t.length>this.position?r+t.length:this.position)},e.prototype.read=function(t,r){return r=r&&r>0?r:this.position,this.buffer.slice(t,t+r)},e.prototype.value=function(t){return t=!!t,t&&this.buffer.length===this.position?this.buffer:t?this.buffer.slice(0,this.position):this.buffer.toString("binary",0,this.position)},e.prototype.length=function(){return this.position},e.prototype.toJSON=function(){return this.buffer.toString("base64")},e.prototype.toString=function(t){return this.buffer.toString(t)},e.prototype.toExtendedJSON=function(t){t=t||{};var r=this.buffer.toString("base64"),o=Number(this.sub_type).toString(16);return t.legacy?{$binary:r,$type:o.length===1?"0"+o:o}:{$binary:{base64:r,subType:o.length===1?"0"+o:o}}},e.prototype.toUUID=function(){if(this.sub_type===e.SUBTYPE_UUID)return new Ke(this.buffer.slice(0,this.position));throw new pt('Binary sub_type "'.concat(this.sub_type,'" is not supported for converting to UUID. Only "').concat(e.SUBTYPE_UUID,'" is currently supported.'))},e.fromExtendedJSON=function(t,r){r=r||{};var o,a;if("$binary"in t?r.legacy&&typeof t.$binary=="string"&&"$type"in t?(a=t.$type?parseInt(t.$type,16):0,o=I.from(t.$binary,"base64")):typeof t.$binary!="string"&&(a=t.$binary.subType?parseInt(t.$binary.subType,16):0,o=I.from(t.$binary.base64,"base64")):"$uuid"in t&&(a=4,o=_e(t.$uuid)),!o)throw new C("Unexpected Binary Extended JSON format ".concat(JSON.stringify(t)));return a===Tr?new Ke(o):new e(o,a)},e.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},e.prototype.inspect=function(){var t=this.value(!0);return'new Binary(Buffer.from("'.concat(t.toString("hex"),'", "hex"), ').concat(this.sub_type,")")},e.BSON_BINARY_SUBTYPE_DEFAULT=0,e.BUFFER_SIZE=256,e.SUBTYPE_DEFAULT=0,e.SUBTYPE_FUNCTION=1,e.SUBTYPE_BYTE_ARRAY=2,e.SUBTYPE_UUID_OLD=3,e.SUBTYPE_UUID=4,e.SUBTYPE_MD5=5,e.SUBTYPE_ENCRYPTED=6,e.SUBTYPE_COLUMN=7,e.SUBTYPE_USER_DEFINED=128,e}();Object.defineProperty(ct.prototype,"_bsontype",{value:"Binary"});var le=16,Ke=function(e){te(t,e);function t(r){var o=this,a,u;if(r==null)a=t.generate();else if(r instanceof t)a=I.from(r.buffer),u=r.__id;else if(ArrayBuffer.isView(r)&&r.byteLength===le)a=Zt(r);else if(typeof r=="string")a=_e(r);else throw new C("Argument passed in UUID constructor must be a UUID, a 16 byte Buffer or a 32/36 character hex string (dashes excluded/included, format: xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx).");return o=e.call(this,a,Tr)||this,o.__id=u,o}return Object.defineProperty(t.prototype,"id",{get:function(){return this.buffer},set:function(r){this.buffer=r,t.cacheHexString&&(this.__id=Ze(r))},enumerable:!1,configurable:!0}),t.prototype.toHexString=function(r){if(r===void 0&&(r=!0),t.cacheHexString&&this.__id)return this.__id;var o=Ze(this.id,r);return t.cacheHexString&&(this.__id=o),o},t.prototype.toString=function(r){return r?this.id.toString(r):this.toHexString()},t.prototype.toJSON=function(){return this.toHexString()},t.prototype.equals=function(r){if(!r)return!1;if(r instanceof t)return r.id.equals(this.id);try{return new t(r).id.equals(this.id)}catch{return!1}},t.prototype.toBinary=function(){return new ct(this.id,ct.SUBTYPE_UUID)},t.generate=function(){var r=Ar(le);return r[6]=r[6]&15|64,r[8]=r[8]&63|128,I.from(r)},t.isValid=function(r){return r?r instanceof t?!0:typeof r=="string"?Or(r):Re(r)?r.length!==le?!1:(r[6]&240)===64&&(r[8]&128)===128:!1:!1},t.createFromHexString=function(r){var o=_e(r);return new t(o)},t.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},t.prototype.inspect=function(){return'new UUID("'.concat(this.toHexString(),'")')},t}(ct),re=function(){function e(t,r){if(!(this instanceof e))return new e(t,r);this.code=t,this.scope=r}return e.prototype.toJSON=function(){return{code:this.code,scope:this.scope}},e.prototype.toExtendedJSON=function(){return this.scope?{$code:this.code,$scope:this.scope}:{$code:this.code}},e.fromExtendedJSON=function(t){return new e(t.$code,t.$scope)},e.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},e.prototype.inspect=function(){var t=this.toJSON();return'new Code("'.concat(String(t.code),'"').concat(t.scope?", ".concat(JSON.stringify(t.scope)):"",")")},e}();Object.defineProperty(re.prototype,"_bsontype",{value:"Code"});function Fn(e){return Dt(e)&&e.$id!=null&&typeof e.$ref=="string"&&(e.$db==null||typeof e.$db=="string")}var Rt=function(){function e(t,r,o,a){if(!(this instanceof e))return new e(t,r,o,a);var u=t.split(".");u.length===2&&(o=u.shift(),t=u.shift()),this.collection=t,this.oid=r,this.db=o,this.fields=a||{}}return Object.defineProperty(e.prototype,"namespace",{get:function(){return this.collection},set:function(t){this.collection=t},enumerable:!1,configurable:!0}),e.prototype.toJSON=function(){var t=Object.assign({$ref:this.collection,$id:this.oid},this.fields);return this.db!=null&&(t.$db=this.db),t},e.prototype.toExtendedJSON=function(t){t=t||{};var r={$ref:this.collection,$id:this.oid};return t.legacy||(this.db&&(r.$db=this.db),r=Object.assign(r,this.fields)),r},e.fromExtendedJSON=function(t){var r=Object.assign({},t);return delete r.$ref,delete r.$id,delete r.$db,new e(t.$ref,t.$id,t.$db,r)},e.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},e.prototype.inspect=function(){var t=this.oid===void 0||this.oid.toString===void 0?this.oid:this.oid.toString();return'new DBRef("'.concat(this.namespace,'", new ObjectId("').concat(String(t),'")').concat(this.db?', "'.concat(this.db,'"'):"",")")},e}();Object.defineProperty(Rt.prototype,"_bsontype",{value:"DBRef"});var G=void 0;try{G=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}var Xe=65536,Ln=1<<24,Et=Xe*Xe,Ir=Et*Et,qe=Ir/2,Qe={},tr={},v=function(){function e(t,r,o){if(t===void 0&&(t=0),!(this instanceof e))return new e(t,r,o);typeof t=="bigint"?Object.assign(this,e.fromBigInt(t,!!r)):typeof t=="string"?Object.assign(this,e.fromString(t,!!r)):(this.low=t|0,this.high=r|0,this.unsigned=!!o),Object.defineProperty(this,"__isLong__",{value:!0,configurable:!1,writable:!1,enumerable:!1})}return e.fromBits=function(t,r,o){return new e(t,r,o)},e.fromInt=function(t,r){var o,a,u;return r?(t>>>=0,(u=0<=t&&t<256)&&(a=tr[t],a)?a:(o=e.fromBits(t,(t|0)<0?-1:0,!0),u&&(tr[t]=o),o)):(t|=0,(u=-128<=t&&t<128)&&(a=Qe[t],a)?a:(o=e.fromBits(t,t<0?-1:0,!1),u&&(Qe[t]=o),o))},e.fromNumber=function(t,r){if(isNaN(t))return r?e.UZERO:e.ZERO;if(r){if(t<0)return e.UZERO;if(t>=Ir)return e.MAX_UNSIGNED_VALUE}else{if(t<=-qe)return e.MIN_VALUE;if(t+1>=qe)return e.MAX_VALUE}return t<0?e.fromNumber(-t,r).neg():e.fromBits(t%Et|0,t/Et|0,r)},e.fromBigInt=function(t,r){return e.fromString(t.toString(),r)},e.fromString=function(t,r,o){if(t.length===0)throw Error("empty string");if(t==="NaN"||t==="Infinity"||t==="+Infinity"||t==="-Infinity")return e.ZERO;if(typeof r=="number"?(o=r,r=!1):r=!!r,o=o||10,o<2||36<o)throw RangeError("radix");var a;if((a=t.indexOf("-"))>0)throw Error("interior hyphen");if(a===0)return e.fromString(t.substring(1),r,o).neg();for(var u=e.fromNumber(Math.pow(o,8)),s=e.ZERO,l=0;l<t.length;l+=8){var p=Math.min(8,t.length-l),m=parseInt(t.substring(l,l+p),o);if(p<8){var y=e.fromNumber(Math.pow(o,p));s=s.mul(y).add(e.fromNumber(m))}else s=s.mul(u),s=s.add(e.fromNumber(m))}return s.unsigned=r,s},e.fromBytes=function(t,r,o){return o?e.fromBytesLE(t,r):e.fromBytesBE(t,r)},e.fromBytesLE=function(t,r){return new e(t[0]|t[1]<<8|t[2]<<16|t[3]<<24,t[4]|t[5]<<8|t[6]<<16|t[7]<<24,r)},e.fromBytesBE=function(t,r){return new e(t[4]<<24|t[5]<<16|t[6]<<8|t[7],t[0]<<24|t[1]<<16|t[2]<<8|t[3],r)},e.isLong=function(t){return Dt(t)&&t.__isLong__===!0},e.fromValue=function(t,r){return typeof t=="number"?e.fromNumber(t,r):typeof t=="string"?e.fromString(t,r):e.fromBits(t.low,t.high,typeof r=="boolean"?r:t.unsigned)},e.prototype.add=function(t){e.isLong(t)||(t=e.fromValue(t));var r=this.high>>>16,o=this.high&65535,a=this.low>>>16,u=this.low&65535,s=t.high>>>16,l=t.high&65535,p=t.low>>>16,m=t.low&65535,y=0,w=0,x=0,_=0;return _+=u+m,x+=_>>>16,_&=65535,x+=a+p,w+=x>>>16,x&=65535,w+=o+l,y+=w>>>16,w&=65535,y+=r+s,y&=65535,e.fromBits(x<<16|_,y<<16|w,this.unsigned)},e.prototype.and=function(t){return e.isLong(t)||(t=e.fromValue(t)),e.fromBits(this.low&t.low,this.high&t.high,this.unsigned)},e.prototype.compare=function(t){if(e.isLong(t)||(t=e.fromValue(t)),this.eq(t))return 0;var r=this.isNegative(),o=t.isNegative();return r&&!o?-1:!r&&o?1:this.unsigned?t.high>>>0>this.high>>>0||t.high===this.high&&t.low>>>0>this.low>>>0?-1:1:this.sub(t).isNegative()?-1:1},e.prototype.comp=function(t){return this.compare(t)},e.prototype.divide=function(t){if(e.isLong(t)||(t=e.fromValue(t)),t.isZero())throw Error("division by zero");if(G){if(!this.unsigned&&this.high===-2147483648&&t.low===-1&&t.high===-1)return this;var r=(this.unsigned?G.div_u:G.div_s)(this.low,this.high,t.low,t.high);return e.fromBits(r,G.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?e.UZERO:e.ZERO;var o,a,u;if(this.unsigned){if(t.unsigned||(t=t.toUnsigned()),t.gt(this))return e.UZERO;if(t.gt(this.shru(1)))return e.UONE;u=e.UZERO}else{if(this.eq(e.MIN_VALUE)){if(t.eq(e.ONE)||t.eq(e.NEG_ONE))return e.MIN_VALUE;if(t.eq(e.MIN_VALUE))return e.ONE;var s=this.shr(1);return o=s.div(t).shl(1),o.eq(e.ZERO)?t.isNegative()?e.ONE:e.NEG_ONE:(a=this.sub(t.mul(o)),u=o.add(a.div(t)),u)}else if(t.eq(e.MIN_VALUE))return this.unsigned?e.UZERO:e.ZERO;if(this.isNegative())return t.isNegative()?this.neg().div(t.neg()):this.neg().div(t).neg();if(t.isNegative())return this.div(t.neg()).neg();u=e.ZERO}for(a=this;a.gte(t);){o=Math.max(1,Math.floor(a.toNumber()/t.toNumber()));for(var l=Math.ceil(Math.log(o)/Math.LN2),p=l<=48?1:Math.pow(2,l-48),m=e.fromNumber(o),y=m.mul(t);y.isNegative()||y.gt(a);)o-=p,m=e.fromNumber(o,this.unsigned),y=m.mul(t);m.isZero()&&(m=e.ONE),u=u.add(m),a=a.sub(y)}return u},e.prototype.div=function(t){return this.divide(t)},e.prototype.equals=function(t){return e.isLong(t)||(t=e.fromValue(t)),this.unsigned!==t.unsigned&&this.high>>>31===1&&t.high>>>31===1?!1:this.high===t.high&&this.low===t.low},e.prototype.eq=function(t){return this.equals(t)},e.prototype.getHighBits=function(){return this.high},e.prototype.getHighBitsUnsigned=function(){return this.high>>>0},e.prototype.getLowBits=function(){return this.low},e.prototype.getLowBitsUnsigned=function(){return this.low>>>0},e.prototype.getNumBitsAbs=function(){if(this.isNegative())return this.eq(e.MIN_VALUE)?64:this.neg().getNumBitsAbs();var t=this.high!==0?this.high:this.low,r;for(r=31;r>0&&!(t&1<<r);r--);return this.high!==0?r+33:r+1},e.prototype.greaterThan=function(t){return this.comp(t)>0},e.prototype.gt=function(t){return this.greaterThan(t)},e.prototype.greaterThanOrEqual=function(t){return this.comp(t)>=0},e.prototype.gte=function(t){return this.greaterThanOrEqual(t)},e.prototype.ge=function(t){return this.greaterThanOrEqual(t)},e.prototype.isEven=function(){return(this.low&1)===0},e.prototype.isNegative=function(){return!this.unsigned&&this.high<0},e.prototype.isOdd=function(){return(this.low&1)===1},e.prototype.isPositive=function(){return this.unsigned||this.high>=0},e.prototype.isZero=function(){return this.high===0&&this.low===0},e.prototype.lessThan=function(t){return this.comp(t)<0},e.prototype.lt=function(t){return this.lessThan(t)},e.prototype.lessThanOrEqual=function(t){return this.comp(t)<=0},e.prototype.lte=function(t){return this.lessThanOrEqual(t)},e.prototype.modulo=function(t){if(e.isLong(t)||(t=e.fromValue(t)),G){var r=(this.unsigned?G.rem_u:G.rem_s)(this.low,this.high,t.low,t.high);return e.fromBits(r,G.get_high(),this.unsigned)}return this.sub(this.div(t).mul(t))},e.prototype.mod=function(t){return this.modulo(t)},e.prototype.rem=function(t){return this.modulo(t)},e.prototype.multiply=function(t){if(this.isZero())return e.ZERO;if(e.isLong(t)||(t=e.fromValue(t)),G){var r=G.mul(this.low,this.high,t.low,t.high);return e.fromBits(r,G.get_high(),this.unsigned)}if(t.isZero())return e.ZERO;if(this.eq(e.MIN_VALUE))return t.isOdd()?e.MIN_VALUE:e.ZERO;if(t.eq(e.MIN_VALUE))return this.isOdd()?e.MIN_VALUE:e.ZERO;if(this.isNegative())return t.isNegative()?this.neg().mul(t.neg()):this.neg().mul(t).neg();if(t.isNegative())return this.mul(t.neg()).neg();if(this.lt(e.TWO_PWR_24)&&t.lt(e.TWO_PWR_24))return e.fromNumber(this.toNumber()*t.toNumber(),this.unsigned);var o=this.high>>>16,a=this.high&65535,u=this.low>>>16,s=this.low&65535,l=t.high>>>16,p=t.high&65535,m=t.low>>>16,y=t.low&65535,w=0,x=0,_=0,E=0;return E+=s*y,_+=E>>>16,E&=65535,_+=u*y,x+=_>>>16,_&=65535,_+=s*m,x+=_>>>16,_&=65535,x+=a*y,w+=x>>>16,x&=65535,x+=u*m,w+=x>>>16,x&=65535,x+=s*p,w+=x>>>16,x&=65535,w+=o*y+a*m+u*p+s*l,w&=65535,e.fromBits(_<<16|E,w<<16|x,this.unsigned)},e.prototype.mul=function(t){return this.multiply(t)},e.prototype.negate=function(){return!this.unsigned&&this.eq(e.MIN_VALUE)?e.MIN_VALUE:this.not().add(e.ONE)},e.prototype.neg=function(){return this.negate()},e.prototype.not=function(){return e.fromBits(~this.low,~this.high,this.unsigned)},e.prototype.notEquals=function(t){return!this.equals(t)},e.prototype.neq=function(t){return this.notEquals(t)},e.prototype.ne=function(t){return this.notEquals(t)},e.prototype.or=function(t){return e.isLong(t)||(t=e.fromValue(t)),e.fromBits(this.low|t.low,this.high|t.high,this.unsigned)},e.prototype.shiftLeft=function(t){return e.isLong(t)&&(t=t.toInt()),(t&=63)===0?this:t<32?e.fromBits(this.low<<t,this.high<<t|this.low>>>32-t,this.unsigned):e.fromBits(0,this.low<<t-32,this.unsigned)},e.prototype.shl=function(t){return this.shiftLeft(t)},e.prototype.shiftRight=function(t){return e.isLong(t)&&(t=t.toInt()),(t&=63)===0?this:t<32?e.fromBits(this.low>>>t|this.high<<32-t,this.high>>t,this.unsigned):e.fromBits(this.high>>t-32,this.high>=0?0:-1,this.unsigned)},e.prototype.shr=function(t){return this.shiftRight(t)},e.prototype.shiftRightUnsigned=function(t){if(e.isLong(t)&&(t=t.toInt()),t&=63,t===0)return this;var r=this.high;if(t<32){var o=this.low;return e.fromBits(o>>>t|r<<32-t,r>>>t,this.unsigned)}else return t===32?e.fromBits(r,0,this.unsigned):e.fromBits(r>>>t-32,0,this.unsigned)},e.prototype.shr_u=function(t){return this.shiftRightUnsigned(t)},e.prototype.shru=function(t){return this.shiftRightUnsigned(t)},e.prototype.subtract=function(t){return e.isLong(t)||(t=e.fromValue(t)),this.add(t.neg())},e.prototype.sub=function(t){return this.subtract(t)},e.prototype.toInt=function(){return this.unsigned?this.low>>>0:this.low},e.prototype.toNumber=function(){return this.unsigned?(this.high>>>0)*Et+(this.low>>>0):this.high*Et+(this.low>>>0)},e.prototype.toBigInt=function(){return BigInt(this.toString())},e.prototype.toBytes=function(t){return t?this.toBytesLE():this.toBytesBE()},e.prototype.toBytesLE=function(){var t=this.high,r=this.low;return[r&255,r>>>8&255,r>>>16&255,r>>>24,t&255,t>>>8&255,t>>>16&255,t>>>24]},e.prototype.toBytesBE=function(){var t=this.high,r=this.low;return[t>>>24,t>>>16&255,t>>>8&255,t&255,r>>>24,r>>>16&255,r>>>8&255,r&255]},e.prototype.toSigned=function(){return this.unsigned?e.fromBits(this.low,this.high,!1):this},e.prototype.toString=function(t){if(t=t||10,t<2||36<t)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(e.MIN_VALUE)){var r=e.fromNumber(t),o=this.div(r),a=o.mul(r).sub(this);return o.toString(t)+a.toInt().toString(t)}else return"-"+this.neg().toString(t);for(var u=e.fromNumber(Math.pow(t,6),this.unsigned),s=this,l="";;){var p=s.div(u),m=s.sub(p.mul(u)).toInt()>>>0,y=m.toString(t);if(s=p,s.isZero())return y+l;for(;y.length<6;)y="0"+y;l=""+y+l}},e.prototype.toUnsigned=function(){return this.unsigned?this:e.fromBits(this.low,this.high,!0)},e.prototype.xor=function(t){return e.isLong(t)||(t=e.fromValue(t)),e.fromBits(this.low^t.low,this.high^t.high,this.unsigned)},e.prototype.eqz=function(){return this.isZero()},e.prototype.le=function(t){return this.lessThanOrEqual(t)},e.prototype.toExtendedJSON=function(t){return t&&t.relaxed?this.toNumber():{$numberLong:this.toString()}},e.fromExtendedJSON=function(t,r){var o=e.fromString(t.$numberLong);return r&&r.relaxed?o.toNumber():o},e.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},e.prototype.inspect=function(){return'new Long("'.concat(this.toString(),'"').concat(this.unsigned?", true":"",")")},e.TWO_PWR_24=e.fromInt(Ln),e.MAX_UNSIGNED_VALUE=e.fromBits(-1,-1,!0),e.ZERO=e.fromInt(0),e.UZERO=e.fromInt(0,!0),e.ONE=e.fromInt(1),e.UONE=e.fromInt(1,!0),e.NEG_ONE=e.fromInt(-1),e.MAX_VALUE=e.fromBits(-1,2147483647,!1),e.MIN_VALUE=e.fromBits(0,-2147483648,!1),e}();Object.defineProperty(v.prototype,"__isLong__",{value:!0});Object.defineProperty(v.prototype,"_bsontype",{value:"Long"});var Dn=/^(\+|-)?(\d+|(\d*\.\d*))?(E|e)?([-+])?(\d+)?$/,Mn=/^(\+|-)?(Infinity|inf)$/i,Cn=/^(\+|-)?NaN$/i,It=6111,pe=-6176,er=6176,$n=34,de=[124,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse(),rr=[248,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse(),nr=[120,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse(),jn=/^([-+])?(\d+)?$/,Pn=31,ir=16383,Jn=30,Vn=31;function or(e){return!isNaN(parseInt(e,10))}function Wn(e){var t=v.fromNumber(1e9),r=v.fromNumber(0);if(!e.parts[0]&&!e.parts[1]&&!e.parts[2]&&!e.parts[3])return{quotient:e,rem:r};for(var o=0;o<=3;o++)r=r.shiftLeft(32),r=r.add(new v(e.parts[o],0)),e.parts[o]=r.div(t).low,r=r.modulo(t);return{quotient:e,rem:r}}function Hn(e,t){if(!e&&!t)return{high:v.fromNumber(0),low:v.fromNumber(0)};var r=e.shiftRightUnsigned(32),o=new v(e.getLowBits(),0),a=t.shiftRightUnsigned(32),u=new v(t.getLowBits(),0),s=r.multiply(a),l=r.multiply(u),p=o.multiply(a),m=o.multiply(u);return s=s.add(l.shiftRightUnsigned(32)),l=new v(l.getLowBits(),0).add(p).add(m.shiftRightUnsigned(32)),s=s.add(l.shiftRightUnsigned(32)),m=l.shiftLeft(32).add(new v(m.getLowBits(),0)),{high:s,low:m}}function Yn(e,t){var r=e.high>>>0,o=t.high>>>0;if(r<o)return!0;if(r===o){var a=e.low>>>0,u=t.low>>>0;if(a<u)return!0}return!1}function xt(e,t){throw new C('"'.concat(e,'" is not a valid Decimal128 string - ').concat(t))}var ke=function(){function e(t){if(!(this instanceof e))return new e(t);if(typeof t=="string")this.bytes=e.fromString(t).bytes;else if(Re(t)){if(t.byteLength!==16)throw new C("Decimal128 must take a Buffer of 16 bytes");this.bytes=t}else throw new C("Decimal128 must take a Buffer or string")}return e.fromString=function(t){var r=!1,o=!1,a=!1,u=0,s=0,l=0,p=0,m=0,y=[0],w=0,x=0,_=0,E=0,A=0,L=0,F=new v(0,0),S=new v(0,0),B=0,b=0;if(t.length>=7e3)throw new C(""+t+" not a valid Decimal128 string");var J=t.match(Dn),$=t.match(Mn),q=t.match(Cn);if(!J&&!$&&!q||t.length===0)throw new C(""+t+" not a valid Decimal128 string");if(J){var Ot=J[2],st=J[4],Ct=J[5],$t=J[6];st&&$t===void 0&&xt(t,"missing exponent power"),st&&Ot===void 0&&xt(t,"missing exponent base"),st===void 0&&(Ct||$t)&&xt(t,"missing e before exponent")}if((t[b]==="+"||t[b]==="-")&&(r=t[b++]==="-"),!or(t[b])&&t[b]!=="."){if(t[b]==="i"||t[b]==="I")return new e(I.from(r?rr:nr));if(t[b]==="N")return new e(I.from(de))}for(;or(t[b])||t[b]===".";){if(t[b]==="."){o&&xt(t,"contains multiple periods"),o=!0,b=b+1;continue}w<34&&(t[b]!=="0"||a)&&(a||(m=s),a=!0,y[x++]=parseInt(t[b],10),w=w+1),a&&(l=l+1),o&&(p=p+1),s=s+1,b=b+1}if(o&&!s)throw new C(""+t+" not a valid Decimal128 string");if(t[b]==="e"||t[b]==="E"){var gt=t.substr(++b).match(jn);if(!gt||!gt[2])return new e(I.from(de));A=parseInt(gt[0],10),b=b+gt[0].length}if(t[b])return new e(I.from(de));if(_=0,!w)_=0,E=0,y[0]=0,l=1,w=1,u=0;else if(E=w-1,u=l,u!==1)for(;y[m+u-1]===0;)u=u-1;for(A<=p&&p-A>16384?A=pe:A=A-p;A>It;){if(E=E+1,E-_>$n){var yt=y.join("");if(yt.match(/^0+$/)){A=It;break}xt(t,"overflow")}A=A-1}for(;A<pe||w<l;){if(E===0&&u<w){A=pe,u=0;break}if(w<l?l=l-1:E=E-1,A<It)A=A+1;else{var yt=y.join("");if(yt.match(/^0+$/)){A=It;break}xt(t,"overflow")}}if(E-_+1<u){var at=s;o&&(m=m+1,at=at+1),r&&(m=m+1,at=at+1);var jt=parseInt(t[m+E+1],10),mt=0;if(jt>=5&&(mt=1,jt===5)){for(mt=y[E]%2===1?1:0,L=m+E+2;L<at;L++)if(parseInt(t[L],10)){mt=1;break}}if(mt){for(var D=E;D>=0;D--)if(++y[D]>9&&(y[D]=0,D===0))if(A<It)A=A+1,y[D]=1;else return new e(I.from(r?rr:nr))}}if(F=v.fromNumber(0),S=v.fromNumber(0),u===0)F=v.fromNumber(0),S=v.fromNumber(0);else if(E-_<17){var D=_;for(S=v.fromNumber(y[D++]),F=new v(0,0);D<=E;D++)S=S.multiply(v.fromNumber(10)),S=S.add(v.fromNumber(y[D]))}else{var D=_;for(F=v.fromNumber(y[D++]);D<=E-17;D++)F=F.multiply(v.fromNumber(10)),F=F.add(v.fromNumber(y[D]));for(S=v.fromNumber(y[D++]);D<=E;D++)S=S.multiply(v.fromNumber(10)),S=S.add(v.fromNumber(y[D]))}var Q=Hn(F,v.fromString("100000000000000000"));Q.low=Q.low.add(S),Yn(Q.low,S)&&(Q.high=Q.high.add(v.fromNumber(1))),B=A+er;var T={low:v.fromNumber(0),high:v.fromNumber(0)};Q.high.shiftRightUnsigned(49).and(v.fromNumber(1)).equals(v.fromNumber(1))?(T.high=T.high.or(v.fromNumber(3).shiftLeft(61)),T.high=T.high.or(v.fromNumber(B).and(v.fromNumber(16383).shiftLeft(47))),T.high=T.high.or(Q.high.and(v.fromNumber(0x7fffffffffff)))):(T.high=T.high.or(v.fromNumber(B&16383).shiftLeft(49)),T.high=T.high.or(Q.high.and(v.fromNumber(562949953421311)))),T.low=Q.low,r&&(T.high=T.high.or(v.fromString("9223372036854775808")));var N=I.alloc(16);return b=0,N[b++]=T.low.low&255,N[b++]=T.low.low>>8&255,N[b++]=T.low.low>>16&255,N[b++]=T.low.low>>24&255,N[b++]=T.low.high&255,N[b++]=T.low.high>>8&255,N[b++]=T.low.high>>16&255,N[b++]=T.low.high>>24&255,N[b++]=T.high.low&255,N[b++]=T.high.low>>8&255,N[b++]=T.high.low>>16&255,N[b++]=T.high.low>>24&255,N[b++]=T.high.high&255,N[b++]=T.high.high>>8&255,N[b++]=T.high.high>>16&255,N[b++]=T.high.high>>24&255,new e(N)},e.prototype.toString=function(){for(var t,r=0,o=new Array(36),a=0;a<o.length;a++)o[a]=0;var u=0,s=!1,l,p={parts:[0,0,0,0]},m,y,w=[];u=0;var x=this.bytes,_=x[u++]|x[u++]<<8|x[u++]<<16|x[u++]<<24,E=x[u++]|x[u++]<<8|x[u++]<<16|x[u++]<<24,A=x[u++]|x[u++]<<8|x[u++]<<16|x[u++]<<24,L=x[u++]|x[u++]<<8|x[u++]<<16|x[u++]<<24;u=0;var F={low:new v(_,E),high:new v(A,L)};F.high.lessThan(v.ZERO)&&w.push("-");var S=L>>26&Pn;if(S>>3===3){if(S===Jn)return w.join("")+"Infinity";if(S===Vn)return"NaN";t=L>>15&ir,l=8+(L>>14&1)}else l=L>>14&7,t=L>>17&ir;var B=t-er;if(p.parts[0]=(L&16383)+((l&15)<<14),p.parts[1]=A,p.parts[2]=E,p.parts[3]=_,p.parts[0]===0&&p.parts[1]===0&&p.parts[2]===0&&p.parts[3]===0)s=!0;else for(y=3;y>=0;y--){var b=0,J=Wn(p);if(p=J.quotient,b=J.rem.low,!!b)for(m=8;m>=0;m--)o[y*9+m]=b%10,b=Math.floor(b/10)}if(s)r=1,o[u]=0;else for(r=36;!o[u];)r=r-1,u=u+1;var $=r-1+B;if($>=34||$<=-7||B>0){if(r>34)return w.push("".concat(0)),B>0?w.push("E+".concat(B)):B<0&&w.push("E".concat(B)),w.join("");w.push("".concat(o[u++])),r=r-1,r&&w.push(".");for(var a=0;a<r;a++)w.push("".concat(o[u++]));w.push("E"),$>0?w.push("+".concat($)):w.push("".concat($))}else if(B>=0)for(var a=0;a<r;a++)w.push("".concat(o[u++]));else{var q=r+B;if(q>0)for(var a=0;a<q;a++)w.push("".concat(o[u++]));else w.push("0");for(w.push(".");q++<0;)w.push("0");for(var a=0;a<r-Math.max(q-1,0);a++)w.push("".concat(o[u++]))}return w.join("")},e.prototype.toJSON=function(){return{$numberDecimal:this.toString()}},e.prototype.toExtendedJSON=function(){return{$numberDecimal:this.toString()}},e.fromExtendedJSON=function(t){return e.fromString(t.$numberDecimal)},e.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},e.prototype.inspect=function(){return'new Decimal128("'.concat(this.toString(),'")')},e}();Object.defineProperty(ke.prototype,"_bsontype",{value:"Decimal128"});var ne=function(){function e(t){if(!(this instanceof e))return new e(t);t instanceof Number&&(t=t.valueOf()),this.value=+t}return e.prototype.valueOf=function(){return this.value},e.prototype.toJSON=function(){return this.value},e.prototype.toString=function(t){return this.value.toString(t)},e.prototype.toExtendedJSON=function(t){return t&&(t.legacy||t.relaxed&&isFinite(this.value))?this.value:Object.is(Math.sign(this.value),-0)?{$numberDouble:"-".concat(this.value.toFixed(1))}:{$numberDouble:Number.isInteger(this.value)?this.value.toFixed(1):this.value.toString()}},e.fromExtendedJSON=function(t,r){var o=parseFloat(t.$numberDouble);return r&&r.relaxed?o:new e(o)},e.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},e.prototype.inspect=function(){var t=this.toExtendedJSON();return"new Double(".concat(t.$numberDouble,")")},e}();Object.defineProperty(ne.prototype,"_bsontype",{value:"Double"});var ie=function(){function e(t){if(!(this instanceof e))return new e(t);t instanceof Number&&(t=t.valueOf()),this.value=+t|0}return e.prototype.valueOf=function(){return this.value},e.prototype.toString=function(t){return this.value.toString(t)},e.prototype.toJSON=function(){return this.value},e.prototype.toExtendedJSON=function(t){return t&&(t.relaxed||t.legacy)?this.value:{$numberInt:this.value.toString()}},e.fromExtendedJSON=function(t,r){return r&&r.relaxed?parseInt(t.$numberInt,10):new e(t.$numberInt)},e.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},e.prototype.inspect=function(){return"new Int32(".concat(this.valueOf(),")")},e}();Object.defineProperty(ie.prototype,"_bsontype",{value:"Int32"});var Fe=function(){function e(){if(!(this instanceof e))return new e}return e.prototype.toExtendedJSON=function(){return{$maxKey:1}},e.fromExtendedJSON=function(){return new e},e.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},e.prototype.inspect=function(){return"new MaxKey()"},e}();Object.defineProperty(Fe.prototype,"_bsontype",{value:"MaxKey"});var Le=function(){function e(){if(!(this instanceof e))return new e}return e.prototype.toExtendedJSON=function(){return{$minKey:1}},e.fromExtendedJSON=function(){return new e},e.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},e.prototype.inspect=function(){return"new MinKey()"},e}();Object.defineProperty(Le.prototype,"_bsontype",{value:"MinKey"});var zn=new RegExp("^[0-9a-fA-F]{24}$"),ht=null,nt=Symbol("id"),z=function(){function e(t){if(!(this instanceof e))return new e(t);var r;if(typeof t=="object"&&t&&"id"in t){if(typeof t.id!="string"&&!ArrayBuffer.isView(t.id))throw new C("Argument passed in must have an id that is of type string or Buffer");"toHexString"in t&&typeof t.toHexString=="function"?r=I.from(t.toHexString(),"hex"):r=t.id}else r=t;if(r==null||typeof r=="number")this[nt]=e.generate(typeof r=="number"?r:void 0);else if(ArrayBuffer.isView(r)&&r.byteLength===12)this[nt]=r instanceof I?r:Zt(r);else if(typeof r=="string")if(r.length===12){var o=I.from(r);if(o.byteLength===12)this[nt]=o;else throw new C("Argument passed in must be a string of 12 bytes")}else if(r.length===24&&zn.test(r))this[nt]=I.from(r,"hex");else throw new C("Argument passed in must be a string of 12 bytes or a string of 24 hex characters or an integer");else throw new C("Argument passed in does not match the accepted types");e.cacheHexString&&(this.__id=this.id.toString("hex"))}return Object.defineProperty(e.prototype,"id",{get:function(){return this[nt]},set:function(t){this[nt]=t,e.cacheHexString&&(this.__id=t.toString("hex"))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"generationTime",{get:function(){return this.id.readInt32BE(0)},set:function(t){this.id.writeUInt32BE(t,0)},enumerable:!1,configurable:!0}),e.prototype.toHexString=function(){if(e.cacheHexString&&this.__id)return this.__id;var t=this.id.toString("hex");return e.cacheHexString&&!this.__id&&(this.__id=t),t},e.getInc=function(){return e.index=(e.index+1)%16777215},e.generate=function(t){typeof t!="number"&&(t=Math.floor(Date.now()/1e3));var r=e.getInc(),o=I.alloc(12);return o.writeUInt32BE(t,0),ht===null&&(ht=Ar(5)),o[4]=ht[0],o[5]=ht[1],o[6]=ht[2],o[7]=ht[3],o[8]=ht[4],o[11]=r&255,o[10]=r>>8&255,o[9]=r>>16&255,o},e.prototype.toString=function(t){return t?this.id.toString(t):this.toHexString()},e.prototype.toJSON=function(){return this.toHexString()},e.prototype.equals=function(t){if(t==null)return!1;if(t instanceof e)return this[nt][11]===t[nt][11]&&this[nt].equals(t[nt]);if(typeof t=="string"&&e.isValid(t)&&t.length===12&&Re(this.id))return t===I.prototype.toString.call(this.id,"latin1");if(typeof t=="string"&&e.isValid(t)&&t.length===24)return t.toLowerCase()===this.toHexString();if(typeof t=="string"&&e.isValid(t)&&t.length===12)return I.from(t).equals(this.id);if(typeof t=="object"&&"toHexString"in t&&typeof t.toHexString=="function"){var r=t.toHexString(),o=this.toHexString().toLowerCase();return typeof r=="string"&&r.toLowerCase()===o}return!1},e.prototype.getTimestamp=function(){var t=new Date,r=this.id.readUInt32BE(0);return t.setTime(Math.floor(r)*1e3),t},e.createPk=function(){return new e},e.createFromTime=function(t){var r=I.from([0,0,0,0,0,0,0,0,0,0,0,0]);return r.writeUInt32BE(t,0),new e(r)},e.createFromHexString=function(t){if(typeof t>"u"||t!=null&&t.length!==24)throw new C("Argument passed in must be a single String of 12 bytes or a string of 24 hex characters");return new e(I.from(t,"hex"))},e.isValid=function(t){if(t==null)return!1;try{return new e(t),!0}catch{return!1}},e.prototype.toExtendedJSON=function(){return this.toHexString?{$oid:this.toHexString()}:{$oid:this.toString("hex")}},e.fromExtendedJSON=function(t){return new e(t.$oid)},e.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},e.prototype.inspect=function(){return'new ObjectId("'.concat(this.toHexString(),'")')},e.index=Math.floor(Math.random()*16777215),e}();Object.defineProperty(z.prototype,"generate",{value:ee(function(e){return z.generate(e)},"Please use the static `ObjectId.generate(time)` instead")});Object.defineProperty(z.prototype,"getInc",{value:ee(function(){return z.getInc()},"Please use the static `ObjectId.getInc()` instead")});Object.defineProperty(z.prototype,"get_inc",{value:ee(function(){return z.getInc()},"Please use the static `ObjectId.getInc()` instead")});Object.defineProperty(z,"get_inc",{value:ee(function(){return z.getInc()},"Please use the static `ObjectId.getInc()` instead")});Object.defineProperty(z.prototype,"_bsontype",{value:"ObjectID"});function Gn(e){return e.split("").sort().join("")}var kt=function(){function e(t,r){if(!(this instanceof e))return new e(t,r);if(this.pattern=t,this.options=Gn(r??""),this.pattern.indexOf("\0")!==-1)throw new pt("BSON Regex patterns cannot contain null bytes, found: ".concat(JSON.stringify(this.pattern)));if(this.options.indexOf("\0")!==-1)throw new pt("BSON Regex options cannot contain null bytes, found: ".concat(JSON.stringify(this.options)));for(var o=0;o<this.options.length;o++)if(!(this.options[o]==="i"||this.options[o]==="m"||this.options[o]==="x"||this.options[o]==="l"||this.options[o]==="s"||this.options[o]==="u"))throw new pt("The regular expression option [".concat(this.options[o],"] is not supported"))}return e.parseOptions=function(t){return t?t.split("").sort().join(""):""},e.prototype.toExtendedJSON=function(t){return t=t||{},t.legacy?{$regex:this.pattern,$options:this.options}:{$regularExpression:{pattern:this.pattern,options:this.options}}},e.fromExtendedJSON=function(t){if("$regex"in t)if(typeof t.$regex!="string"){if(t.$regex._bsontype==="BSONRegExp")return t}else return new e(t.$regex,e.parseOptions(t.$options));if("$regularExpression"in t)return new e(t.$regularExpression.pattern,e.parseOptions(t.$regularExpression.options));throw new C("Unexpected BSONRegExp EJSON object form: ".concat(JSON.stringify(t)))},e}();Object.defineProperty(kt.prototype,"_bsontype",{value:"BSONRegExp"});var De=function(){function e(t){if(!(this instanceof e))return new e(t);this.value=t}return e.prototype.valueOf=function(){return this.value},e.prototype.toString=function(){return this.value},e.prototype.inspect=function(){return'new BSONSymbol("'.concat(this.value,'")')},e.prototype.toJSON=function(){return this.value},e.prototype.toExtendedJSON=function(){return{$symbol:this.value}},e.fromExtendedJSON=function(t){return new e(t.$symbol)},e.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},e}();Object.defineProperty(De.prototype,"_bsontype",{value:"Symbol"});var Zn=v,Br=function(e){te(t,e);function t(r,o){var a=this;return a instanceof t?(v.isLong(r)?a=e.call(this,r.low,r.high,!0)||this:Dt(r)&&typeof r.t<"u"&&typeof r.i<"u"?a=e.call(this,r.i,r.t,!0)||this:a=e.call(this,r,o,!0)||this,Object.defineProperty(a,"_bsontype",{value:"Timestamp",writable:!1,configurable:!1,enumerable:!1}),a):new t(r,o)}return t.prototype.toJSON=function(){return{$timestamp:this.toString()}},t.fromInt=function(r){return new t(v.fromInt(r,!0))},t.fromNumber=function(r){return new t(v.fromNumber(r,!0))},t.fromBits=function(r,o){return new t(r,o)},t.fromString=function(r,o){return new t(v.fromString(r,!0,o))},t.prototype.toExtendedJSON=function(){return{$timestamp:{t:this.high>>>0,i:this.low>>>0}}},t.fromExtendedJSON=function(r){return new t(r.$timestamp)},t.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},t.prototype.inspect=function(){return"new Timestamp({ t: ".concat(this.getHighBits(),", i: ").concat(this.getLowBits()," })")},t.MAX_VALUE=v.MAX_UNSIGNED_VALUE,t}(Zn);function Kn(e){return Dt(e)&&Reflect.has(e,"_bsontype")&&typeof e._bsontype=="string"}var Ur=2147483647,Rr=-2147483648,kr=9223372036854776e3,Fr=-9223372036854776e3,Xn={$oid:z,$binary:ct,$uuid:ct,$symbol:De,$numberInt:ie,$numberDecimal:ke,$numberDouble:ne,$numberLong:v,$minKey:Le,$maxKey:Fe,$regex:kt,$regularExpression:kt,$timestamp:Br};function Lr(e,t){if(t===void 0&&(t={}),typeof e=="number"){if(t.relaxed||t.legacy)return e;if(Math.floor(e)===e){if(e>=Rr&&e<=Ur)return new ie(e);if(e>=Fr&&e<=kr)return v.fromNumber(e)}return new ne(e)}if(e==null||typeof e!="object")return e;if(e.$undefined)return null;for(var r=Object.keys(e).filter(function(w){return w.startsWith("$")&&e[w]!=null}),o=0;o<r.length;o++){var a=Xn[r[o]];if(a)return a.fromExtendedJSON(e,t)}if(e.$date!=null){var u=e.$date,s=new Date;return t.legacy?typeof u=="number"?s.setTime(u):typeof u=="string"&&s.setTime(Date.parse(u)):typeof u=="string"?s.setTime(Date.parse(u)):v.isLong(u)?s.setTime(u.toNumber()):typeof u=="number"&&t.relaxed&&s.setTime(u),s}if(e.$code!=null){var l=Object.assign({},e);return e.$scope&&(l.$scope=Lr(e.$scope)),re.fromExtendedJSON(e)}if(Fn(e)||e.$dbPointer){var p=e.$ref?e:e.$dbPointer;if(p instanceof Rt)return p;var m=Object.keys(p).filter(function(w){return w.startsWith("$")}),y=!0;if(m.forEach(function(w){["$ref","$id","$db"].indexOf(w)===-1&&(y=!1)}),y)return Rt.fromExtendedJSON(p)}return e}function qn(e,t){return e.map(function(r,o){t.seenObjects.push({propertyName:"index ".concat(o),obj:null});try{return ft(r,t)}finally{t.seenObjects.pop()}})}function sr(e){var t=e.toISOString();return e.getUTCMilliseconds()!==0?t:t.slice(0,-5)+"Z"}function ft(e,t){if((typeof e=="object"||typeof e=="function")&&e!==null){var r=t.seenObjects.findIndex(function(F){return F.obj===e});if(r!==-1){var o=t.seenObjects.map(function(F){return F.propertyName}),a=o.slice(0,r).map(function(F){return"".concat(F," -> ")}).join(""),u=o[r],s=" -> "+o.slice(r+1,o.length-1).map(function(F){return"".concat(F," -> ")}).join(""),l=o[o.length-1],p=" ".repeat(a.length+u.length/2),m="-".repeat(s.length+(u.length+l.length)/2-1);throw new C(`Converting circular structure to EJSON:
`+"    ".concat(a).concat(u).concat(s).concat(l,`
`)+"    ".concat(p,"\\").concat(m,"/"))}t.seenObjects[t.seenObjects.length-1].obj=e}if(Array.isArray(e))return qn(e,t);if(e===void 0)return null;if(e instanceof Date||Bn(e)){var y=e.getTime(),w=y>-1&&y<2534023188e5;return t.legacy?t.relaxed&&w?{$date:e.getTime()}:{$date:sr(e)}:t.relaxed&&w?{$date:sr(e)}:{$date:{$numberLong:e.getTime().toString()}}}if(typeof e=="number"&&(!t.relaxed||!isFinite(e))){if(Math.floor(e)===e){var x=e>=Rr&&e<=Ur,_=e>=Fr&&e<=kr;if(x)return{$numberInt:e.toString()};if(_)return{$numberLong:e.toString()}}return{$numberDouble:e.toString()}}if(e instanceof RegExp||In(e)){var E=e.flags;if(E===void 0){var A=e.toString().match(/[gimuy]*$/);A&&(E=A[0])}var L=new kt(e.source,E);return L.toExtendedJSON(t)}return e!=null&&typeof e=="object"?ti(e,t):e}var Qn={Binary:function(e){return new ct(e.value(),e.sub_type)},Code:function(e){return new re(e.code,e.scope)},DBRef:function(e){return new Rt(e.collection||e.namespace,e.oid,e.db,e.fields)},Decimal128:function(e){return new ke(e.bytes)},Double:function(e){return new ne(e.value)},Int32:function(e){return new ie(e.value)},Long:function(e){return v.fromBits(e.low!=null?e.low:e.low_,e.low!=null?e.high:e.high_,e.low!=null?e.unsigned:e.unsigned_)},MaxKey:function(){return new Fe},MinKey:function(){return new Le},ObjectID:function(e){return new z(e)},ObjectId:function(e){return new z(e)},BSONRegExp:function(e){return new kt(e.pattern,e.options)},Symbol:function(e){return new De(e.value)},Timestamp:function(e){return Br.fromBits(e.low,e.high)}};function ti(e,t){if(e==null||typeof e!="object")throw new pt("not an object instance");var r=e._bsontype;if(typeof r>"u"){var o={};for(var a in e){t.seenObjects.push({propertyName:a,obj:null});try{var u=ft(e[a],t);a==="__proto__"?Object.defineProperty(o,a,{value:u,writable:!0,enumerable:!0,configurable:!0}):o[a]=u}finally{t.seenObjects.pop()}}return o}else if(Kn(e)){var s=e;if(typeof s.toExtendedJSON!="function"){var l=Qn[e._bsontype];if(!l)throw new C("Unrecognized or invalid _bsontype: "+e._bsontype);s=l(s)}return r==="Code"&&s.scope?s=new re(s.code,ft(s.scope,t)):r==="DBRef"&&s.oid&&(s=new Rt(ft(s.collection,t),ft(s.oid,t),ft(s.db,t),ft(s.fields,t))),s.toExtendedJSON(t)}else throw new pt("_bsontype must be a string, but was: "+typeof r)}var dt;(function(e){function t(u,s){var l=Object.assign({},{relaxed:!0,legacy:!1},s);return typeof l.relaxed=="boolean"&&(l.strict=!l.relaxed),typeof l.strict=="boolean"&&(l.relaxed=!l.strict),JSON.parse(u,function(p,m){if(p.indexOf("\0")!==-1)throw new pt("BSON Document field names cannot contain null bytes, found: ".concat(JSON.stringify(p)));return Lr(m,l)})}e.parse=t;function r(u,s,l,p){l!=null&&typeof l=="object"&&(p=l,l=0),s!=null&&typeof s=="object"&&!Array.isArray(s)&&(p=s,s=void 0,l=0);var m=Object.assign({relaxed:!0,legacy:!1},p,{seenObjects:[{propertyName:"(root)",obj:null}]}),y=ft(u,m);return JSON.stringify(y,s,l)}e.stringify=r;function o(u,s){return s=s||{},JSON.parse(r(u,s))}e.serialize=o;function a(u,s){return s=s||{},t(JSON.stringify(u),s)}e.deserialize=a})(dt||(dt={}));var ar=Nr();ar.Map?ar.Map:function(){function e(t){t===void 0&&(t=[]),this._keys=[],this._values={};for(var r=0;r<t.length;r++)if(t[r]!=null){var o=t[r],a=o[0],u=o[1];this._keys.push(a),this._values[a]={v:u,i:this._keys.length-1}}}return e.prototype.clear=function(){this._keys=[],this._values={}},e.prototype.delete=function(t){var r=this._values[t];return r==null?!1:(delete this._values[t],this._keys.splice(r.i,1),!0)},e.prototype.entries=function(){var t=this,r=0;return{next:function(){var o=t._keys[r++];return{value:o!==void 0?[o,t._values[o].v]:void 0,done:o===void 0}}}},e.prototype.forEach=function(t,r){r=r||this;for(var o=0;o<this._keys.length;o++){var a=this._keys[o];t.call(r,this._values[a].v,a,r)}},e.prototype.get=function(t){return this._values[t]?this._values[t].v:void 0},e.prototype.has=function(t){return this._values[t]!=null},e.prototype.keys=function(){var t=this,r=0;return{next:function(){var o=t._keys[r++];return{value:o!==void 0?o:void 0,done:o===void 0}}}},e.prototype.set=function(t,r){return this._values[t]?(this._values[t].v=r,this):(this._keys.push(t),this._values[t]={v:r,i:this._keys.length-1},this)},e.prototype.values=function(){var t=this,r=0;return{next:function(){var o=t._keys[r++];return{value:o!==void 0?t._values[o].v:void 0,done:o===void 0}}}},Object.defineProperty(e.prototype,"size",{get:function(){return this._keys.length},enumerable:!1,configurable:!0}),e}();v.fromNumber(Rn);v.fromNumber(kn);var ge=new Uint8Array(8);new DataView(ge.buffer,ge.byteOffset,ge.byteLength);var ei=1024*1024*17;I.alloc(ei);var fr=function(e,t,r){if(r||arguments.length===2)for(var o=0,a=t.length,u;o<a;o++)(u||!(o in t))&&(u||(u=Array.prototype.slice.call(t,0,o)),u[o]=t[o]);return e.concat(u||Array.prototype.slice.call(t))},ri=function(){function e(t,r,o){this.name=t,this.version=r,this.os=o,this.type="browser"}return e}(),ni=function(){function e(t){this.version=t,this.type="node",this.name="node",this.os=process.platform}return e}(),ii=function(){function e(t,r,o,a){this.name=t,this.version=r,this.os=o,this.bot=a,this.type="bot-device"}return e}(),oi=function(){function e(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return e}(),si=function(){function e(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return e}(),ai=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,fi=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,ur=3,ui=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",ai]],cr=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function ci(e){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new si:typeof navigator<"u"?li(navigator.userAgent):di()}function hi(e){return e!==""&&ui.reduce(function(t,r){var o=r[0],a=r[1];if(t)return t;var u=a.exec(e);return!!u&&[o,u]},!1)}function li(e){var t=hi(e);if(!t)return null;var r=t[0],o=t[1];if(r==="searchbot")return new oi;var a=o[1]&&o[1].split(".").join("_").split("_").slice(0,3);a?a.length<ur&&(a=fr(fr([],a,!0),gi(ur-a.length),!0)):a=[];var u=a.join("."),s=pi(e),l=fi.exec(e);return l&&l[1]?new ii(r,u,s,l[1]):new ri(r,u,s)}function pi(e){for(var t=0,r=cr.length;t<r;t++){var o=cr[t],a=o[0],u=o[1],s=u.exec(e);if(s)return a}return null}function di(){var e=typeof process<"u"&&process.version;return e?new ni(process.version.slice(1)):null}function gi(e){for(var t=[],r=0;r<e;r++)t.push("0");return t}const yi=globalThis.fetch.bind(globalThis),Dr="3.7.6",mi=Dr,wi=typeof atob=="function",bi=typeof btoa=="function",At=typeof Buffer=="function",hr=typeof TextDecoder=="function"?new TextDecoder:void 0,lr=typeof TextEncoder=="function"?new TextEncoder:void 0,xi="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",Ut=Array.prototype.slice.call(xi),Yt=(e=>{let t={};return e.forEach((r,o)=>t[r]=o),t})(Ut),vi=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,P=String.fromCharCode.bind(String),pr=typeof Uint8Array.from=="function"?Uint8Array.from.bind(Uint8Array):e=>new Uint8Array(Array.prototype.slice.call(e,0)),Mr=e=>e.replace(/=/g,"").replace(/[+\/]/g,t=>t=="+"?"-":"_"),Cr=e=>e.replace(/[^A-Za-z0-9\+\/]/g,""),$r=e=>{let t,r,o,a,u="";const s=e.length%3;for(let l=0;l<e.length;){if((r=e.charCodeAt(l++))>255||(o=e.charCodeAt(l++))>255||(a=e.charCodeAt(l++))>255)throw new TypeError("invalid character found");t=r<<16|o<<8|a,u+=Ut[t>>18&63]+Ut[t>>12&63]+Ut[t>>6&63]+Ut[t&63]}return s?u.slice(0,s-3)+"===".substring(s):u},Me=bi?e=>btoa(e):At?e=>Buffer.from(e,"binary").toString("base64"):$r,Se=At?e=>Buffer.from(e).toString("base64"):e=>{let r=[];for(let o=0,a=e.length;o<a;o+=4096)r.push(P.apply(null,e.subarray(o,o+4096)));return Me(r.join(""))},Gt=(e,t=!1)=>t?Mr(Se(e)):Se(e),Ei=e=>{if(e.length<2){var t=e.charCodeAt(0);return t<128?e:t<2048?P(192|t>>>6)+P(128|t&63):P(224|t>>>12&15)+P(128|t>>>6&63)+P(128|t&63)}else{var t=65536+(e.charCodeAt(0)-55296)*1024+(e.charCodeAt(1)-56320);return P(240|t>>>18&7)+P(128|t>>>12&63)+P(128|t>>>6&63)+P(128|t&63)}},_i=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,jr=e=>e.replace(_i,Ei),dr=At?e=>Buffer.from(e,"utf8").toString("base64"):lr?e=>Se(lr.encode(e)):e=>Me(jr(e)),St=(e,t=!1)=>t?Mr(dr(e)):dr(e),gr=e=>St(e,!0),Si=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,Ni=e=>{switch(e.length){case 4:var t=(7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3),r=t-65536;return P((r>>>10)+55296)+P((r&1023)+56320);case 3:return P((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return P((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},Pr=e=>e.replace(Si,Ni),Jr=e=>{if(e=e.replace(/\s+/g,""),!vi.test(e))throw new TypeError("malformed base64.");e+="==".slice(2-(e.length&3));let t,r="",o,a;for(let u=0;u<e.length;)t=Yt[e.charAt(u++)]<<18|Yt[e.charAt(u++)]<<12|(o=Yt[e.charAt(u++)])<<6|(a=Yt[e.charAt(u++)]),r+=o===64?P(t>>16&255):a===64?P(t>>16&255,t>>8&255):P(t>>16&255,t>>8&255,t&255);return r},Ce=wi?e=>atob(Cr(e)):At?e=>Buffer.from(e,"base64").toString("binary"):Jr,Vr=At?e=>pr(Buffer.from(e,"base64")):e=>pr(Ce(e).split("").map(t=>t.charCodeAt(0))),Wr=e=>Vr(Hr(e)),Ai=At?e=>Buffer.from(e,"base64").toString("utf8"):hr?e=>hr.decode(Vr(e)):e=>Pr(Ce(e)),Hr=e=>Cr(e.replace(/[-_]/g,t=>t=="-"?"+":"/")),Ne=e=>Ai(Hr(e)),Oi=e=>{if(typeof e!="string")return!1;const t=e.replace(/\s+/g,"").replace(/={0,2}$/,"");return!/[^\s0-9a-zA-Z\+/]/.test(t)||!/[^\s0-9a-zA-Z\-_]/.test(t)},Yr=e=>({value:e,enumerable:!1,writable:!0,configurable:!0}),zr=function(){const e=(t,r)=>Object.defineProperty(String.prototype,t,Yr(r));e("fromBase64",function(){return Ne(this)}),e("toBase64",function(t){return St(this,t)}),e("toBase64URI",function(){return St(this,!0)}),e("toBase64URL",function(){return St(this,!0)}),e("toUint8Array",function(){return Wr(this)})},Gr=function(){const e=(t,r)=>Object.defineProperty(Uint8Array.prototype,t,Yr(r));e("toBase64",function(t){return Gt(this,t)}),e("toBase64URI",function(){return Gt(this,!0)}),e("toBase64URL",function(){return Gt(this,!0)})},Ti=()=>{zr(),Gr()},Kt={version:Dr,VERSION:mi,atob:Ce,atobPolyfill:Jr,btoa:Me,btoaPolyfill:$r,fromBase64:Ne,toBase64:St,encode:St,encodeURI:gr,encodeURL:gr,utob:jr,btou:Pr,decode:Ne,isValid:Oi,fromUint8Array:Gt,toUint8Array:Wr,extendString:zr,extendUint8Array:Gr,extendBuiltins:Ti},Ii={relaxed:!1};function Zr(e){return dt.serialize(e,Ii)}function Kr(e){return Array.isArray(e)?e.map(t=>dt.deserialize(t)):dt.deserialize(e)}var Ae;(function(e){e.Normal="normal",e.Server="server"})(Ae||(Ae={}));var tt;(function(e){e.NAME="name",e.EMAIL="email",e.PICTURE="picture",e.FIRST_NAME="first_name",e.LAST_NAME="last_name",e.GENDER="gender",e.BIRTHDAY="birthday",e.MIN_AGE="min_age",e.MAX_AGE="max_age"})(tt||(tt={}));const yr={[tt.NAME]:"name",[tt.EMAIL]:"email",[tt.PICTURE]:"pictureUrl",[tt.FIRST_NAME]:"firstName",[tt.LAST_NAME]:"lastName",[tt.GENDER]:"gender",[tt.BIRTHDAY]:"birthday",[tt.MIN_AGE]:"minAge",[tt.MAX_AGE]:"maxAge"};class Xr{constructor(t){if(this.type=Ae.Normal,this.identities=[],typeof t=="object"&&t!==null){const{type:r,identities:o,data:a}=t;if(typeof r=="string")this.type=r;else throw new Error("Expected 'type' in the response body");if(Array.isArray(o))this.identities=o.map(u=>{const{id:s,provider_type:l}=u;return{id:s,providerType:l}});else throw new Error("Expected 'identities' in the response body");if(typeof a=="object"&&a!==null){const u=Object.fromEntries(Object.entries(a).map(([s,l])=>s in yr?[yr[s],l]:[s,l]));this.data=Kr(u)}else throw new Error("Expected 'data' in the response body")}else this.data={}}}class et{constructor(t,r){this.storage=t,this.keyPart=r}get(t){return this.storage.get(this.keyPart+et.PART_SEPARATOR+t)}set(t,r){return this.storage.set(this.keyPart+et.PART_SEPARATOR+t,r)}remove(t){return this.storage.remove(this.keyPart+et.PART_SEPARATOR+t)}prefix(t){return new et(this,t)}clear(t=""){return this.storage.clear(this.keyPart+et.PART_SEPARATOR+t)}addListener(t){return this.storage.addListener(t)}removeListener(t){return this.storage.addListener(t)}}et.PART_SEPARATOR=":";class Bi{constructor(){this.storage={},this.listeners=new Set}get(t){return t in this.storage?this.storage[t]:null}set(t,r){this.storage[t]=r,this.fireListeners()}remove(t){delete this.storage[t],this.fireListeners()}prefix(t){return new et(this,t)}clear(t){for(const r of Object.keys(this.storage))(!t||r.startsWith(t))&&delete this.storage[r];this.fireListeners()}addListener(t){this.listeners.add(t)}removeListener(t){this.listeners.delete(t)}fireListeners(){this.listeners.forEach(t=>t())}}const ye="accessToken",me="refreshToken",we="profile",be="providerType";class Ui extends et{constructor(t,r){super(t,`user(${r})`)}get accessToken(){return this.get(ye)}set accessToken(t){t===null?this.remove(ye):this.set(ye,t)}get refreshToken(){return this.get(me)}set refreshToken(t){t===null?this.remove(me):this.set(me,t)}get profile(){const t=this.get(we);if(t){const r=new Xr;return Object.assign(r,JSON.parse(t)),r}}set profile(t){t?this.set(we,JSON.stringify(t)):this.remove(we)}get providerType(){const t=this.get(be);if(t)return t}set providerType(t){t?this.set(be,t):this.remove(be)}}function Oe(e){return Object.fromEntries(Object.entries(e).filter(t=>typeof t[1]<"u"))}function Ri(e,t){let r="";for(let o=0;o<e;o++)r+=t[Math.floor(Math.random()*t.length)];return r}function qr(e,t=!0){const r=Oe(e);return(t&&Object.keys(r).length>0?"?":"")+Object.entries(r).map(([a,u])=>`${a}=${encodeURIComponent(u)}`).join("&")}function ki(e){const t=e[0]==="?"?e.substr(1):e;return Object.fromEntries(t.split("&").filter(r=>r.length>0).map(r=>r.split("=")).map(([r,o])=>[r,decodeURIComponent(o)]))}const Fi=["inspect","callFunction","callFunctionStreaming",...Object.getOwnPropertyNames(Object.prototype)];function Li(e){for(const t of e)if(typeof t=="object"&&t)for(const[r,o]of Object.entries(t))o===void 0&&delete t[r];return e}function Di(e){return Li(e).map(r=>typeof r=="object"?Zr(r):r)}class oe{static create(t,r={}){const o=new oe(t,r);return new Proxy(o,{get(a,u,s){if(typeof u=="string"&&Fi.indexOf(u)===-1)return a.callFunction.bind(a,u);{const l=Reflect.get(a,u,s);return typeof l=="function"?l.bind(a):l}}})}constructor(t,r={}){this.fetcher=t,this.serviceName=r.serviceName,this.argsTransformation=r.argsTransformation||Di}async callFunction(t,...r){const o={name:t,arguments:this.argsTransformation?this.argsTransformation(r):r};this.serviceName&&(o.service=this.serviceName);const a=this.fetcher.appRoute;return this.fetcher.fetchJSON({method:"POST",path:a.functionsCall().path,body:o})}callFunctionStreaming(t,...r){const o={name:t,arguments:this.argsTransformation?this.argsTransformation(r):r};this.serviceName&&(o.service=this.serviceName);const a=this.fetcher.appRoute,u=qr({baas_request:Kt.encode(JSON.stringify(o))});return this.fetcher.fetchStream({method:"GET",path:a.functionsCall().path+u})}}class Mi{constructor(t,r="local-userpass"){this.fetcher=t,this.providerName=r}async registerUser(t){const r=this.fetcher.appRoute;await this.fetcher.fetchJSON({method:"POST",path:r.emailPasswordAuth(this.providerName).register().path,body:t})}async confirmUser(t){const r=this.fetcher.appRoute;await this.fetcher.fetchJSON({method:"POST",path:r.emailPasswordAuth(this.providerName).confirm().path,body:t})}async resendConfirmationEmail(t){const r=this.fetcher.appRoute;await this.fetcher.fetchJSON({method:"POST",path:r.emailPasswordAuth(this.providerName).confirmSend().path,body:t})}async retryCustomConfirmation(t){const r=this.fetcher.appRoute;await this.fetcher.fetchJSON({method:"POST",path:r.emailPasswordAuth(this.providerName).confirmCall().path,body:t})}async resetPassword(t){const r=this.fetcher.appRoute;await this.fetcher.fetchJSON({method:"POST",path:r.emailPasswordAuth(this.providerName).reset().path,body:t})}async sendResetPasswordEmail(t){const r=this.fetcher.appRoute;await this.fetcher.fetchJSON({method:"POST",path:r.emailPasswordAuth(this.providerName).resetSend().path,body:t})}async callResetPasswordFunction(t,...r){const o=this.fetcher.appRoute;await this.fetcher.fetchJSON({method:"POST",path:o.emailPasswordAuth(this.providerName).resetCall().path,body:{...t,arguments:r}})}}function Ci(){return{path:"/api/client/v2.0",app(e){return{path:this.path+`/app/${e}`,location(){return{path:this.path+"/location"}},authProvider(t){return{path:this.path+`/auth/providers/${t}`,login(){return{path:this.path+"/login"}}}},emailPasswordAuth(t){return{...this.authProvider(t),register(){return{path:this.path+"/register"}},confirm(){return{path:this.path+"/confirm"}},confirmSend(){return{path:this.path+"/confirm/send"}},confirmCall(){return{path:this.path+"/confirm/call"}},reset(){return{path:this.path+"/reset"}},resetSend(){return{path:this.path+"/reset/send"}},resetCall(){return{path:this.path+"/reset/call"}}}},functionsCall(){return{path:this.path+"/functions/call"}}}},auth(){return{path:this.path+"/auth",apiKeys(){return{path:this.path+"/api_keys",key(e){return{path:this.path+`/${e}`,enable(){return{path:this.path+"/enable"}},disable(){return{path:this.path+"/disable"}}}}}},profile(){return{path:this.path+"/profile"}},session(){return{path:this.path+"/session"}},delete(){return{path:this.path+"/delete"}}}}}}var X={api:Ci};class $i{constructor(t){this.fetcher=t}create(t){return this.fetcher.fetchJSON({method:"POST",body:{name:t},path:X.api().auth().apiKeys().path,tokenType:"refresh"})}fetch(t){return this.fetcher.fetchJSON({method:"GET",path:X.api().auth().apiKeys().key(t).path,tokenType:"refresh"})}fetchAll(){return this.fetcher.fetchJSON({method:"GET",tokenType:"refresh",path:X.api().auth().apiKeys().path})}async delete(t){await this.fetcher.fetchJSON({method:"DELETE",path:X.api().auth().apiKeys().key(t).path,tokenType:"refresh"})}async enable(t){await this.fetcher.fetchJSON({method:"PUT",path:X.api().auth().apiKeys().key(t).enable().path,tokenType:"refresh"})}async disable(t){await this.fetcher.fetchJSON({method:"PUT",path:X.api().auth().apiKeys().key(t).disable().path,tokenType:"refresh"})}}let Te=null;function ji(e){Te=e}function Ft(){if(Te)return Te;throw new Error("Cannot get environment before it's set")}class xe extends Error{constructor({message:t,code:r}){super(t),this.name="WatchError",this.code=r}}var H;(function(e){e.NEED_DATA="NEED_DATA",e.HAVE_EVENT="HAVE_EVENT",e.HAVE_ERROR="HAVE_ERROR"})(H||(H={}));class Pi{constructor(){this._state=H.NEED_DATA,this._error=null,this._textDecoder=new(Ft()).TextDecoder,this._buffer="",this._bufferOffset=0,this._eventType="",this._dataBuffer=""}feedBuffer(t){this.assertState(H.NEED_DATA),this._buffer+=this._textDecoder.decode(t,{stream:!0}),this.advanceBufferState()}feedLine(t){if(this.assertState(H.NEED_DATA),t.endsWith(`
`)&&(t=t.substr(0,t.length-1)),t.endsWith("\r")&&(t=t.substr(0,t.length-1)),t.length===0){if(this._dataBuffer.length===0){this._eventType="";return}this._dataBuffer.endsWith(`
`)&&(this._dataBuffer=this._dataBuffer.substr(0,this._dataBuffer.length-1)),this.feedSse({data:this._dataBuffer,eventType:this._eventType}),this._dataBuffer="",this._eventType=""}if(t[0]===":")return;const r=t.indexOf(":"),o=t.substr(0,r);let a=r===-1?"":t.substr(r+1);a.startsWith(" ")&&(a=a.substr(1)),o==="event"?this._eventType=a:o==="data"&&(this._dataBuffer+=a,this._dataBuffer+=`
`)}feedSse(t){this.assertState(H.NEED_DATA);const r=t.data.indexOf("%");if(r!==-1){let o="",a=0;for(let u=r;u!==-1;u=t.data.indexOf("%",a)){o+=t.data.substr(a,u-a);const s=t.data.substr(u,3);s==="%25"?o+="%":s==="%0A"?o+=`
`:s==="%0D"?o+="\r":o+=s,a=u+s.length}o+=t.data.substr(a),t.data=o}if(!t.eventType||t.eventType==="message"){try{const o=dt.parse(t.data);if(typeof o=="object"){this._nextEvent=o,this._state=H.HAVE_EVENT;return}}catch{}this._state=H.HAVE_ERROR,this._error=new xe({message:"server returned malformed event: "+t.data,code:"bad bson parse"})}else if(t.eventType==="error"){this._state=H.HAVE_ERROR,this._error=new xe({message:t.data,code:"unknown"});try{const{error_code:o,error:a}=dt.parse(t.data);if(typeof o!="string"||typeof a!="string")return;this._error=new xe({message:a,code:o})}catch{return}}}get state(){return this._state}nextEvent(){this.assertState(H.HAVE_EVENT);const t=this._nextEvent;return this._state=H.NEED_DATA,this.advanceBufferState(),t}get error(){return this._error}advanceBufferState(){for(this.assertState(H.NEED_DATA);this.state===H.NEED_DATA;){if(this._bufferOffset===this._buffer.length){this._buffer="",this._bufferOffset=0;return}const t=this._buffer.indexOf(`
`,this._bufferOffset);if(t===-1){this._bufferOffset!==0&&(this._buffer=this._buffer.substr(this._bufferOffset,this._buffer.length-this._bufferOffset),this._bufferOffset=0);return}this.feedLine(this._buffer.substr(this._bufferOffset,t-this._bufferOffset)),this._bufferOffset=t+1}}assertState(t){if(this._state!==t)throw Error(`Expected WatchStream to be in state ${t}, but in state ${this._state}`)}}class Ji{constructor(t,r,o,a){this.functions=oe.create(t,{serviceName:r}),this.databaseName=o,this.collectionName=a,this.serviceName=r,this.fetcher=t}find(t={},r={}){return this.functions.find({database:this.databaseName,collection:this.collectionName,query:t,project:r.projection,sort:r.sort,limit:r.limit})}findOne(t={},r={}){return this.functions.findOne({database:this.databaseName,collection:this.collectionName,query:t,project:r.projection,sort:r.sort})}findOneAndUpdate(t={},r,o={}){return this.functions.findOneAndUpdate({database:this.databaseName,collection:this.collectionName,filter:t,update:r,sort:o.sort,projection:o.projection,upsert:o.upsert,returnNewDocument:o.returnNewDocument})}findOneAndReplace(t={},r,o={}){return this.functions.findOneAndReplace({database:this.databaseName,collection:this.collectionName,filter:t,update:r,sort:o.sort,projection:o.projection,upsert:o.upsert,returnNewDocument:o.returnNewDocument})}findOneAndDelete(t={},r={}){return this.functions.findOneAndReplace({database:this.databaseName,collection:this.collectionName,filter:t,sort:r.sort,projection:r.projection})}aggregate(t){return this.functions.aggregate({database:this.databaseName,collection:this.collectionName,pipeline:t})}count(t={},r={}){return this.functions.count({database:this.databaseName,collection:this.collectionName,query:t,limit:r.limit})}insertOne(t){return this.functions.insertOne({database:this.databaseName,collection:this.collectionName,document:t})}insertMany(t){return this.functions.insertMany({database:this.databaseName,collection:this.collectionName,documents:t})}deleteOne(t={}){return this.functions.deleteOne({database:this.databaseName,collection:this.collectionName,query:t})}deleteMany(t={}){return this.functions.deleteMany({database:this.databaseName,collection:this.collectionName,query:t})}updateOne(t,r,o={}){return this.functions.updateOne({database:this.databaseName,collection:this.collectionName,query:t,update:r,upsert:o.upsert,arrayFilters:o.arrayFilters})}updateMany(t,r,o={}){return this.functions.updateMany({database:this.databaseName,collection:this.collectionName,query:t,update:r,upsert:o.upsert,arrayFilters:o.arrayFilters})}watch({ids:t,filter:r}={}){const a=this.functions.callFunctionStreaming("watch",{database:this.databaseName,collection:this.collectionName,ids:t,filter:r}).then(l=>l[Symbol.asyncIterator]()),u=this.watchImpl(a),s=u.return;return Object.assign(u,{return(l){return a.then(p=>p.return?p.return(l):void 0),s.call(u,l)}})}async*watchImpl(t){const r=new Pi,o=t.then(a=>({[Symbol.asyncIterator]:()=>a}));for await(const a of await o)if(a){for(r.feedBuffer(a);r.state==H.HAVE_EVENT;)yield r.nextEvent();if(r.state==H.HAVE_ERROR)throw r.error}}}function Vi(e,t,r,o){return new Ji(e,t,r,o)}function Wi(e,t,r){return{collection:Vi.bind(null,e,t,r)}}function Hi(e,t="mongo-db"){return{db:Wi.bind(null,e,t)}}const Yi="000000000000000000000000";var lt;(function(e){e.Active="active",e.LoggedOut="logged-out",e.Removed="removed"})(lt||(lt={}));var mr;(function(e){e.Normal="normal",e.Server="server"})(mr||(mr={}));class wr{constructor(t){if(this.app=t.app,this.id=t.id,this.storage=new Ui(this.app.storage,this.id),"accessToken"in t&&"refreshToken"in t&&"providerType"in t)this._accessToken=t.accessToken,this._refreshToken=t.refreshToken,this.providerType=t.providerType,this.storage.accessToken=t.accessToken,this.storage.refreshToken=t.refreshToken,this.storage.providerType=t.providerType;else{this._accessToken=this.storage.accessToken,this._refreshToken=this.storage.refreshToken;const r=this.storage.providerType;if(this._profile=this.storage.profile,r)this.providerType=r;else throw new Error("Storage is missing a provider type")}this.fetcher=this.app.fetcher.clone({userContext:{currentUser:this}}),this.apiKeys=new $i(this.fetcher),this.functions=oe.create(this.fetcher)}get accessToken(){return this._accessToken}set accessToken(t){this._accessToken=t,this.storage.accessToken=t}get refreshToken(){return this._refreshToken}set refreshToken(t){this._refreshToken=t,this.storage.refreshToken=t}get state(){return this.id in this.app.allUsers?this.refreshToken===null?lt.LoggedOut:lt.Active:lt.Removed}get isLoggedIn(){return this.state===lt.Active}get customData(){if(this.accessToken)return this.decodeAccessToken().userData;throw new Error("Cannot read custom data without an access token")}get profile(){if(this._profile)return this._profile.data;throw new Error("A profile was never fetched for this user")}get identities(){if(this._profile)return this._profile.identities;throw new Error("A profile was never fetched for this user")}get deviceId(){if(this.accessToken){const t=this.accessToken.split(".")[1];if(t){const o=JSON.parse(Kt.decode(t)).baas_device_id;if(typeof o=="string"&&o!==Yi)return o}}return null}async refreshProfile(){const t=await this.fetcher.fetchJSON({method:"GET",path:X.api().auth().profile().path});this._profile=new Xr(t),this.storage.profile=this._profile}async logOut(){try{this._refreshToken!==null&&await this.fetcher.fetchJSON({method:"DELETE",path:X.api().auth().session().path,tokenType:"refresh"})}catch(t){if(!(t instanceof Error)||!t.message.includes("failed to find refresh token"))throw t}finally{this.accessToken=null,this.refreshToken=null}}async linkCredentials(t){const r=await this.app.authenticator.authenticate(t,this);if(this.id!==r.userId){const o=`got user id ${r.userId} expected ${this.id}`;throw new Error(`Link response ment for another user (${o})`)}this.accessToken=r.accessToken,await this.refreshProfile()}async refreshAccessToken(){const t=await this.fetcher.fetchJSON({method:"POST",path:X.api().auth().session().path,tokenType:"refresh"}),{access_token:r}=t;if(typeof r=="string")this.accessToken=r;else throw new Error("Expected an 'access_token' in the response")}async refreshCustomData(){return await this.refreshAccessToken(),this.customData}addListener(){throw new Error("Not yet implemented")}removeListener(){throw new Error("Not yet implemented")}removeAllListeners(){throw new Error("Not yet implemented")}callFunction(t,...r){return this.functions.callFunction(t,...r)}toJSON(){return{id:this.id,accessToken:this.accessToken,refreshToken:this.refreshToken,profile:this._profile,state:this.state,customData:this.customData}}push(){throw new Error("Not yet implemented")}mongoClient(t){return Hi(this.fetcher,t)}decodeAccessToken(){if(this.accessToken){const t=this.accessToken.split(".");if(t.length!==3)throw new Error("Expected an access token with three parts");const r=t[1],o=Kt.decode(r),a=JSON.parse(o),{exp:u,iat:s,sub:l,user_data:p={}}=a;if(typeof u!="number")throw new Error("Failed to decode access token 'exp'");if(typeof s!="number")throw new Error("Failed to decode access token 'iat'");return{expires:u,issuedAt:s,subject:l,userData:p}}else throw new Error("Missing an access token")}}class K{static anonymous(t=!0){return new K("anon-user","anon-user",t,{})}static apiKey(t){return new K("api-key","api-key",!1,{key:t})}static emailPassword(t,r){return new K("local-userpass","local-userpass",!1,{username:t,password:r})}static function(t){return new K("custom-function","custom-function",!1,t)}static jwt(t){return new K("custom-token","custom-token",!1,{token:t})}static google(t){return new K("oauth2-google","oauth2-google",!1,K.derivePayload(t))}static derivePayload(t){if(typeof t=="string")throw new Error("`google(<tokenString>)` has been deprecated.  Please use `google(<authCodeObject>).");if(Object.keys(t).length===1){if("authCode"in t||"redirectUrl"in t)return t;if("idToken"in t)return{id_token:t.idToken};throw new Error("Unexpected payload: "+JSON.stringify(t))}else throw new Error("Expected only one property in payload, got "+JSON.stringify(t))}static facebook(t){return new K("oauth2-facebook","oauth2-facebook",!1,t.includes("://")?{redirectUrl:t}:{accessToken:t})}static apple(t){return new K("oauth2-apple","oauth2-apple",!1,t.includes("://")?{redirectUrl:t}:{id_token:t})}constructor(t,r,o,a){this.providerName=t,this.providerType=r,this.reuse=o,this.payload=a}}const br="userIds",xr="deviceId";class zi extends et{constructor(t,r){super(t,`app(${r})`)}getUserIds(){const t=this.get(br),r=t?JSON.parse(t):[];if(Array.isArray(r))return[...new Set(r)];throw new Error("Expected the user ids to be an array")}setUserIds(t,r){if(r){const o=this.getUserIds();for(const a of o)t.indexOf(a)===-1&&t.push(a)}this.set(br,JSON.stringify(t))}removeUserId(t){const o=this.getUserIds().filter(a=>a!==t);this.setUserIds(o,!1)}getDeviceId(){return this.get(xr)}setDeviceId(t){this.set(xr,t)}}const Gi="abcdefghijklmnopqrstuvwxyz",Zi=100,Ki={_baas_client_app_id:"appId",_baas_ua:"userAuth",_baas_link:"link",_baas_error:"error",_baas_state:"state"};class Nt{static parseRedirectLocation(t){const r=ki(t),o={};for(const[a,u]of Object.entries(Ki)){const s=r[a];s&&(o[u]=s)}return o}static handleRedirect(t,r=Ft().defaultStorage){const o=Nt.parseRedirectLocation(t),{state:a,error:u}=o;if(typeof a=="string"){const s=r.prefix("oauth2");Nt.getStateStorage(s,a).set("result",JSON.stringify(o))}else throw u?new Error(`Failed to handle OAuth 2.0 redirect: ${u}`):new Error("Failed to handle OAuth 2.0 redirect.")}static decodeAuthInfo(t){const r=(t||"").split("$");if(r.length===4){const[o,a,u,s]=r;return{accessToken:o,refreshToken:a,userId:u,deviceId:s}}else throw new Error("Failed to decode 'authInfo' into ids and tokens")}static getStateStorage(t,r){return t.prefix(`state(${r})`)}constructor(t,r=Ft().openWindow){this.storage=t.prefix("oauth2"),this.openWindow=r}openWindowAndWaitForRedirect(t,r){const o=Nt.getStateStorage(this.storage,r);return new Promise((a,u)=>{let s=null,l;const p=()=>{const m=o.get("result");if(m){const y=JSON.parse(m);o.removeListener(p),o.clear();try{s&&(clearInterval(l),s.close())}catch(w){console.warn(`Failed closing redirect window: ${w}`)}finally{a(y)}}};o.addListener(p),s=this.openWindow(t),l=setInterval(()=>{if(!s)clearInterval(l);else if(s.closed){clearInterval(l),o.removeListener(p);const m=new Error("Window closed");u(m)}},Zi)})}generateState(){return Ri(12,Gi)}}const vr="x-baas-location";class Xi{constructor(t,r,o){this.fetcher=t,this.oauth2=new Nt(r),this.getDeviceInformation=o}async authenticate(t,r){const o=this.getDeviceInformation(),a=typeof r=="object";if(t.providerType.startsWith("oauth2")&&typeof t.payload.redirectUrl=="string"){const u=this.oauth2.generateState(),s=await this.getLogInUrl(t,a,{state:u,redirect:t.payload.redirectUrl,providerRedirectHeader:a?!0:void 0,device:a?void 0:o.encode()});if(a){const p=(await this.fetcher.fetch({method:"GET",url:s,tokenType:a?"access":"none",user:r,mode:"cors",credentials:"include"})).headers.get(vr);if(p)return this.openWindowAndWaitForAuthResponse(p,u);throw new Error(`Missing ${vr} header`)}else return this.openWindowAndWaitForAuthResponse(s,u)}else{const u=await this.getLogInUrl(t,a),s=await this.fetcher.fetchJSON({method:"POST",url:u,body:{...t.payload,options:{device:o.toJSON()}},tokenType:a?"access":"none",user:r}),{user_id:l,access_token:p,refresh_token:m=null,device_id:y}=s;if(typeof l!="string")throw new Error("Expected a user id in the response");if(typeof p!="string")throw new Error("Expected an access token in the response");if(typeof m!="string"&&m!==null)throw new Error("Expected refresh token to be a string or null");if(typeof y!="string")throw new Error("Expected device id to be a string");return{userId:l,accessToken:p,refreshToken:m,deviceId:y}}}async getLogInUrl(t,r=!1,o={}){const u=this.fetcher.appRoute.authProvider(t.providerName).login(),s=qr({link:r?"true":void 0,...o});return await this.fetcher.locationUrl+u.path+s}async openWindowAndWaitForAuthResponse(t,r){const o=await this.oauth2.openWindowAndWaitForRedirect(t,r);return Nt.decodeAuthInfo(o.userAuth)}}class Xt extends Error{static async fromRequestAndResponse(t,r,o){var a;const{method:u="unknown"}=r,{status:s,statusText:l}=o;if(!((a=o.headers.get("content-type"))===null||a===void 0)&&a.startsWith("application/json")){const p=await o.json();if(typeof p=="object"&&p){const{error:m,error_code:y,link:w}=p;return new Xt(u,t,s,l,typeof m=="string"?m:void 0,typeof y=="string"?y:void 0,typeof w=="string"?w:void 0)}}return new Xt(u,t,s,l)}constructor(t,r,o,a,u,s,l){const p=a?`status ${o} ${a}`:`status ${o}`;typeof u=="string"?super(`Request failed (${t} ${r}): ${u} (${p})`):super(`Request failed (${t} ${r}): (${p})`),this.method=t,this.url=r,this.statusText=a,this.statusCode=o,this.error=u,this.errorCode=s,this.link=l}}function qi({body:e}){if(typeof e!="object"||e===null)throw new Error("Expected a non-null object");if("getReader"in e)return{[Symbol.asyncIterator](){const t=e.getReader();return{async next(){const{done:r,value:o}=await t.read();if(r)return{done:r,value:void 0};if(o instanceof Uint8Array)return{done:r,value:o};throw new Error("Expected value to be Uint8Array")},async return(){return await t.cancel(),{done:!0,value:null}}}}};throw new Error("Expected an AsyncIterable or a ReadableStream")}class _t{static buildAuthorizationHeader(t,r){if(!t||r==="none")return{};if(r==="access")return{Authorization:`Bearer ${t.accessToken}`};if(r==="refresh")return{Authorization:`Bearer ${t.refreshToken}`};throw new Error(`Unexpected token type (${r})`)}static buildBody(t){if(t){if(typeof t=="object"&&t!==null)return JSON.stringify(Zr(t));if(typeof t=="string")return t;throw console.log("body is",t),new Error("Unexpected type of body")}else return}static buildJsonHeader(t){return t&&t.length>0?{"Content-Type":"application/json"}:{}}constructor(t){this.config=t}clone(t){return new _t({...this.config,...t})}async fetch(t){const{path:r,url:o,tokenType:a="access",user:u=this.config.userContext.currentUser,...s}=t;if(typeof r=="string"&&typeof o=="string")throw new Error("Use of 'url' and 'path' mutually exclusive");if(typeof r=="string"){const l=await this.config.locationUrlContext.locationUrl+r;return this.fetch({...t,path:void 0,url:l})}else if(typeof o=="string"){const l=await this.config.fetch(o,{...s,headers:{..._t.buildAuthorizationHeader(u,a),...t.headers}});if(l.ok)return l;{const p=await Xt.fromRequestAndResponse(o,t,l);if(u&&l.status===401&&(p.errorCode==="InvalidSession"||p.error==="unauthorized")){if(a==="access")return await u.refreshAccessToken(),this.fetch({...t,user:u});a==="refresh"&&(u.accessToken=null,u.refreshToken=null)}throw p}}else throw new Error("Expected either 'url' or 'path'")}async fetchJSON(t){const{body:r}=t,o=_t.buildBody(r),a=_t.buildJsonHeader(o),u=await this.fetch({...t,body:o,headers:{Accept:"application/json",...a,...t.headers}}),s=u.headers.get("content-type");if(s!=null&&s.startsWith("application/json")){const l=await u.json();return Kr(l)}else{if(s===null)return null;throw new Error(`Expected JSON response, got "${s}"`)}}async fetchStream(t){const r=await this.fetch({...t,headers:{Accept:"text/event-stream",...t.headers}});return qi(r)}get appRoute(){return X.api().app(this.config.appId)}get locationUrl(){return this.config.locationUrlContext.locationUrl}}const Qi="deviceId";var Er;(function(e){e.DEVICE_ID="deviceId",e.APP_ID="appId",e.APP_VERSION="appVersion",e.PLATFORM="platform",e.PLATFORM_VERSION="platformVersion",e.SDK_VERSION="sdkVersion"})(Er||(Er={}));class to{constructor({appId:t,appVersion:r,deviceId:o}){this.sdkVersion="2.0.1";const a=Ft();this.platform=a.platform,this.platformVersion=a.platformVersion,this.appId=t,this.appVersion=r,this.deviceId=o}encode(){const t=Oe(this);return Kt.encode(JSON.stringify(t))}toJSON(){return Oe(this)}}const eo="https://services.cloud.mongodb.com";class ut{static getApp(t){if(t in ut.appCache)return ut.appCache[t];{const r=new ut(t);return ut.appCache[t]=r,r}}constructor(t){var r;this.users=[],this._locationUrl=null;const o=typeof t=="string"?{id:t}:t;if(typeof o=="object"&&typeof o.id=="string")this.id=o.id;else throw new Error("Missing an Atlas App Services app-id");this.baseUrl=o.baseUrl||eo,o.skipLocationRequest&&(this._locationUrl=Promise.resolve(this.baseUrl)),this.localApp=o.app,this.fetcher=new _t({appId:this.id,userContext:this,locationUrlContext:this,fetch:(r=o.fetch)!==null&&r!==void 0?r:yi}),this.emailPasswordAuth=new Mi(this.fetcher);const a=o.storage||Ft().defaultStorage;this.storage=new zi(a,this.id),this.authenticator=new Xi(this.fetcher,a,()=>this.deviceInformation);try{this.hydrate()}catch(u){this.storage.clear(),console.warn("Realm app hydration failed:",u instanceof Error?u.message:u)}}switchUser(t){const r=this.users.findIndex(a=>a===t);if(r===-1)throw new Error("The user was never logged into this app");const[o]=this.users.splice(r,1);this.users.unshift(o)}async logIn(t,r=!0){if(t.reuse){const s=this.users.find(l=>l.providerType===t.providerType);if(s)return this.switchUser(s),r&&await s.refreshProfile(),s}const o=await this.authenticator.authenticate(t),a=this.createOrUpdateUser(o,t.providerType);this.switchUser(a),r&&await a.refreshProfile(),this.storage.setUserIds(this.users.map(s=>s.id),!0);const u=o.deviceId;return u&&u!=="000000000000000000000000"&&this.storage.set(Qi,u),a}async removeUser(t){const r=this.users.findIndex(o=>o===t);if(r===-1)throw new Error("The user was never logged into this app");this.users.splice(r,1),await t.logOut(),this.storage.remove(`user(${t.id}):profile`),this.storage.removeUserId(t.id)}async deleteUser(t){await this.fetcher.fetchJSON({method:"DELETE",path:X.api().auth().delete().path}),await this.removeUser(t)}addListener(){throw new Error("Not yet implemented")}removeListener(){throw new Error("Not yet implemented")}removeAllListeners(){throw new Error("Not yet implemented")}get currentUser(){const t=this.users.filter(r=>r.state===lt.Active);return t.length===0?null:t[0]}get allUsers(){return Object.fromEntries(this.users.map(t=>[t.id,t]))}get locationUrl(){if(!this._locationUrl){const t=X.api().app(this.id).location().path;this._locationUrl=this.fetcher.fetchJSON({method:"GET",url:this.baseUrl+t,tokenType:"none"}).then(r=>{if(typeof r!="object")throw new Error("Expected response body be an object");return r}).then(({hostname:r})=>{if(typeof r!="string")throw new Error("Expected response to contain a 'hostname'");return r}).catch(r=>{throw this._locationUrl=null,r})}return this._locationUrl}get deviceInformation(){const t=this.storage.getDeviceId(),r=typeof t=="string"&&t!=="000000000000000000000000"?new z(t):void 0;return new to({appId:this.localApp?this.localApp.name:void 0,appVersion:this.localApp?this.localApp.version:void 0,deviceId:r})}createOrUpdateUser(t,r){const o=this.users.find(a=>a.id===t.userId);if(o)return o.accessToken=t.accessToken,o.refreshToken=t.refreshToken,o;{if(!t.refreshToken)throw new Error("No refresh token in response from server");const a=new wr({app:this,id:t.userId,accessToken:t.accessToken,refreshToken:t.refreshToken,providerType:r});return this.users.unshift(a),a}}hydrate(){const t=this.storage.getUserIds();this.users=t.map(r=>new wr({app:this,id:r}))}}ut.appCache={};ut.Credentials=K;const ro=e=>{},zt=function(e){return e&&e.Math==Math&&e},Lt=zt(typeof globalThis=="object"&&globalThis)||zt(typeof window=="object"&&window)||zt(typeof self=="object"&&self)||zt(typeof global=="object"&&global)||function(){return this}()||Function("return this")();ro(typeof __DEV__<"u"&&__DEV__);class no{constructor(){if(typeof Lt.localStorage=="object")this.global=Lt;else throw new Error("Cannot use LocalStorage without a global localStorage object")}get(t){return this.global.localStorage.getItem(t)}set(t,r){return this.global.localStorage.setItem(t,r)}remove(t){return this.global.localStorage.removeItem(t)}prefix(t){return new et(this,t)}clear(t){const r=[];for(let o=0;o<this.global.localStorage.length;o++){const a=this.global.localStorage.key(o);a&&(!t||a.startsWith(t))&&r.push(a)}for(const o of r)this.global.localStorage.removeItem(o)}addListener(t){return this.global.addEventListener("storage",t)}removeListener(t){return this.global.removeEventListener("storage",t)}}const vt=ci(),io="localStorage"in Lt?no:Bi;function oo(e){return typeof Lt.open=="function"?Lt.open(e):(console.log(`Please open ${e}`),null)}const so={defaultStorage:new io().prefix("realm-web"),openWindow:oo,platform:(vt==null?void 0:vt.name)||"web",platformVersion:(vt==null?void 0:vt.version)||"0.0.0",TextDecoder};ji(so);class Qr{constructor(){Tt(this,"options",{app_id:"postgraduate-task_app-cgoisax",api_key:"cAMxh77dKtSL97n5fi4Jrg3oyC23BrGT0xOp2WZbig5u9XjzRQSX5psKp7eo0L4y",cluster:"mongodb-atlas",database:"postgraduate-task",collection:"tasks"});Tt(this,"app");Tt(this,"user",null);Tt(this,"databse",null);this.app=new ut({id:this.options.app_id})}async initialize(){const t=K.apiKey(this.options.api_key);this.user=await this.app.logIn(t),this.databse=this.user.mongoClient("mongodb-atlas")}getCollection(t,r){if(!this.databse)throw new Error("MongoDB client not initialized. Call initialize() first.");return this.databse.db(t).collection(r)}async findList(t,r,o={}){return await this.getCollection(t,r).find(o)}async findOne(t,r,o={}){return await this.getCollection(t,r).findOne(o)}async findMany(t,r,o={}){return await this.getCollection(t,r).find(o)}async addOne(t,r,o={}){return(await this.getCollection(t,r).insertOne(o)).insertedId}async updateOne(t,r,o={},a){return(await this.getCollection(t,r).updateOne(o,{$set:a})).modifiedCount}async deleteOne(t,r,o={}){return(await this.getCollection(t,r).deleteOne(o)).deletedCount}async addMany(t,r,o){const u=await this.getCollection(t,r).insertMany(o);return Object.values(u.insertedIds)}async updateMany(t,r,o={},a){return(await this.getCollection(t,r).updateMany(o,{$set:a})).modifiedCount}async deleteMany(t,r,o={}){return(await this.getCollection(t,r).deleteMany(o)).deletedCount}async fileToBinary(t){return new Promise((r,o)=>{const a=new FileReader;a.onload=u=>{if(u.target&&u.target.result){const s=new ct(new Uint8Array(u.target.result));r(s)}else o(new Error("Failed to read file"))},a.onerror=u=>o(u),a.readAsArrayBuffer(t)})}async uploadFile(t,r,o,a={}){const u=this.getCollection(t,r),s=await this.fileToBinary(o),l={filename:o.name,contentType:o.type,length:o.size,uploadDate:new Date,...a,data:s};return{insertedId:(await u.insertOne(l)).insertedId,file_name:o.name}}async getFile(t,r,o){const u=await this.getCollection(t,r).findOne({_id:o});if(!u||!u.data)throw new Error("File not found");const{data:s,...l}=u;return{fileData:s.buffer,metadata:l}}async getImageUrl(t,r,o){try{const{fileData:a,metadata:u}=await this.getFile(t,r,o),s=new Blob([a],{type:u.contentType});return URL.createObjectURL(s)}catch(a){console.error("Error displaying image:",a)}return null}async deleteFile(t,r,o){return(await this.getCollection(t,r).deleteOne({_id:o})).deletedCount>0}}const Mt=e=>(Be("data-v-343c51e9"),e=e(),Ue(),e),ao={class:"submit-form"},fo={key:0},uo=Mt(()=>R("label",{class:"submit-form-text",for:"title"},"Input title: ",-1)),co=Mt(()=>R("br",null,null,-1)),ho=Mt(()=>R("label",{class:"submit-form-text",for:"input-file"},"Input Picutre: ",-1)),lo=Mt(()=>R("br",null,null,-1)),po=Mt(()=>R("label",{class:"submit-form-text",for:"submit-content"},"Submit Message: ",-1)),go=Ie({__name:"SubmitForm",props:["is_submit_form_show"],emits:["submit","start_loading","stop_loading"],setup(e,{emit:t}){const r=t,o=e,a=new Qr;_r(async()=>{await a.initialize()});const u=ve({date:new Date,title:"",message:"",file_id_list:[],file_name_list:[],status:0});function s(p){let m=p.target.files;if(m==null||m==null){alert("No files upload");return}for(let y of m)if(y.size>500*1024*1024){alert("upload file over than 500M!");return}r("start_loading");for(let y of m)new FormData().append("file",y),a.uploadFile("postgraduate-task","files",y).then(x=>{var _,E;(_=u.file_id_list)==null||_.push(x.insertedId),(E=u.file_name_list)==null||E.push(x.file_name)}).catch(x=>{console.log(x)}).finally(()=>{r("stop_loading")})}function l(){u.date=new Date,r("submit",u)}return(p,m)=>(j(),W("div",ao,[R("div",{class:"submit-button",onClick:l},"submit"),o.is_submit_form_show?(j(),W("div",fo,[uo,He(R("input",{class:"submit-form-title",id:"title",type:"text","onUpdate:modelValue":m[0]||(m[0]=y=>u.title=y)},null,512),[[Ye,u.title]]),co,ho,R("input",{class:"input-file",id:"input-file",type:"file",multiple:"",accept:".png, .jpg, .jpeg",name:"Upload",onChange:s},null,32),lo,po,He(R("textarea",{class:"submit-content",id:"submit-content",rows:"10",placeholder:"input your submit message: ","onUpdate:modelValue":m[1]||(m[1]=y=>u.message=y)},null,512),[[Ye,u.message]])])):Bt("",!0)]))}}),yo=qt(go,[["__scopeId","data-v-343c51e9"]]),mo={class:"image-block"},wo=["src"],bo=Ie({__name:"ImageBlock",props:["image_url"],emits:["close"],setup(e,{emit:t}){const r=e,o=t;function a(){o("close")}return(u,s)=>(j(),W("div",mo,[R("div",{class:"close",onClick:a},"X"),R("img",{src:r.image_url,alt:""},null,8,wo)]))}}),xo=qt(bo,[["__scopeId","data-v-7e14827f"]]),vo={},Eo=e=>(Be("data-v-4c05609e"),e=e(),Ue(),e),_o={class:"loading"},So=Eo(()=>R("div",{class:"loading-spinner"},null,-1)),No=[So];function Ao(e,t){return j(),W("div",_o,No)}const Oo=qt(vo,[["render",Ao],["__scopeId","data-v-4c05609e"]]),To=e=>(Be("data-v-52ad83ab"),e=e(),Ue(),e),Io={class:"submission"},Bo=To(()=>R("h1",null,"This is the submission page",-1)),Uo={key:2,class:"submission-content"},Ro={class:"submission-collapse-container"},ko={class:"submission-collapse-func"},Fo={class:"submission-collapse-func-item"},Lo={class:"submission-collapse-func-item"},Do={class:"submission-collapse-func-item"},Mo={class:"submission-func"},Co={class:"submission-title"},$o={class:"submission-func-container"},jo={key:0,class:"submission-file"},Po=["onClick"],Jo={class:"submission-date"},Vo={class:"submission-message"},Wo={key:0,class:"submission-line"},Ho={key:3,class:"empty"},Yo=Ie({__name:"Submission",setup(e){const t=Vt(!1),r=Vt(!1),o=Vt(!1),a=["submit","checked","awarded","failed"],u=["#895ef9fc","#41d6ba","#3ddf58","#f95e85fc"],s=Vt(null),l=ve([]),p=ve([]),m=new Qr;function y(){r.value=!0}function w(){r.value=!1}async function x(){y(),await m.findList("postgraduate-task","tasks").then(S=>{p.splice(0,p.length),l.splice(0,l.length),S!=null&&p.push(...S),p.sort((B,b)=>b.date.getTime()-B.date.getTime()),p.forEach(B=>{l.length==0||l.filter(b=>b.id==Wt(B.date).format("YY-MM-DD")).length==0?l.push({id:Wt(B.date).format("YY-MM-DD"),task_list:[B]}):l.map(b=>{if(b.id==Wt(B.date).format("YY-MM-DD")){b.task_list.push(B);return}})})}).catch(S=>{console.log(S)}).finally(()=>{w()})}_r(async()=>{r.value=!0,await m.initialize(),await x()});function _(S){S.target.parentNode.nextElementSibling.style.display=="none"?S.target.parentNode.nextElementSibling.style.display="block":S.target.parentNode.nextElementSibling.style.display="none"}function E(S,B){let b=0;for(let J of S)J.status>=B&&b++;return b}function A(S){t.value=!0,y(),s.value=null,m.getImageUrl("postgraduate-task","files",S).then(B=>{s.value=B,w()})}function L(){s.value=null,t.value=!1,w()}function F(S){o.value=!o.value,o.value==!1&&(S.message==""||S.title==""?alert("Nothing to submit! The form should be completed!"):m.addOne("postgraduate-task","tasks",S),x())}return(S,B)=>(j(),W("div",Io,[r.value?(j(),ze(Oo,{key:0})):Bt("",!0),t.value?(j(),ze(xo,{key:1,image_url:s.value,onClose:L},null,8,["image_url"])):Bt("",!0),Bo,fn(yo,{is_submit_form_show:o.value,onSubmit:F,onStart_loading:y,onStop_loading:w},null,8,["is_submit_form_show"]),l.length>0?(j(),W("ul",Uo,[(j(!0),W(fe,null,ue(l,(b,J)=>(j(),W("li",{class:"submission-item",key:b.id},[R("div",Ro,[R("div",{class:"submission-collapse",onClick:_},ot(b.id),1),R("div",ko,[R("span",Fo,"Submitted: "+ot(E(b.task_list,0)),1),R("span",Lo,"Checked: "+ot(E(b.task_list,1)),1),R("span",Do,"Awarded: "+ot(E(b.task_list,2)),1)])]),R("div",{class:"submission-item-container",style:Ge({display:J==0?"display":"none"})},[(j(!0),W(fe,null,ue(b.task_list,($,q)=>(j(),W("div",{class:"submission-item-container-content",key:q},[R("div",Mo,[R("div",Co,ot($.title),1),R("div",$o,[$.file_id_list?(j(),W("div",jo,[(j(!0),W(fe,null,ue($.file_name_list,(Ot,st)=>(j(),W("div",{class:"submission-file-item",key:st,onClick:Ct=>A($.file_id_list[st])},ot(Ot),9,Po))),128))])):Bt("",!0),R("div",Jo,ot(un(Wt)($.date).format("HH:mm:ss")),1),R("div",{class:cn({"submission-status":!0,"submission-status-error":$.status==3}),style:Ge({backgroundColor:u[$.status]})},ot(a[$.status]),7)])]),R("div",Vo,ot($.message),1),q!=b.task_list.length-1?(j(),W("hr",Wo)):Bt("",!0)]))),128))],4)]))),128))])):(j(),W("div",Ho," Nothing to show! "))]))}}),Zo=qt(Yo,[["__scopeId","data-v-52ad83ab"]]);export{Zo as default};
